editorWin=null;var isIE=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&!/chrome/i.test(navigator.userAgent),puzzleZoom=1;function openHTMLEditor(e){(editorWin=window.open("htmledit.php?field="+e,"_new","width=770, height=500, scrollbars=no, resizable=yes")).focus()}function Set_Cookie(e,t,n,i,o,r){var s=new Date,s=(s.setTime(s.getTime()),n=n&&1e3*n*60*60*24,new Date(s.getTime()+n));document.cookie=e+"="+escape(t)+(n?";expires="+s.toGMTString():"")+(i?";path="+i:";path=/")+(o?";domain="+o:"")+(r?";secure":"")}function switchRules(e){return Set_Cookie("hideRules",1-e,1e3),document.getElementById("rules").style.display=e?"block":"none",document.getElementById("norules").style.display=e?"none":"block",!1}function switchSide(e){return Set_Cookie("hideSide",1-e,1e3),e?(document.body.classList.add("expanded"),document.body.classList.remove("collapsed")):(document.body.classList.add("collapsed"),document.body.classList.remove("expanded")),decideAdSize(),!1}function pad(e){return+e<10?"0"+e:e}var startTime=0,personalTime=0;function beautifyTime(e){var t=0,n=pad(e%60),n=pad(Math.floor(e/60)%60)+":"+n,e=Math.floor(e/3600);return 0<e&&(24<e&&(t=Math.floor(e/24),e=pad(e%24)),n=e+":"+n),n=0<t?t+"d "+n:n}var timerTimeout=null;function timer(){startTime=startTime||(new Date).getTime()-1e3*document.answerForm.jstimer.value;var e=(new Date).getTime(),e=Math.floor((e-startTime)/1e3);try{document.answerForm.jstimerShow.value=beautifyTime(e),document.answerForm.jstimerShowPersonal.value=beautifyTime(Math.floor((Game.getTimer()+500)/1e3))}catch(e){}+document.answerForm.stopClock.value||(timerTimeout=setTimeout("timer()",500))}document.oncontextmenu=new Function("return false");var RightClick=1;function Get_Cookie(e){e=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}navigator.userAgent.match(/Opera/gi)&&(RightClick=0),navigator.userAgent.match(/Safari/gi)&&(RightClick=0),navigator.userAgent.match(/MSIE/gi)||navigator.userAgent.match(/Mozilla/gi)||(RightClick=0),navigator.userAgent.match(/Chrome/gi)&&(RightClick=1),(navigator.userAgent.match(/iPhone/gi)||navigator.userAgent.match(/iPad/gi)||navigator.userAgent.match(/Android/gi))&&(RightClick=0),"undefined"!=typeof freestar&&setTimeout(function(){freestar.disableRefresh()},6e5);var minZoom=.2,maxZoom=5,cookieZoom=Get_Cookie("zoom");function getZoomSettingName(){return Game.length?Game.getZoomSettingName():""}function getZoom(){return"undefined"==typeof Game?1:Settings.get(getZoomSettingName())}function setZoom(e){e=+e;var t,n,i,o,r,s,a=+Settings.get("default_zoom"),a=(e+=isNaN(a)?0:a-1,document.getElementById("game"));a&&(t=a.clientWidth,n=a.clientHeight,r=o=i=0,s="undefined"==typeof buttonsOffset?35:buttonsOffset,$("#buttonsBottom:visible").length&&(i=s),$("#buttonsRight:visible").length&&(r=s),$("#buttonsLeft:visible").length&&(o=s),t&&n&&(a.style.transform="scale("+e+")",a.style.marginLeft=Math.floor(1+(t*e-t)/2)+o*e+"px",a.style.marginRight=Math.floor(1+(t*e-t)/2)+r*e+"px",a.style.marginTop=Math.floor(1+(n*e-n)/2)+"px",a.style.marginBottom=Math.floor(1+(n*e-n)/2)+i*e+"px",Settings.set(getZoomSettingName(),e),puzzleZoom=e),decideAdSize())}function zoomIn(){puzzleZoom<maxZoom&&setZoom(puzzleZoom*=1.1)}function zoomOut(){minZoom<puzzleZoom&&setZoom(puzzleZoom/=1.1)}function getDevicePixelRatio(){return window.devicePixelRatio?window.devicePixelRatio/(Math.floor(window.devicePixelRatio)?Math.floor(window.devicePixelRatio):1):1}function resetZoom(e){e=e||(+getDevicePixelRatio()?getDevicePixelRatio():1),setZoom(document.getElementById("zoomslider").value=e)}function getDisplay(e){return(e.currentStyle||getComputedStyle(e,null)).display}function toggleZoomSlider(e){var t=document.getElementById("zoomSlider"),n=getDisplay(t),i="block",i=void 0!==e?"on"==e?"block":"none":"none"==n?"block":"none";"block"==(t.style.display=i)?window.setTimeout(function(){$(window).on("click.zoomslider",function(){toggleZoomSlider("off")}),$("#zoomSlider").on("click.zoomslider",function(e){e.stopPropagation()})},500):($(window).off("click.zoomslider"),$("#zoomSlider").off("click.zoomslider"))}void 0!==cookieZoom&&(puzzleZoom=cookieZoom);var states=[],stateIndex=-1;function storeState(e){-1!=stateIndex&&states[stateIndex]==e||(states[++stateIndex]=e,states.splice(stateIndex+1))}function undoMove(){stateIndex&&(stateIndex--,setState(states[stateIndex]))}function redoMove(){states.length>stateIndex+1&&(stateIndex++,setState(states[stateIndex]))}function switchNightMode(e){return Set_Cookie("nightMode",+e,1e3),Settings.set("puzzleSettings.global.night-mode",+e),document.documentElement.className=e?"nightmode":"",$("#night-mode").length&&$("#night-mode").prop("checked",e),!1}function switchASLMode(e){return Set_Cookie("aslMode",+e,1e3),document.location.reload(),!1}function contactUs(e){return!(top.location.href="/feedback.php")}function pinAds(){return Set_Cookie("p",1),document.body.classList.add("pinned"),!1}function pcss(e,t){return window.myGetComputedStyle927c49cf1b(document.getElementById(e)).getPropertyValue(t)}function showABLKMessage(){$("#ajaxResponse").append($('<div class="err"><p><strong>It seems that you may be using an ad blоcking software.</strong></p>            <p>We rely on ads to keep this website alive. Ad blоckers also disrupt the normal layout and behavoir of the website.</p>            <p>Please allow the ads on the site or join our <a href="/patron.php">patron program</a>!</p>            <p><a href="/feedback.php">Contact us</a> if you have any questions. Thank you!</p></div>'))}function ab927c49cf1b(t){try{if(t&&3!=t||"none"==pcss("p927c49cf1b","display")||"hidden"==pcss("p927c49cf1b","overflow")||"auto"==pcss("p927c49cf1b","overflow")||"1"!=pcss("p927c49cf1b","opacity")||"0px"!=pcss("p927c49cf1b","top")||"0px"!=pcss("p927c49cf1b","left")||"0px"!=pcss("p927c49cf1b","margin")||"none"!=pcss("p927c49cf1b","clip-path")||"auto"!=pcss("p927c49cf1b","clip")||"none"!=pcss("p927c49cf1b","transform")||"visible"!=pcss("p927c49cf1b","visibility")||"5000"!=pcss("p927c49cf1b","z-index")||"none"!=pcss("p927c49cf1b","filter")||"absolute"==pcss("p927c49cf1b","position")||$("#p927c49cf1b").width()<103||$("#p927c49cf1b").height()<10||"none"==pcss("btIn927c49cf1b","pointer-events")||"none"==pcss("bannerTop","display")||"auto"==pcss("bannerTop","overflow")||"1"!=pcss("bannerTop","opacity")||"0px"!=pcss("bannerTop","top")||"0px"!=pcss("bannerTop","left")||"0px"!=pcss("bannerTop","margin-top")||"none"!=pcss("bannerTop","clip-path")||"auto"!=pcss("bannerTop","clip")||"none"!=pcss("bannerTop","transform")||"visible"!=pcss("bannerTop","visibility")||"auto"!=pcss("bannerTop","z-index")||"none"!=pcss("bannerTop","filter")||"none"==pcss("bannerTop","pointer-events")||$("#bannerTop").width()<103||$("#bannerTop").height()<10||window.getComputedStyle(document.getElementById("p927c49cf1b")).getPropertyValue.name.startsWith("bound")||!(""+window.getComputedStyle(document.getElementById("p927c49cf1b")).getPropertyValue).includes("getPropertyValue"))return 3!=t&&(showABLKMessage(),window.gtag)&&gtag("event","ad_blocker",{}),!0}catch(t){e=t}return!1}window.myGetComputedStyle927c49cf1b=window.getComputedStyle;var initialSideAdSizeDecisionMade=!1,lastSideAdSizeDecision=!1;function defaultSideAdLoaded(){return"sovrn"==ad_manager&&"undefined"!=typeof propertag?"undefined"!=typeof ProperMedia&&1<ProperMedia.ad_project.getAdSlots().length&&-1!=ProperMedia.ad_project.getAdSlots()[1].indexOf("_monthly_"):(ad_manager,!0)}function displayAdWide(){"sovrn"==ad_manager&&"undefined"!=typeof propertag&&($("#bannerSide").html('<div class="sovrn-side"></div>'),"undefined"!=typeof ProperMedia)&&ProperMedia.ad_project.buildSlots(),"freestar"==ad_manager&&"undefined"!=typeof freestar&&($("#bannerSide").html('<div align="center" data-freestar-ad="__300x250" class="side-rail-wide" id="'+base_domain.replace(".","-")+'_medrec_right"></div><div align="center" data-freestar-ad="__300x600" class="side-rail-wide" id="'+base_domain.replace(".","-")+'_siderail_right_300x600"></div>'),"undefined"!=typeof freestar)&&(freestar.config.enabled_slots.push({placementName:base_domain.replace(".","-")+"_medrec_right",slotId:base_domain.replace(".","-")+"_medrec_right"}),freestar.config.enabled_slots.push({placementName:base_domain.replace(".","-")+"_siderail_right_300x600",slotId:base_domain.replace(".","-")+"_siderail_right_300x600"})),"playwire"==ad_manager&&"undefined"!=typeof ramp&&window.ramp&&window.ramp.destroyUnits&&window.ramp.destroyUnits("standard_iab_rght1").then(()=>{window.ramp.addUnits([{type:"standard_iab_rght2",selectorId:"plw-side-rail-wide"},{type:"standard_iab_rght3",selectorId:"plw-side-rail-wide2"}]).then(()=>ramp.displayUnits()),googletag.pubads().getSlots().forEach(function(e){["standard_iab_rght2","standard_iab_rght3"].includes(e.getSlotElementId())&&googletag.pubads().refresh([e])})}),"snigel"==ad_manager&&document.dispatchEvent(new CustomEvent("siderailSizeChange",{detail:{newWidth:300}}))}function displayAdNormal(){"sovrn"==ad_manager&&"undefined"!=typeof propertag&&($("#bannerSide").html('<div class="sovrn-side-monthly"></div>'),"undefined"!=typeof ProperMedia)&&ProperMedia.ad_project.buildSlots(),"freestar"==ad_manager&&"undefined"!=typeof freestar&&($("#bannerSide").html('<div align="center" data-freestar-ad="__160x600" class="side-rail" id="'+base_domain.replace(".","-")+'_siderail_right_160x600">'),"undefined"!=typeof freestar)&&freestar.config.enabled_slots.push({placementName:base_domain.replace(".","-")+"_siderail_right_160x600",slotId:base_domain.replace(".","-")+"_siderail_right_160x600"}),"playwire"==ad_manager&&"undefined"!=typeof ramp&&window.ramp&&window.ramp.destroyUnits&&(window.ramp.destroyUnits("standard_iab_rght3"),window.ramp.destroyUnits("standard_iab_rght2").then(()=>{window.ramp.addUnits({type:"standard_iab_rght1",selectorId:"plw-side-rail"}).then(()=>ramp.displayUnits()),googletag.pubads().getSlots().forEach(function(e){"standard_iab_rght1"==e.getSlotElementId()&&googletag.pubads().refresh([e])})})),"snigel"==ad_manager&&document.dispatchEvent(new CustomEvent("siderailSizeChange",{detail:{newWidth:160}}))}function decideAdSize(){var e,t;$("#puzzleContainer").length&&(e=$("#pageContent").width()-$("#puzzleContainer").width(),t="no-decision",1110<=$("#pageContent").width()&&(150<=e?t="wide":e<10&&(t="normal")),"no-decision"!=(t=e<10||$("#pageContent").width()<970?"normal":t)&&("wide"==t&&(Set_Cookie("wss",1,1e3),$("body").hasClass("wideSS")&&!defaultSideAdLoaded()||($("body").addClass("wideSS"),initialSideAdSizeDecisionMade&&"wide"!=lastSideAdSizeDecision&&(displayAdWide(),lastSideAdSizeDecision="wide"))),"normal"==t)&&(Set_Cookie("wss",0,1e3),$("body").hasClass("wideSS"))&&($("body").removeClass("wideSS"),initialSideAdSizeDecisionMade)&&"normal"!=lastSideAdSizeDecision&&(displayAdNormal(),lastSideAdSizeDecision="normal"),initialSideAdSizeDecisionMade=!0)}function reportAdsInfo(){var e,t,n;"undefined"!=typeof googletag&&confirm("Please, take a screenshot of the reported ad. Click OK if you already have a screenshot.")&&(window.adSlotDebug=[],googletag.pubads().getSlots().forEach(function(e){try{adSlotDebug.push({adUnitPath:e.getAdUnitPath(),slotElementId:e.getSlotElementId(),responseInfo:e.getResponseInformation(),contentUrl:e.getContentUrl(),adHtml:escape(e.getHtml())})}catch(e){}}),e=JSON.stringify(window.adSlotDebug),(t=document.createElement("form")).method="POST",t.action="/feedback.php",t.style.display="none",(n=document.createElement("input")).type="hidden",n.name="adSlotDebugData",n.value=e,t.appendChild(n),document.body.appendChild(t),t.submit())}"undefined"!=typeof ad_manager&&"snigel"==ad_manager&&document.addEventListener("siderailSizeChange",({detail:{newWidth:e}})=>{let n=300<=e?"side_1":"side_2";e=()=>{let e="side_1"==n?"adngin-side_1-0":"adngin-side_2-0";var t=googletag.pubads().getSlots().find(e=>e.getSlotElementId().startsWith("side_1"==n?"adngin-side_2-0":"adngin-side_1-0"));t&&googletag.destroySlots([t]),$("#bannerSide").html(""),"side_1"==n?($("#bannerSide").append('<div id="adngin-side_top-0"></div>'),adngin.queue.push(()=>adngin.cmd.startAuction([{adUnit:"side_top",placement:"adngin-side_top-0"}]))):(t=googletag.pubads().getSlots().find(e=>e.getSlotElementId().startsWith("adngin-side_top-0")))&&googletag.destroySlots([t]),$("#bannerSide").append('<div id="'+e+'"></div>'),adngin.queue.push(()=>adngin.cmd.startAuction([{adUnit:n,placement:e}]))};window.adngin?.adnginLoaderReady?e():window.addEventListener("adnginLoaderReady",e)}),((e,t)=>{"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(e.document)return t(e);throw new Error("jQuery requires a window with a document")}:t(e)})(void 0!==window?window:this,function(x,I){function P(e,t){return t.toUpperCase()}var e=[],S=x.document,u=e.slice,H=e.concat,O=e.push,o=e.indexOf,q={},R=q.toString,f=q.hasOwnProperty,g={},C=function(e,t){return new C.fn.init(e,t)},W=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,F=/^-ms-/,B=/-([\da-z])/gi;function U(e){var t=!!e&&"length"in e&&e.length,n=C.type(e);return"function"!==n&&!C.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}C.fn=C.prototype={jquery:"2.2.4",constructor:C,selector:"",length:0,toArray:function(){return u.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:u.call(this)},pushStack:function(e){e=C.merge(this.constructor(),e);return e.prevObject=this,e.context=this.context,e},each:function(e){return C.each(this,e)},map:function(n){return this.pushStack(C.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:O,sort:e.sort,splice:e.splice},C.extend=C.fn.extend=function(){var e,t,n,i,o,r=arguments[0]||{},s=1,a=arguments.length,l=!1;for("boolean"==typeof r&&(l=r,r=arguments[s]||{},s++),"object"==typeof r||C.isFunction(r)||(r={}),s===a&&(r=this,s--);s<a;s++)if(null!=(e=arguments[s]))for(t in e)o=r[t],n=e[t],r!==n&&(l&&n&&(C.isPlainObject(n)||(i=C.isArray(n)))?(o=i?(i=!1,o&&C.isArray(o)?o:[]):o&&C.isPlainObject(o)?o:{},r[t]=C.extend(l,o,n)):void 0!==n&&(r[t]=n));return r},C.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===C.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!C.isArray(e)&&0<=t-parseFloat(t)+1},isPlainObject:function(e){if("object"!==C.type(e)||e.nodeType||C.isWindow(e))return!1;if(e.constructor&&!f.call(e,"constructor")&&!f.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(var t in e);return void 0===t||f.call(e,t)},isEmptyObject:function(e){for(var t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?q[R.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=C.trim(e))&&(1===e.indexOf("use strict")?((t=S.createElement("script")).text=e,S.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(F,"ms-").replace(B,P)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,i=0;if(U(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(W,"")},makeArray:function(e,t){t=t||[];return null!=e&&(U(Object(e))?C.merge(t,"string"==typeof e?[e]:e):O.call(t,e)),t},inArray:function(e,t,n){return null==t?-1:o.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;i<n;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i=[],o=0,r=e.length,s=!n;o<r;o++)!t(e[o],o)!=s&&i.push(e[o]);return i},map:function(e,t,n){var i,o,r=0,s=[];if(U(e))for(i=e.length;r<i;r++)null!=(o=t(e[r],r,n))&&s.push(o);else for(r in e)o=t(e[r],r,n),null!=o&&s.push(o);return H.apply([],s)},guid:1,proxy:function(e,t){var n,i;return"string"==typeof t&&(i=e[t],t=e,e=i),C.isFunction(e)?(n=u.call(arguments,2),(i=function(){return e.apply(t||this,n.concat(u.call(arguments)))}).guid=e.guid=e.guid||C.guid++,i):void 0},now:Date.now,support:g}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=e[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){q["[object "+t+"]"]=t.toLowerCase()});function i(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&C(e).is(n))break;i.push(e)}return i}function G(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}var e=(I=>{function d(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(65536+i):String.fromCharCode(i>>10|55296,1023&i|56320)}function P(){S()}var e,f,b,r,H,g,O,q,x,l,c,S,C,t,T,m,i,o,v,k="sizzle"+ +new Date,y=I.document,$=0,R=0,W=ce(),F=ce(),w=ce(),B=function(e,t){return e===t&&(c=!0),0},U={}.hasOwnProperty,n=[],G=n.pop,V=n.push,z=n.push,X=n.slice,_=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",s="[\\x20\\t\\r\\n\\f]",a="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Y="\\["+s+"*("+a+")(?:"+s+"*([*^$|!~]?=)"+s+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+a+"))|)"+s+"*\\]",J=":("+a+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Y+")*)|.*)\\)|)",K=new RegExp(s+"+","g"),E=new RegExp("^"+s+"+|((?:^|[^\\\\])(?:\\\\.)*)"+s+"+$","g"),Q=new RegExp("^"+s+"*,"+s+"*"),ee=new RegExp("^"+s+"*([>+~]|"+s+")"+s+"*"),te=new RegExp("="+s+"*([^\\]'\"]*?)"+s+"*\\]","g"),ne=new RegExp(J),ie=new RegExp("^"+a+"$"),h={ID:new RegExp("^#("+a+")"),CLASS:new RegExp("^\\.("+a+")"),TAG:new RegExp("^("+a+"|[*])"),ATTR:new RegExp("^"+Y),PSEUDO:new RegExp("^"+J),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+s+"*(even|odd|(([+-]|)(\\d*)n|)"+s+"*(?:([+-]|)"+s+"*(\\d+)|))"+s+"*\\)|)","i"),bool:new RegExp("^(?:"+Z+")$","i"),needsContext:new RegExp("^"+s+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+s+"*((?:-\\d)?\\d*)"+s+"*\\)|)(?=[^-]|$)","i")},oe=/^(?:input|select|textarea|button)$/i,re=/^h\d$/i,u=/^[^{]+\{\s*\[native \w/,se=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ae=/[+~]/,le=/'|\\/g,p=new RegExp("\\\\([\\da-f]{1,6}"+s+"?|("+s+")|.)","ig");try{z.apply(n=X.call(y.childNodes),y.childNodes),n[y.childNodes.length].nodeType}catch(e){z={apply:n.length?function(e,t){V.apply(e,X.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function M(e,t,n,i){var o,r,s,a,l,c,u,d,h=t&&t.ownerDocument,p=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return n;if(!i&&((t?t.ownerDocument||t:y)!==C&&S(t),t=t||C,T)){if(11!==p&&(c=se.exec(e)))if(o=c[1]){if(9===p){if(!(s=t.getElementById(o)))return n;if(s.id===o)return n.push(s),n}else if(h&&(s=h.getElementById(o))&&v(t,s)&&s.id===o)return n.push(s),n}else{if(c[2])return z.apply(n,t.getElementsByTagName(e)),n;if((o=c[3])&&f.getElementsByClassName&&t.getElementsByClassName)return z.apply(n,t.getElementsByClassName(o)),n}if(f.qsa&&!w[e+" "]&&(!m||!m.test(e))){if(1!==p)h=t,d=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(le,"\\$&"):t.setAttribute("id",a=k),r=(u=g(e)).length,l=ie.test(a)?"#"+a:"[id='"+a+"']";r--;)u[r]=l+" "+j(u[r]);d=u.join(","),h=ae.test(e)&&he(t.parentNode)||t}if(d)try{return z.apply(n,h.querySelectorAll(d)),n}catch(e){}finally{a===k&&t.removeAttribute("id")}}}return q(e.replace(E,"$1"),t,n,i)}function ce(){var n=[];function i(e,t){return n.push(e+" ")>b.cacheLength&&delete i[n.shift()],i[e+" "]=t}return i}function D(e){return e[k]=!0,e}function N(e){var t=C.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function ue(e,t){for(var n=e.split("|"),i=n.length;i--;)b.attrHandle[n[i]]=t}function de(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function A(s){return D(function(r){return r=+r,D(function(e,t){for(var n,i=s([],e.length,r),o=i.length;o--;)e[n=i[o]]&&(e[n]=!(t[n]=e[n]))})})}function he(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in f=M.support={},H=M.isXML=function(e){e=e&&(e.ownerDocument||e).documentElement;return!!e&&"HTML"!==e.nodeName},S=M.setDocument=function(e){var e=e?e.ownerDocument||e:y;return e!==C&&9===e.nodeType&&e.documentElement&&(t=(C=e).documentElement,T=!H(C),(e=C.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",P,!1):e.attachEvent&&e.attachEvent("onunload",P)),f.attributes=N(function(e){return e.className="i",!e.getAttribute("className")}),f.getElementsByTagName=N(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),f.getElementsByClassName=u.test(C.getElementsByClassName),f.getById=N(function(e){return t.appendChild(e).id=k,!C.getElementsByName||!C.getElementsByName(k).length}),f.getById?(b.find.ID=function(e,t){if(void 0!==t.getElementById&&T)return(t=t.getElementById(e))?[t]:[]},b.filter.ID=function(e){var t=e.replace(p,d);return function(e){return e.getAttribute("id")===t}}):(delete b.find.ID,b.filter.ID=function(e){var t=e.replace(p,d);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}}),b.find.TAG=f.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):f.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"!==e)return r;for(;n=r[o++];)1===n.nodeType&&i.push(n);return i},b.find.CLASS=f.getElementsByClassName&&function(e,t){return void 0!==t.getElementsByClassName&&T?t.getElementsByClassName(e):void 0},i=[],m=[],(f.qsa=u.test(C.querySelectorAll))&&(N(function(e){t.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+s+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+s+"*(?:value|"+Z+")"),e.querySelectorAll("[id~="+k+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||m.push(".#.+[+~]")}),N(function(e){var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+s+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(f.matchesSelector=u.test(o=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.msMatchesSelector))&&N(function(e){f.disconnectedMatch=o.call(e,"div"),o.call(e,"[s!='']:x"),i.push("!=",J)}),m=m.length&&new RegExp(m.join("|")),i=i.length&&new RegExp(i.join("|")),e=u.test(t.compareDocumentPosition),v=e||u.test(t.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(n.contains?n.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},B=e?function(e,t){var n;return e===t?(c=!0,0):(n=!e.compareDocumentPosition-!t.compareDocumentPosition)||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!f.sortDetached&&t.compareDocumentPosition(e)===n?e===C||e.ownerDocument===y&&v(y,e)?-1:t===C||t.ownerDocument===y&&v(y,t)?1:l?_(l,e)-_(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,i=0,o=e.parentNode,r=t.parentNode,s=[e],a=[t];if(!o||!r)return e===C?-1:t===C?1:o?-1:r?1:l?_(l,e)-_(l,t):0;if(o===r)return de(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?de(s[i],a[i]):s[i]===y?-1:a[i]===y?1:0}),C},M.matches=function(e,t){return M(e,null,null,t)},M.matchesSelector=function(e,t){if((e.ownerDocument||e)!==C&&S(e),t=t.replace(te,"='$1']"),f.matchesSelector&&T&&!w[t+" "]&&(!i||!i.test(t))&&(!m||!m.test(t)))try{var n=o.call(e,t);if(n||f.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<M(t,C,null,[e]).length},M.contains=function(e,t){return(e.ownerDocument||e)!==C&&S(e),v(e,t)},M.attr=function(e,t){(e.ownerDocument||e)!==C&&S(e);var n=b.attrHandle[t.toLowerCase()],n=n&&U.call(b.attrHandle,t.toLowerCase())?n(e,t,!T):void 0;return void 0!==n?n:f.attributes||!T?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},M.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},M.uniqueSort=function(e){var t,n=[],i=0,o=0;if(c=!f.detectDuplicates,l=!f.sortStable&&e.slice(0),e.sort(B),c){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return l=null,e},r=M.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=r(t);return n},(b=M.selectors={cacheLength:50,createPseudo:D,match:h,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(p,d),e[3]=(e[3]||e[4]||e[5]||"").replace(p,d),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||M.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&M.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return h.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ne.test(n)&&(t=(t=g(n,!0))&&n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(p,d).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+s+")"+e+"("+s+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(e){e=M.attr(e,t);return null==e?"!="===n:!n||(e+="","="===n?e===i:"!="===n?e!==i:"^="===n?i&&0===e.indexOf(i):"*="===n?i&&-1<e.indexOf(i):"$="===n?i&&e.slice(-i.length)===i:"~="===n?-1<(" "+e.replace(K," ")+" ").indexOf(i):"|="===n&&(e===i||e.slice(0,i.length+1)===i+"-"))}},CHILD:function(f,e,t,g,m){var v="nth"!==f.slice(0,3),y="last"!==f.slice(-4),w="of-type"===e;return 1===g&&0===m?function(e){return!!e.parentNode}:function(e,t,n){var i,o,r,s,a,l,c=v!=y?"nextSibling":"previousSibling",u=e.parentNode,d=w&&e.nodeName.toLowerCase(),h=!n&&!w,p=!1;if(u){if(v){for(;c;){for(s=e;s=s[c];)if(w?s.nodeName.toLowerCase()===d:1===s.nodeType)return!1;l=c="only"===f&&!l&&"nextSibling"}return!0}if(l=[y?u.firstChild:u.lastChild],y&&h){for(p=(a=(i=(o=(r=(s=u)[k]||(s[k]={}))[s.uniqueID]||(r[s.uniqueID]={}))[f]||[])[0]===$&&i[1])&&i[2],s=a&&u.childNodes[a];s=++a&&s&&s[c]||(p=a=0,l.pop());)if(1===s.nodeType&&++p&&s===e){o[f]=[$,a,p];break}}else if(!1===(p=h?a=(i=(o=(r=(s=e)[k]||(s[k]={}))[s.uniqueID]||(r[s.uniqueID]={}))[f]||[])[0]===$&&i[1]:p))for(;(s=++a&&s&&s[c]||(p=a=0,l.pop()))&&((w?s.nodeName.toLowerCase()!==d:1!==s.nodeType)||!++p||(h&&((o=(r=s[k]||(s[k]={}))[s.uniqueID]||(r[s.uniqueID]={}))[f]=[$,p]),s!==e)););return(p-=m)===g||p%g==0&&0<=p/g}}},PSEUDO:function(e,r){var t,s=b.pseudos[e]||b.setFilters[e.toLowerCase()]||M.error("unsupported pseudo: "+e);return s[k]?s(r):1<s.length?(t=[e,e,"",r],b.setFilters.hasOwnProperty(e.toLowerCase())?D(function(e,t){for(var n,i=s(e,r),o=i.length;o--;)e[n=_(e,i[o])]=!(t[n]=i[o])}):function(e){return s(e,0,t)}):s}},pseudos:{not:D(function(e){var i=[],o=[],a=O(e.replace(E,"$1"));return a[k]?D(function(e,t,n,i){for(var o,r=a(e,null,i,[]),s=e.length;s--;)(o=r[s])&&(e[s]=!(t[s]=o))}):function(e,t,n){return i[0]=e,a(i,null,n,o),i[0]=null,!o.pop()}}),has:D(function(t){return function(e){return 0<M(t,e).length}}),contains:D(function(t){return t=t.replace(p,d),function(e){return-1<(e.textContent||e.innerText||r(e)).indexOf(t)}}),lang:D(function(n){return ie.test(n||"")||M.error("unsupported lang: "+n),n=n.replace(p,d).toLowerCase(),function(e){var t;do{if(t=T?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=I.location&&I.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===t},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return re.test(e.nodeName)},input:function(e){return oe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:A(function(){return[0]}),last:A(function(e,t){return[t-1]}),eq:A(function(e,t,n){return[n<0?n+t:n]}),even:A(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:A(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:A(function(e,t,n){for(var i=n<0?n+t:n;0<=--i;)e.push(i);return e}),gt:A(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=(t=>function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t})(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=(n=>function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n})(e);function pe(){}function j(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function fe(s,e,t){var a=e.dir,l=t&&"parentNode"===a,c=R++;return e.first?function(e,t,n){for(;e=e[a];)if(1===e.nodeType||l)return s(e,t,n)}:function(e,t,n){var i,o,r=[$,c];if(n){for(;e=e[a];)if((1===e.nodeType||l)&&s(e,t,n))return!0}else for(;e=e[a];)if(1===e.nodeType||l){if((i=(o=(o=e[k]||(e[k]={}))[e.uniqueID]||(o[e.uniqueID]={}))[a])&&i[0]===$&&i[1]===c)return r[2]=i[2];if((o[a]=r)[2]=s(e,t,n))return!0}}}function ge(o){return 1<o.length?function(e,t,n){for(var i=o.length;i--;)if(!o[i](e,t,n))return!1;return!0}:o[0]}function L(e,t,n,i,o){for(var r,s=[],a=0,l=e.length,c=null!=t;a<l;a++)!(r=e[a])||n&&!n(r,i,o)||(s.push(r),c&&t.push(a));return s}function me(p,f,g,m,v,e){return m&&!m[k]&&(m=me(m)),v&&!v[k]&&(v=me(v,e)),D(function(e,t,n,i){var o,r,s,a=[],l=[],c=t.length,u=e||((e,t,n)=>{for(var i=0,o=t.length;i<o;i++)M(e,t[i],n);return n})(f||"*",n.nodeType?[n]:n,[]),d=!p||!e&&f?u:L(u,a,p,n,i),h=g?v||(e?p:c||m)?[]:t:d;if(g&&g(d,h,n,i),m)for(o=L(h,l),m(o,[],n,i),r=o.length;r--;)(s=o[r])&&(h[l[r]]=!(d[l[r]]=s));if(e){if(v||p){if(v){for(o=[],r=h.length;r--;)(s=h[r])&&o.push(d[r]=s);v(null,h=[],o,i)}for(r=h.length;r--;)(s=h[r])&&-1<(o=v?_(e,s):a[r])&&(e[o]=!(t[o]=s))}}else h=L(h===t?h.splice(c,h.length):h),v?v(null,t,h,i):z.apply(t,h)})}function ve(m,v){function e(e,t,n,i,o){var r,s,a,l=0,c="0",u=e&&[],d=[],h=x,p=e||w&&b.find.TAG("*",o),f=$+=null==h?1:Math.random()||.1,g=p.length;for(o&&(x=t===C||t||o);c!==g&&null!=(r=p[c]);c++){if(w&&r){for(s=0,t||r.ownerDocument===C||(S(r),n=!T);a=m[s++];)if(a(r,t||C,n)){i.push(r);break}o&&($=f)}y&&((r=!a&&r)&&l--,e)&&u.push(r)}if(l+=c,y&&c!==l){for(s=0;a=v[s++];)a(u,d,t,n);if(e){if(0<l)for(;c--;)u[c]||d[c]||(d[c]=G.call(i));d=L(d)}z.apply(i,d),o&&!e&&0<d.length&&1<l+v.length&&M.uniqueSort(i)}return o&&($=f,x=h),u}var y=0<v.length,w=0<m.length;return y?D(e):e}return pe.prototype=b.filters=b.pseudos,b.setFilters=new pe,g=M.tokenize=function(e,t){var n,i,o,r,s,a,l,c=F[e+" "];if(c)return t?0:c.slice(0);for(s=e,a=[],l=b.preFilter;s;){for(r in n&&!(i=Q.exec(s))||(i&&(s=s.slice(i[0].length)||s),a.push(o=[])),n=!1,(i=ee.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(E," ")}),s=s.slice(n.length)),b.filter)!(i=h[r].exec(s))||l[r]&&!(i=l[r](i))||(n=i.shift(),o.push({value:n,type:r,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?M.error(e):F(e,a).slice(0)},O=M.compile=function(e,t){var n,i=[],o=[],r=w[e+" "];if(!r){for(n=(t=t||g(e)).length;n--;)((r=function e(t){for(var i,n,o,r=t.length,s=b.relative[t[0].type],a=s||b.relative[" "],l=s?1:0,c=fe(function(e){return e===i},a,!0),u=fe(function(e){return-1<_(i,e)},a,!0),d=[function(e,t,n){return e=!s&&(n||t!==x)||((i=t).nodeType?c:u)(e,t,n),i=null,e}];l<r;l++)if(n=b.relative[t[l].type])d=[fe(ge(d),n)];else{if((n=b.filter[t[l].type].apply(null,t[l].matches))[k]){for(o=++l;o<r&&!b.relative[t[o].type];o++);return me(1<l&&ge(d),1<l&&j(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(E,"$1"),n,l<o&&e(t.slice(l,o)),o<r&&e(t=t.slice(o)),o<r&&j(t))}d.push(n)}return ge(d)}(t[n]))[k]?i:o).push(r);(r=w(e,ve(o,i))).selector=e}return r},q=M.select=function(e,t,n,i){var o,r,s,a,l,c="function"==typeof e&&e,u=!i&&g(e=c.selector||e);if(n=n||[],1===u.length){if(2<(r=u[0]=u[0].slice(0)).length&&"ID"===(s=r[0]).type&&f.getById&&9===t.nodeType&&T&&b.relative[r[1].type]){if(!(t=(b.find.ID(s.matches[0].replace(p,d),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=h.needsContext.test(e)?0:r.length;o--&&(s=r[o],!b.relative[a=s.type]);)if((l=b.find[a])&&(i=l(s.matches[0].replace(p,d),ae.test(r[0].type)&&he(t.parentNode)||t))){if(r.splice(o,1),e=i.length&&j(r))break;return z.apply(n,i),n}}return(c||O(e,u))(i,t,!T,n,!t||ae.test(e)&&he(t.parentNode)||t),n},f.sortStable=k.split("").sort(B).join("")===k,f.detectDuplicates=!!c,S(),f.sortDetached=N(function(e){return 1&e.compareDocumentPosition(C.createElement("div"))}),N(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ue("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),f.attributes&&N(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ue("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),N(function(e){return null==e.getAttribute("disabled")})||ue(Z,function(e,t,n){return n?void 0:!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),M})(x),V=(C.find=e,C.expr=e.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=e.uniqueSort,C.text=e.getText,C.isXMLDoc=e.isXML,C.contains=e.contains,C.expr.match.needsContext),X=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Z=/^.[^:#\[\.,]*$/;function Y(e,n,i){if(C.isFunction(n))return C.grep(e,function(e,t){return!!n.call(e,t,e)!==i});if(n.nodeType)return C.grep(e,function(e){return e===n!==i});if("string"==typeof n){if(Z.test(n))return C.filter(n,e,i);n=C.filter(n,e)}return C.grep(e,function(e){return-1<o.call(n,e)!==i})}C.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?C.find.matchesSelector(i,e)?[i]:[]:C.find.matches(e,C.grep(t,function(e){return 1===e.nodeType}))},C.fn.extend({find:function(e){var t,n=this.length,i=[],o=this;if("string"!=typeof e)return this.pushStack(C(e).filter(function(){for(t=0;t<n;t++)if(C.contains(o[t],this))return!0}));for(t=0;t<n;t++)C.find(e,o[t],i);return(i=this.pushStack(1<n?C.unique(i):i)).selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(Y(this,e||[],!1))},not:function(e){return this.pushStack(Y(this,e||[],!0))},is:function(e){return!!Y(this,"string"==typeof e&&V.test(e)?C(e):e||[],!1).length}});var J,K=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,Q=((C.fn.init=function(e,t,n){if(e){if(n=n||J,"string"!=typeof e)return e.nodeType?(this.context=this[0]=e,this.length=1,this):C.isFunction(e)?void 0!==n.ready?n.ready(e):e(C):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),C.makeArray(e,this));if(!(i="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:K.exec(e))||!i[1]&&t)return(!t||t.jquery?t||n:this.constructor(t)).find(e);if(i[1]){if(t=t instanceof C?t[0]:t,C.merge(this,C.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:S,!0)),X.test(i[1])&&C.isPlainObject(t))for(var i in t)C.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i])}else(n=S.getElementById(i[2]))&&n.parentNode&&(this.length=1,this[0]=n),this.context=S,this.selector=e}return this}).prototype=C.fn,J=C(S),/^(?:parents|prev(?:Until|All))/),ee={children:!0,contents:!0,next:!0,prev:!0};function te(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}C.fn.extend({has:function(e){var t=C(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(C.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,o=this.length,r=[],s=V.test(e)||"string"!=typeof e?C(e,t||this.context):0;i<o;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&C.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(1<r.length?C.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?o.call(C(e),this[0]):o.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),C.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return i(e,"parentNode")},parentsUntil:function(e,t,n){return i(e,"parentNode",n)},next:function(e){return te(e,"nextSibling")},prev:function(e){return te(e,"previousSibling")},nextAll:function(e){return i(e,"nextSibling")},prevAll:function(e){return i(e,"previousSibling")},nextUntil:function(e,t,n){return i(e,"nextSibling",n)},prevUntil:function(e,t,n){return i(e,"previousSibling",n)},siblings:function(e){return G((e.parentNode||{}).firstChild,e)},children:function(e){return G(e.firstChild)},contents:function(e){return e.contentDocument||C.merge([],e.childNodes)}},function(i,o){C.fn[i]=function(e,t){var n=C.map(this,o,e);return(t="Until"!==i.slice(-5)?e:t)&&"string"==typeof t&&(n=C.filter(t,n)),1<this.length&&(ee[i]||C.uniqueSort(n),Q.test(i))&&n.reverse(),this.pushStack(n)}});var ne,T=/\S+/g;function ie(){S.removeEventListener("DOMContentLoaded",ie),x.removeEventListener("load",ie),C.ready()}C.Callbacks=function(i){var e,n;i="string"==typeof i?(e=i,n={},C.each(e.match(T)||[],function(e,t){n[t]=!0}),n):C.extend({},i);function o(){for(a=i.once,s=r=!0;c.length;u=-1)for(t=c.shift();++u<l.length;)!1===l[u].apply(t[0],t[1])&&i.stopOnFalse&&(u=l.length,t=!1);i.memory||(t=!1),r=!1,a&&(l=t?[]:"")}var r,t,s,a,l=[],c=[],u=-1,d={add:function(){return l&&(t&&!r&&(u=l.length-1,c.push(t)),function n(e){C.each(e,function(e,t){C.isFunction(t)?i.unique&&d.has(t)||l.push(t):t&&t.length&&"string"!==C.type(t)&&n(t)})}(arguments),t)&&!r&&o(),this},remove:function(){return C.each(arguments,function(e,t){for(var n;-1<(n=C.inArray(t,l,n));)l.splice(n,1),n<=u&&u--}),this},has:function(e){return e?-1<C.inArray(e,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return a=c=[],l=t="",this},disabled:function(){return!l},lock:function(){return a=c=[],t||(l=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],c.push(t),r)||o(),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!s}};return d},C.extend({Deferred:function(e){var r=[["resolve","done",C.Callbacks("once memory"),"resolved"],["reject","fail",C.Callbacks("once memory"),"rejected"],["notify","progress",C.Callbacks("memory")]],o="pending",s={state:function(){return o},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var o=arguments;return C.Deferred(function(i){C.each(r,function(e,t){var n=C.isFunction(o[e])&&o[e];a[t[1]](function(){var e=n&&n.apply(this,arguments);e&&C.isFunction(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[t[0]+"With"](this===s?i.promise():this,n?[e]:arguments)})}),o=null}).promise()},promise:function(e){return null!=e?C.extend(e,s):s}},a={};return s.pipe=s.then,C.each(r,function(e,t){var n=t[2],i=t[3];s[t[1]]=n.add,i&&n.add(function(){o=i},r[1^e][2].disable,r[2][2].lock),a[t[0]]=function(){return a[t[0]+"With"](this===a?s:this,arguments),this},a[t[0]+"With"]=n.fireWith}),s.promise(a),e&&e.call(a,a),a},when:function(e){function t(t,n,i){return function(e){n[t]=this,i[t]=1<arguments.length?u.call(arguments):e,i===o?c.notifyWith(n,i):--l||c.resolveWith(n,i)}}var o,n,i,r=0,s=u.call(arguments),a=s.length,l=1!==a||e&&C.isFunction(e.promise)?a:0,c=1===l?e:C.Deferred();if(1<a)for(o=new Array(a),n=new Array(a),i=new Array(a);r<a;r++)s[r]&&C.isFunction(s[r].promise)?s[r].promise().progress(t(r,n,o)).done(t(r,i,s)).fail(c.reject):--l;return l||c.resolveWith(i,s),c.promise()}}),C.fn.ready=function(e){return C.ready.promise().done(e),this},C.extend({isReady:!1,readyWait:1,holdReady:function(e){e?C.readyWait++:C.ready(!0)},ready:function(e){(!0===e?--C.readyWait:C.isReady)||(C.isReady=!0)!==e&&0<--C.readyWait||(ne.resolveWith(S,[C]),C.fn.triggerHandler&&(C(S).triggerHandler("ready"),C(S).off("ready")))}}),C.ready.promise=function(e){return ne||(ne=C.Deferred(),"complete"===S.readyState||"loading"!==S.readyState&&!S.documentElement.doScroll?x.setTimeout(C.ready):(S.addEventListener("DOMContentLoaded",ie),x.addEventListener("load",ie))),ne.promise(e)},C.ready.promise();function d(e,t,n,i,o,r,s){var a=0,l=e.length,c=null==n;if("object"===C.type(n))for(a in o=!0,n)d(e,t,a,n[a],!0,r,s);else if(void 0!==i&&(o=!0,C.isFunction(i)||(s=!0),t=c?s?(t.call(e,i),null):(c=t,function(e,t,n){return c.call(C(e),n)}):t))for(;a<l;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return o?e:c?t.call(e):l?t(e[0],n):r}function m(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function t(){this.expando=C.expando+t.uid++}t.uid=1,t.prototype={register:function(e,t){t=t||{};return e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){var t;return m(e)?((t=e[this.expando])||(t={},m(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t):{}},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[t]=n;else for(i in t)o[i]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?void 0!==(i=this.get(e,t))?i:this.get(e,C.camelCase(t)):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,o,r=e[this.expando];if(void 0!==r){if(void 0===t)this.register(e);else{n=(i=C.isArray(t)?t.concat(t.map(C.camelCase)):(o=C.camelCase(t),t in r?[t,o]:(i=o)in r?[i]:i.match(T)||[])).length;for(;n--;)delete r[i[n]]}void 0!==t&&!C.isEmptyObject(r)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=e[this.expando];return void 0!==e&&!C.isEmptyObject(e)}};var v=new t,l=new t,oe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,re=/[A-Z]/g;function se(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(re,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:oe.test(n)?C.parseJSON(n):n)}catch(e){}l.set(e,t,n)}else n=void 0;return n}C.extend({hasData:function(e){return l.hasData(e)||v.hasData(e)},data:function(e,t,n){return l.access(e,t,n)},removeData:function(e,t){l.remove(e,t)},_data:function(e,t,n){return v.access(e,t,n)},_removeData:function(e,t){v.remove(e,t)}}),C.fn.extend({data:function(i,e){var t,n,o,r=this[0],s=r&&r.attributes;if(void 0!==i)return"object"==typeof i?this.each(function(){l.set(this,i)}):d(this,function(t){var e,n;if(r&&void 0===t)return void 0!==(e=l.get(r,i)||l.get(r,i.replace(re,"-$&").toLowerCase()))||(n=C.camelCase(i),void 0!==(e=l.get(r,n)))||void 0!==(e=se(r,n,void 0))?e:void 0;n=C.camelCase(i),this.each(function(){var e=l.get(this,n);l.set(this,n,t),-1<i.indexOf("-")&&void 0!==e&&l.set(this,i,t)})},null,e,1<arguments.length,null,!0);if(this.length&&(o=l.get(r),1===r.nodeType)&&!v.get(r,"hasDataAttrs")){for(t=s.length;t--;)s[t]&&0===(n=s[t].name).indexOf("data-")&&(n=C.camelCase(n.slice(5)),se(r,n,o[n]));v.set(r,"hasDataAttrs",!0)}return o},removeData:function(e){return this.each(function(){l.remove(this,e)})}}),C.extend({queue:function(e,t,n){var i;return e?(i=v.get(e,t=(t||"fx")+"queue"),n&&(!i||C.isArray(n)?i=v.access(e,t,C.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=C.queue(e,t),i=n.length,o=n.shift(),r=C._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,function(){C.dequeue(e,t)},r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v.get(e,n)||v.access(e,n,{empty:C.Callbacks("once memory").add(function(){v.remove(e,[t+"queue",n])})})}}),C.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?C.queue(this[0],t):void 0===n?this:this.each(function(){var e=C.queue(this,t,n);C._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&C.dequeue(this,t)})},dequeue:function(e){return this.each(function(){C.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--o||r.resolveWith(s,[s])}var i,o=1,r=C.Deferred(),s=this,a=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(i=v.get(s[a],e+"queueHooks"))&&i.empty&&(o++,i.empty.add(n));return n(),r.promise(t)}});function y(e,t){return"none"===C.css(e=t||e,"display")||!C.contains(e.ownerDocument,e)}var e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,h=new RegExp("^(?:([+-])=|)("+e+")([a-z%]*)$","i"),a=["Top","Right","Bottom","Left"];function ae(e,t,n,i){var o,r=1,s=20,a=i?function(){return i.cur()}:function(){return C.css(e,t,"")},l=a(),c=n&&n[3]||(C.cssNumber[t]?"":"px"),u=(C.cssNumber[t]||"px"!==c&&+l)&&h.exec(C.css(e,t));if(u&&u[3]!==c)for(c=c||u[3],n=n||[],u=+l||1;C.style(e,t,(u/=r=r||".5")+c),r!==(r=a()/l)&&1!==r&&--s;);return n&&(u=+u||+l||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],i)&&(i.unit=c,i.start=u,i.end=o),o}var le=/^(?:checkbox|radio)$/i,ce=/<([\w:-]+)/,ue=/^$|\/(?:java|ecma)script/i,w={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function b(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&C.nodeName(e,t)?C.merge([e],n):n}function de(e,t){for(var n=0,i=e.length;n<i;n++)v.set(e[n],"globalEval",!t||v.get(t[n],"globalEval"))}w.optgroup=w.option,w.tbody=w.tfoot=w.colgroup=w.caption=w.thead,w.th=w.td;var he=/<|&#?\w+;/;function pe(e,t,n,i,o){for(var r,s,a,l,c,u=t.createDocumentFragment(),d=[],h=0,p=e.length;h<p;h++)if((r=e[h])||0===r)if("object"===C.type(r))C.merge(d,r.nodeType?[r]:r);else if(he.test(r)){for(s=s||u.appendChild(t.createElement("div")),a=(ce.exec(r)||["",""])[1].toLowerCase(),a=w[a]||w._default,s.innerHTML=a[1]+C.htmlPrefilter(r)+a[2],c=a[0];c--;)s=s.lastChild;C.merge(d,s.childNodes),(s=u.firstChild).textContent=""}else d.push(t.createTextNode(r));for(u.textContent="",h=0;r=d[h++];)if(i&&-1<C.inArray(r,i))o&&o.push(r);else if(l=C.contains(r.ownerDocument,r),s=b(u.appendChild(r),"script"),l&&de(s),n)for(c=0;r=s[c++];)ue.test(r.type||"")&&n.push(r);return u}M=S.createDocumentFragment().appendChild(S.createElement("div")),(E=S.createElement("input")).setAttribute("type","radio"),E.setAttribute("checked","checked"),E.setAttribute("name","t"),M.appendChild(E),g.checkClone=M.cloneNode(!0).cloneNode(!0).lastChild.checked,M.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!M.cloneNode(!0).lastChild.defaultValue;var fe=/^key/,ge=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,me=/^([^.]*)(?:\.(.+)|)/;function ve(){return!0}function c(){return!1}function ye(){try{return S.activeElement}catch(e){}}function we(e,t,n,i,o,r){var s,a;if("object"==typeof t){for(a in"string"!=typeof n&&(i=i||n,n=void 0),t)we(e,a,n,i,t[a],r);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=c;else if(!o)return e;return 1===r&&(s=o,(o=function(e){return C().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=C.guid++)),e.each(function(){C.event.add(this,t,o,i,n)})}C.event={global:{},add:function(t,e,n,i,o){var r,s,a,l,c,u,d,h,p,f=v.get(t);if(f)for(n.handler&&(n=(r=n).handler,o=r.selector),n.guid||(n.guid=C.guid++),a=(a=f.events)||(f.events={}),s=(s=f.handle)||(f.handle=function(e){return void 0!==C&&C.event.triggered!==e.type?C.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(T)||[""]).length;l--;)d=p=(h=me.exec(e[l])||[])[1],h=(h[2]||"").split(".").sort(),d&&(c=C.event.special[d]||{},d=(o?c.delegateType:c.bindType)||d,c=C.event.special[d]||{},p=C.extend({type:d,origType:p,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&C.expr.match.needsContext.test(o),namespace:h.join(".")},r),(u=a[d])||((u=a[d]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,i,h,s))||t.addEventListener&&t.addEventListener(d,s),c.add&&(c.add.call(t,p),p.handler.guid||(p.handler.guid=n.guid)),o?u.splice(u.delegateCount++,0,p):u.push(p),C.event.global[d]=!0)},remove:function(e,t,n,i,o){var r,s,a,l,c,u,d,h,p,f,g,m=v.hasData(e)&&v.get(e);if(m&&(l=m.events)){for(c=(t=(t||"").match(T)||[""]).length;c--;)if(p=g=(a=me.exec(t[c])||[])[1],f=(a[2]||"").split(".").sort(),p){for(d=C.event.special[p]||{},h=l[p=(i?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=h.length;r--;)u=h[r],!o&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(r,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));s&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,f,m.handle)||C.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)C.event.remove(e,p+t[c],n,i,!0);C.isEmptyObject(l)&&v.remove(e,"handle events")}},dispatch:function(e){e=C.event.fix(e);var t,n,i,o,r,s=u.call(arguments),a=(v.get(this,"events")||{})[e.type]||[],l=C.event.special[e.type]||{};if((s[0]=e).delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,e)){for(r=C.event.handlers.call(this,e,a),t=0;(i=r[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(o=((C.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(e.result=o)&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,o,r,s=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(i=[],n=0;n<a;n++)void 0===i[o=(r=t[n]).selector+" "]&&(i[o]=r.needsContext?-1<C(o,this).index(l):C.find(o,this,null,[l]).length),i[o]&&i.push(r);i.length&&s.push({elem:l,handlers:i})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=(i=e.target.ownerDocument||S).documentElement,i=i.body,e.pageX=t.clientX+(n&&n.scrollLeft||i&&i.scrollLeft||0)-(n&&n.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||i&&i.scrollTop||0)-(n&&n.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[C.expando])return e;var t,n,i,o=e.type,r=e,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=ge.test(o)?this.mouseHooks:fe.test(o)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new C.Event(r),t=i.length;t--;)e[n=i[t]]=r[n];return e.target||(e.target=S),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==ye()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===ye()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&C.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return C.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},C.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},C.Event=function(e,t){return this instanceof C.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ve:c):this.type=e,t&&C.extend(this,t),this.timeStamp=e&&e.timeStamp||C.now(),void(this[C.expando]=!0)):new C.Event(e,t)},C.Event.prototype={constructor:C.Event,isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ve,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ve,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ve,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,o){C.event.special[e]={delegateType:o,bindType:o,handle:function(e){var t,n=e.relatedTarget,i=e.handleObj;return n&&(n===this||C.contains(this,n))||(e.type=i.origType,t=i.handler.apply(this,arguments),e.type=o),t}}}),C.fn.extend({on:function(e,t,n,i){return we(this,e,t,n,i)},one:function(e,t,n,i){return we(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)i=e.handleObj,C(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler);else{if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=c),this.each(function(){C.event.remove(this,e,n,t)});for(o in e)this.off(o,t,e[o])}return this}});var be=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,xe=/<script|<style|<link/i,Se=/checked\s*(?:[^=]|=\s*.checked.)/i,Ce=/^true\/(.*)/,Te=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function ke(e,t){return C.nodeName(e,"table")&&C.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function $e(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ze(e){var t=Ce.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _e(e,t){var n,i,o,r,s,a;if(1===t.nodeType){if(v.hasData(e)&&(r=v.access(e),s=v.set(t,r),a=r.events))for(o in delete s.handle,s.events={},a)for(n=0,i=a[o].length;n<i;n++)C.event.add(t,o,a[o][n]);l.hasData(e)&&(r=l.access(e),s=C.extend({},r),l.set(t,s))}}function k(n,i,o,r){i=H.apply([],i);var e,t,s,a,l,c,u=0,d=n.length,h=d-1,p=i[0],f=C.isFunction(p);if(f||1<d&&"string"==typeof p&&!g.checkClone&&Se.test(p))return n.each(function(e){var t=n.eq(e);f&&(i[0]=p.call(this,e,t.html())),k(t,i,o,r)});if(d&&(t=(e=pe(i,n[0].ownerDocument,!1,n,r)).firstChild,1===e.childNodes.length&&(e=t),t||r)){for(a=(s=C.map(b(e,"script"),$e)).length;u<d;u++)l=e,u!==h&&(l=C.clone(l,!0,!0),a)&&C.merge(s,b(l,"script")),o.call(n[u],l,u);if(a)for(c=s[s.length-1].ownerDocument,C.map(s,ze),u=0;u<a;u++)l=s[u],ue.test(l.type||"")&&!v.access(l,"globalEval")&&C.contains(c,l)&&(l.src?C._evalUrl&&C._evalUrl(l.src):C.globalEval(l.textContent.replace(Te,"")))}return n}function Ee(e,t,n){for(var i,o=t?C.filter(t,e):e,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||C.cleanData(b(i)),i.parentNode&&(n&&C.contains(i.ownerDocument,i)&&de(b(i,"script")),i.parentNode.removeChild(i));return e}C.extend({htmlPrefilter:function(e){return e.replace(be,"<$1></$2>")},clone:function(e,t,n){var i,o,r,s,a,l,c,u=e.cloneNode(!0),d=C.contains(e.ownerDocument,e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||C.isXMLDoc(e)))for(s=b(u),i=0,o=(r=b(e)).length;i<o;i++)a=r[i],l=s[i],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&le.test(a.type)?l.checked=a.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=a.defaultValue);if(t)if(n)for(r=r||b(e),s=s||b(u),i=0,o=r.length;i<o;i++)_e(r[i],s[i]);else _e(e,u);return 0<(s=b(u,"script")).length&&de(s,!d&&b(e,"script")),u},cleanData:function(e){for(var t,n,i,o=C.event.special,r=0;void 0!==(n=e[r]);r++)if(m(n)){if(t=n[v.expando]){if(t.events)for(i in t.events)o[i]?C.event.remove(n,i):C.removeEvent(n,i,t.handle);n[v.expando]=void 0}n[l.expando]&&(n[l.expando]=void 0)}}}),C.fn.extend({domManip:k,detach:function(e){return Ee(this,e,!0)},remove:function(e){return Ee(this,e)},text:function(e){return d(this,function(e){return void 0===e?C.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return k(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ke(this,e).appendChild(e)})},prepend:function(){return k(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=ke(this,e)).insertBefore(e,t.firstChild)})},before:function(){return k(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return k(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(C.cleanData(b(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return C.clone(this,e,t)})},html:function(e){return d(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!xe.test(e)&&!w[(ce.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(C.cleanData(b(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return k(this,arguments,function(e){var t=this.parentNode;C.inArray(this,n)<0&&(C.cleanData(b(this)),t)&&t.replaceChild(e,this)},n)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,s){C.fn[e]=function(e){for(var t,n=[],i=C(e),o=i.length-1,r=0;r<=o;r++)t=r===o?this:this.clone(!0),C(i[r])[s](t),O.apply(n,t.get());return this.pushStack(n)}});var Me,De={HTML:"block",BODY:"block"};function Ne(e,t){e=C(t.createElement(e)).appendTo(t.body),t=C.css(e[0],"display");return e.detach(),t}function Ae(e){var t=S,n=De[e];return n||("none"!==(n=Ne(e,t))&&n||((t=(Me=(Me||C("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),n=Ne(e,t),Me.detach()),De[e]=n),n}function je(e){var t=e.ownerDocument.defaultView;return(t=t&&t.opener?t:x).getComputedStyle(e)}function Le(e,t,n,i){var o,r={};for(o in t)r[o]=e.style[o],e.style[o]=t[o];for(o in n=n.apply(e,i||[]),t)e.style[o]=r[o];return n}var Ie,n,Pe,He,r,s,Oe=/^margin/,qe=new RegExp("^("+e+")(?!px)[a-z%]+$","i"),p=S.documentElement;function Re(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",p.appendChild(r);var e=x.getComputedStyle(s);Ie="1%"!==e.top,He="2px"===e.marginLeft,n="4px"===e.width,s.style.marginRight="50%",Pe="4px"===e.marginRight,p.removeChild(r)}function $(e,t,n){var i,o,r=e.style;return""!==(o=(n=n||je(e))?n.getPropertyValue(t)||n[t]:void 0)&&void 0!==o||C.contains(e.ownerDocument,e)||(o=C.style(e,t)),n&&!g.pixelMarginRight()&&qe.test(o)&&Oe.test(t)&&(e=r.width,t=r.minWidth,i=r.maxWidth,r.minWidth=r.maxWidth=r.width=o,o=n.width,r.width=e,r.minWidth=t,r.maxWidth=i),void 0!==o?o+"":o}function We(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}r=S.createElement("div"),(s=S.createElement("div")).style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===s.style.backgroundClip,r.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",r.appendChild(s),C.extend(g,{pixelPosition:function(){return Re(),Ie},boxSizingReliable:function(){return null==n&&Re(),n},pixelMarginRight:function(){return null==n&&Re(),Pe},reliableMarginLeft:function(){return null==n&&Re(),He},reliableMarginRight:function(){var e,t=s.appendChild(S.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",p.appendChild(r),e=!parseFloat(x.getComputedStyle(t).marginRight),p.removeChild(r),s.removeChild(t),e}}));var Fe=/^(none|table(?!-c[ea]).+)/,Be={position:"absolute",visibility:"hidden",display:"block"},Ue={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","O","Moz","ms"],Ve=S.createElement("div").style;function Xe(e){if(e in Ve)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Ge.length;n--;)if((e=Ge[n]+t)in Ve)return e}function Ze(e,t,n){var i=h.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function Ye(e,t,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,s=0;r<4;r+=2)"margin"===n&&(s+=C.css(e,n+a[r],!0,o)),i?("content"===n&&(s-=C.css(e,"padding"+a[r],!0,o)),"margin"!==n&&(s-=C.css(e,"border"+a[r]+"Width",!0,o))):(s+=C.css(e,"padding"+a[r],!0,o),"padding"!==n&&(s+=C.css(e,"border"+a[r]+"Width",!0,o)));return s}function Je(e,t,n){var i=!0,o="width"===t?e.offsetWidth:e.offsetHeight,r=je(e),s="border-box"===C.css(e,"boxSizing",!1,r);if(o<=0||null==o){if(((o=$(e,t,r))<0||null==o)&&(o=e.style[t]),qe.test(o))return o;i=s&&(g.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+Ye(e,t,n||(s?"border":"content"),i,r)+"px"}function Ke(e,t){for(var n,i,o,r=[],s=0,a=e.length;s<a;s++)(i=e[s]).style&&(r[s]=v.get(i,"olddisplay"),n=i.style.display,t?(r[s]||"none"!==n||(i.style.display=""),""===i.style.display&&y(i)&&(r[s]=v.access(i,"olddisplay",Ae(i.nodeName)))):(o=y(i),"none"===n&&o||v.set(i,"olddisplay",o?n:C.css(i,"display"))));for(s=0;s<a;s++)!(i=e[s]).style||t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[s]||"":"none");return e}function z(e,t,n,i,o){return new z.prototype.init(e,t,n,i,o)}C.extend({cssHooks:{opacity:{get:function(e,t){if(t)return""===(t=$(e,"opacity"))?"1":t}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){var o,r,s,a,l;if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style)return a=C.camelCase(t),l=e.style,t=C.cssProps[a]||(C.cssProps[a]=Xe(a)||a),s=C.cssHooks[t]||C.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(o=s.get(e,!1,i))?o:l[t]:("string"===(r=typeof n)&&(o=h.exec(n))&&o[1]&&(n=ae(e,t,o),r="number"),void(null!=n&&n==n&&("number"===r&&(n+=o&&o[3]||(C.cssNumber[a]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(l[t]=n))))},css:function(e,t,n,i){var o,r=C.camelCase(t);return t=C.cssProps[r]||(C.cssProps[r]=Xe(r)||r),"normal"===(o=void 0===(o=(r=C.cssHooks[t]||C.cssHooks[r])&&"get"in r?r.get(e,!0,n):o)?$(e,t,i):o)&&t in Ue&&(o=Ue[t]),(""===n||n)&&(r=parseFloat(o),!0===n||isFinite(r))?r||0:o}}),C.each(["height","width"],function(e,o){C.cssHooks[o]={get:function(e,t,n){return t?Fe.test(C.css(e,"display"))&&0===e.offsetWidth?Le(e,Be,function(){return Je(e,o,n)}):Je(e,o,n):void 0},set:function(e,t,n){var i=n&&je(e),n=n&&Ye(e,o,n,"border-box"===C.css(e,"boxSizing",!1,i),i);return n&&(i=h.exec(t))&&"px"!==(i[3]||"px")&&(e.style[o]=t,t=C.css(e,o)),Ze(0,t,n)}}}),C.cssHooks.marginLeft=We(g.reliableMarginLeft,function(e,t){return t?(parseFloat($(e,"marginLeft"))||e.getBoundingClientRect().left-Le(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),C.cssHooks.marginRight=We(g.reliableMarginRight,function(e,t){return t?Le(e,{display:"inline-block"},$,[e,"marginRight"]):void 0}),C.each({margin:"",padding:"",border:"Width"},function(o,r){C.cssHooks[o+r]={expand:function(e){for(var t=0,n={},i="string"==typeof e?e.split(" "):[e];t<4;t++)n[o+a[t]+r]=i[t]||i[t-2]||i[0];return n}},Oe.test(o)||(C.cssHooks[o+r].set=Ze)}),C.fn.extend({css:function(e,t){return d(this,function(e,t,n){var i,o,r={},s=0;if(C.isArray(t)){for(i=je(e),o=t.length;s<o;s++)r[t[s]]=C.css(e,t[s],!1,i);return r}return void 0!==n?C.style(e,t,n):C.css(e,t)},e,t,1<arguments.length)},show:function(){return Ke(this,!0)},hide:function(){return Ke(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){y(this)?C(this).show():C(this).hide()})}}),((C.Tween=z).prototype={constructor:z,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||C.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(C.cssNumber[n]?"":"px")},cur:function(){var e=z.propHooks[this.prop];return(e&&e.get?e:z.propHooks._default).get(this)},run:function(e){var t,n=z.propHooks[this.prop];return this.options.duration?this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(n&&n.set?n:z.propHooks._default).set(this),this}}).init.prototype=z.prototype,(z.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=C.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){C.fx.step[e.prop]?C.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[C.cssProps[e.prop]]&&!C.cssHooks[e.prop]?e.elem[e.prop]=e.now:C.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=z.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},C.fx=z.prototype.init,C.fx.step={};var _,Qe,E,M,et=/^(?:toggle|show|hide)$/,tt=/queueHooks$/;function nt(){return x.setTimeout(function(){_=void 0}),_=C.now()}function it(e,t){var n,i=0,o={height:e};for(t=t?1:0;i<4;i+=2-t)o["margin"+(n=a[i])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function ot(e,t,n){for(var i,o=(D.tweeners[t]||[]).concat(D.tweeners["*"]),r=0,s=o.length;r<s;r++)if(i=o[r].call(n,t,e))return i}function D(o,e,t){var n,r,i,s,a,l,c,u=0,d=D.prefilters.length,h=C.Deferred().always(function(){delete p.elem}),p=function(){if(r)return!1;for(var e=_||nt(),e=Math.max(0,f.startTime+f.duration-e),t=1-(e/f.duration||0),n=0,i=f.tweens.length;n<i;n++)f.tweens[n].run(t);return h.notifyWith(o,[f,t,e]),t<1&&i?e:(h.resolveWith(o,[f]),!1)},f=h.promise({elem:o,props:C.extend({},e),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},t),originalProperties:e,originalOptions:t,startTime:_||nt(),duration:t.duration,tweens:[],createTween:function(e,t){t=C.Tween(o,f.opts,e,t,f.opts.specialEasing[e]||f.opts.easing);return f.tweens.push(t),t},stop:function(e){var t=0,n=e?f.tweens.length:0;if(!r){for(r=!0;t<n;t++)f.tweens[t].run(1);e?(h.notifyWith(o,[f,1,0]),h.resolveWith(o,[f,e])):h.rejectWith(o,[f,e])}return this}}),g=f.props,m=g,v=f.opts.specialEasing;for(i in m)if(s=C.camelCase(i),a=v[s],l=m[i],C.isArray(l)&&(a=l[1],l=m[i]=l[0]),i!==s&&(m[s]=l,delete m[i]),c=C.cssHooks[s],c&&"expand"in c)for(i in l=c.expand(l),delete m[s],l)i in m||(m[i]=l[i],v[i]=a);else v[s]=a;for(;u<d;u++)if(n=D.prefilters[u].call(f,o,g,f.opts))return C.isFunction(n.stop)&&(C._queueHooks(f.elem,f.opts.queue).stop=C.proxy(n.stop,n)),n;return C.map(g,ot,f),C.isFunction(f.opts.start)&&f.opts.start.call(o,f),C.fx.timer(C.extend(p,{elem:o,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}C.Animation=C.extend(D,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ae(n.elem,e,h.exec(t),n),n}]},tweener:function(e,t){for(var n,i=0,o=(e=C.isFunction(e)?(t=e,["*"]):e.match(T)).length;i<o;i++)n=e[i],D.tweeners[n]=D.tweeners[n]||[],D.tweeners[n].unshift(t)},prefilters:[function(t,e,n){var i,o,r,s,a,l,c,u=this,d={},h=t.style,p=t.nodeType&&y(t),f=v.get(t,"fxshow");for(i in n.queue||(null==(a=C._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,C.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===("none"===(c=C.css(t,"display"))?v.get(t,"olddisplay")||Ae(t.nodeName):c))&&"none"===C.css(t,"float")&&(h.display="inline-block"),n.overflow&&(h.overflow="hidden",u.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),e)if(o=e[i],et.exec(o)){if(delete e[i],r=r||"toggle"===o,o===(p?"hide":"show")){if("show"!==o||!f||void 0===f[i])continue;p=!0}d[i]=f&&f[i]||C.style(t,i)}else c=void 0;if(C.isEmptyObject(d))"inline"===("none"===c?Ae(t.nodeName):c)&&(h.display=c);else for(i in f?"hidden"in f&&(p=f.hidden):f=v.access(t,"fxshow",{}),r&&(f.hidden=!p),p?C(t).show():u.done(function(){C(t).hide()}),u.done(function(){for(var e in v.remove(t,"fxshow"),d)C.style(t,e,d[e])}),d)s=ot(p?f[i]:0,i,u),i in f||(f[i]=s.start,p&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}],prefilter:function(e,t){t?D.prefilters.unshift(e):D.prefilters.push(e)}}),C.speed=function(e,t,n){var i=e&&"object"==typeof e?C.extend({},e):{complete:n||!n&&t||C.isFunction(e)&&e,duration:e,easing:n&&t||t&&!C.isFunction(t)&&t};return i.duration=C.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in C.fx.speeds?C.fx.speeds[i.duration]:C.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){C.isFunction(i.old)&&i.old.call(this),i.queue&&C.dequeue(this,i.queue)},i},C.fn.extend({fadeTo:function(e,t,n,i){return this.filter(y).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(t,e,n,i){function o(){var e=D(this,C.extend({},t),s);(r||v.get(this,"finish"))&&e.stop(!0)}var r=C.isEmptyObject(t),s=C.speed(e,n,i);return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(o,e,r){function s(e){var t=e.stop;delete e.stop,t(r)}return"string"!=typeof o&&(r=e,e=o,o=void 0),e&&!1!==o&&this.queue(o||"fx",[]),this.each(function(){var e=!0,t=null!=o&&o+"queueHooks",n=C.timers,i=v.get(this);if(t)i[t]&&i[t].stop&&s(i[t]);else for(t in i)i[t]&&i[t].stop&&tt.test(t)&&s(i[t]);for(t=n.length;t--;)n[t].elem!==this||null!=o&&n[t].queue!==o||(n[t].anim.stop(r),e=!1,n.splice(t,1));!e&&r||C.dequeue(this,o)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var e,t=v.get(this),n=t[s+"queue"],i=t[s+"queueHooks"],o=C.timers,r=n?n.length:0;for(t.finish=!0,C.queue(this,s,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===s&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<r;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),C.each(["toggle","show","hide"],function(e,i){var o=C.fn[i];C.fn[i]=function(e,t,n){return null==e||"boolean"==typeof e?o.apply(this,arguments):this.animate(it(i,!0),e,t,n)}}),C.each({slideDown:it("show"),slideUp:it("hide"),slideToggle:it("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,i){C.fn[e]=function(e,t,n){return this.animate(i,e,t,n)}}),C.timers=[],C.fx.tick=function(){var e,t=0,n=C.timers;for(_=C.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||C.fx.stop(),_=void 0},C.fx.timer=function(e){C.timers.push(e),e()?C.fx.start():C.timers.pop()},C.fx.interval=13,C.fx.start=function(){Qe=Qe||x.setInterval(C.fx.tick,C.fx.interval)},C.fx.stop=function(){x.clearInterval(Qe),Qe=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(i,e){return i=C.fx&&C.fx.speeds[i]||i,this.queue(e=e||"fx",function(e,t){var n=x.setTimeout(e,i);t.stop=function(){x.clearTimeout(n)}})},E=S.createElement("input"),M=S.createElement("select"),e=M.appendChild(S.createElement("option")),E.type="checkbox",g.checkOn=""!==E.value,g.optSelected=e.selected,M.disabled=!0,g.optDisabled=!e.disabled,(E=S.createElement("input")).value="t",E.type="radio",g.radioValue="t"===E.value;var rt,N=C.expr.attrHandle,st=(C.fn.extend({attr:function(e,t){return d(this,C.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){C.removeAttr(this,e)})}}),C.extend({attr:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?C.prop(e,t,n):(1===r&&C.isXMLDoc(e)||(t=t.toLowerCase(),o=C.attrHooks[t]||(C.expr.match.bool.test(t)?rt:void 0)),void 0!==n?null===n?void C.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):!(o&&"get"in o&&null!==(i=o.get(e,t)))&&null==(i=C.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){var n;if(!g.radioValue&&"radio"===t&&C.nodeName(e,"input"))return n=e.value,e.setAttribute("type",t),n&&(e.value=n),t}}},removeAttr:function(e,t){var n,i,o=0,r=t&&t.match(T);if(r&&1===e.nodeType)for(;n=r[o++];)i=C.propFix[n]||n,C.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),rt={set:function(e,t,n){return!1===t?C.removeAttr(e,n):e.setAttribute(n,n),n}},C.each(C.expr.match.bool.source.match(/\w+/g),function(e,t){var r=N[t]||C.find.attr;N[t]=function(e,t,n){var i,o;return n||(o=N[t],N[t]=i,i=null!=r(e,t,n)?t.toLowerCase():null,N[t]=o),i}}),/^(?:input|select|textarea|button)$/i),at=/^(?:a|area)$/i,lt=(C.fn.extend({prop:function(e,t){return d(this,C.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[C.propFix[e]||e]})}}),C.extend({prop:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&C.isXMLDoc(e)||(t=C.propFix[t]||t,o=C.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");return t?parseInt(t,10):st.test(e.nodeName)||at.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(C.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode)&&e.parentNode.selectedIndex}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this}),/[\t\r\n\f]/g);function A(e){return e.getAttribute&&e.getAttribute("class")||""}C.fn.extend({addClass:function(t){var e,n,i,o,r,s,a=0;if(C.isFunction(t))return this.each(function(e){C(this).addClass(t.call(this,e,A(this)))});if("string"==typeof t&&t)for(e=t.match(T)||[];n=this[a++];)if(s=A(n),i=1===n.nodeType&&(" "+s+" ").replace(lt," ")){for(r=0;o=e[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s!==(s=C.trim(i))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,i,o,r,s,a=0;if(C.isFunction(t))return this.each(function(e){C(this).removeClass(t.call(this,e,A(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(T)||[];n=this[a++];)if(s=A(n),i=1===n.nodeType&&(" "+s+" ").replace(lt," ")){for(r=0;o=e[r++];)for(;-1<i.indexOf(" "+o+" ");)i=i.replace(" "+o+" "," ");s!==(s=C.trim(i))&&n.setAttribute("class",s)}return this},toggleClass:function(o,t){var r=typeof o;return"boolean"==typeof t&&"string"==r?t?this.addClass(o):this.removeClass(o):C.isFunction(o)?this.each(function(e){C(this).toggleClass(o.call(this,e,A(this),t),t)}):this.each(function(){var e,t,n,i;if("string"==r)for(t=0,n=C(this),i=o.match(T)||[];e=i[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==o&&"boolean"!=r||((e=A(this))&&v.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==o&&v.get(this,"__className__")||""))})},hasClass:function(e){for(var t,n=0,i=" "+e+" ";t=this[n++];)if(1===t.nodeType&&-1<(" "+A(t)+" ").replace(lt," ").indexOf(i))return!0;return!1}});var ct=/\r/g,ut=/[\x20\t\r\n\f]+/g,dt=(C.fn.extend({val:function(t){var n,e,i,o=this[0];return arguments.length?(i=C.isFunction(t),this.each(function(e){1===this.nodeType&&(null==(e=i?t.call(this,e,C(this).val()):t)?e="":"number"==typeof e?e+="":C.isArray(e)&&(e=C.map(e,function(e){return null==e?"":e+""})),(n=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,e,"value")||(this.value=e))})):o?(n=C.valHooks[o.type]||C.valHooks[o.nodeName.toLowerCase()])&&"get"in n&&void 0!==(e=n.get(o,"value"))?e:"string"==typeof(e=o.value)?e.replace(ct,""):null==e?"":e:void 0}}),C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return null!=t?t:C.trim(C.text(e)).replace(ut," ")}},select:{get:function(e){for(var t,n=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,r=o?null:[],s=o?i+1:n.length,a=i<0?s:o?i:0;a<s;a++)if(((t=n[a]).selected||a===i)&&(g.optDisabled?!t.disabled:null===t.getAttribute("disabled"))&&(!t.parentNode.disabled||!C.nodeName(t.parentNode,"optgroup"))){if(t=C(t).val(),o)return t;r.push(t)}return r},set:function(e,t){for(var n,i,o=e.options,r=C.makeArray(t),s=o.length;s--;)((i=o[s]).selected=-1<C.inArray(C.valHooks.option.get(i),r))&&(n=!0);return n||(e.selectedIndex=-1),r}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(e,t){return C.isArray(t)?e.checked=-1<C.inArray(C(e).val(),t):void 0}},g.checkOn||(C.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),/^(?:focusinfocus|focusoutblur)$/),j=(C.extend(C.event,{trigger:function(e,t,n,i){var o,r,s,a,l,c,u=[n||S],d=f.call(e,"type")?e.type:e,h=f.call(e,"namespace")?e.namespace.split("."):[],p=r=n=n||S;if(3!==n.nodeType&&8!==n.nodeType&&!dt.test(d+C.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),a=d.indexOf(":")<0&&"on"+d,(e=e[C.expando]?e:new C.Event(d,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:C.makeArray(t,[e]),c=C.event.special[d]||{},i||!c.trigger||!1!==c.trigger.apply(n,t))){if(!i&&!c.noBubble&&!C.isWindow(n)){for(s=c.delegateType||d,dt.test(s+d)||(p=p.parentNode);p;p=p.parentNode)u.push(p),r=p;r===(n.ownerDocument||S)&&u.push(r.defaultView||r.parentWindow||x)}for(o=0;(p=u[o++])&&!e.isPropagationStopped();)e.type=1<o?s:c.bindType||d,(l=(v.get(p,"events")||{})[e.type]&&v.get(p,"handle"))&&l.apply(p,t),(l=a&&p[a])&&l.apply&&m(p)&&(e.result=l.apply(p,t),!1===e.result)&&e.preventDefault();return e.type=d,i||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(u.pop(),t)||!m(n)||a&&C.isFunction(n[d])&&!C.isWindow(n)&&((r=n[a])&&(n[a]=null),n[C.event.triggered=d](),C.event.triggered=void 0,r)&&(n[a]=r),e.result}},simulate:function(e,t,n){n=C.extend(new C.Event,n,{type:e,isSimulated:!0});C.event.trigger(n,null,t)}}),C.fn.extend({trigger:function(e,t){return this.each(function(){C.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?C.event.trigger(e,t,n,!0):void 0}}),C.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,n){C.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),C.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),g.focusin="onfocusin"in x,g.focusin||C.each({focus:"focusin",blur:"focusout"},function(n,i){function o(e){C.event.simulate(i,e.target,C.event.fix(e))}C.event.special[i]={setup:function(){var e=this.ownerDocument||this,t=v.access(e,i);t||e.addEventListener(n,o,!0),v.access(e,i,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=v.access(e,i)-1;t?v.access(e,i,t):(e.removeEventListener(n,o,!0),v.remove(e,i))}}}),x.location),ht=C.now(),pt=/\?/,ft=(C.parseJSON=function(e){return JSON.parse(e+"")},C.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new x.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||C.error("Invalid XML: "+e),t},/#.*$/),gt=/([?&])_=[^&]*/,mt=/^(.*?):[ \t]*([^\r\n]*)$/gm,vt=/^(?:GET|HEAD)$/,yt=/^\/\//,wt={},bt={},xt="*/".concat("*"),St=S.createElement("a");function Ct(r){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,i=0,o=e.toLowerCase().match(T)||[];if(C.isFunction(t))for(;n=o[i++];)"+"===n[0]?(n=n.slice(1)||"*",(r[n]=r[n]||[]).unshift(t)):(r[n]=r[n]||[]).push(t)}}function Tt(t,i,o,r){var s={},a=t===bt;function l(e){var n;return s[e]=!0,C.each(t[e]||[],function(e,t){t=t(i,o,r);return"string"!=typeof t||a||s[t]?a?!(n=t):void 0:(i.dataTypes.unshift(t),l(t),!1)}),n}return l(i.dataTypes[0])||!s["*"]&&l("*")}function kt(e,t){var n,i,o=C.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i=i||{})[n]=t[n]);return i&&C.extend(!0,e,i),e}St.href=j.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:j.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(j.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":C.parseJSON,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?kt(kt(e,C.ajaxSettings),t):kt(C.ajaxSettings,e)},ajaxPrefilter:Ct(wt),ajaxTransport:Ct(bt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var l,c,u,n,d,h,i,p=C.ajaxSetup({},t=t||{}),f=p.context||p,g=p.context&&(f.nodeType||f.jquery)?C(f):C.event,m=C.Deferred(),v=C.Callbacks("once memory"),y=p.statusCode||{},o={},r={},w=0,s="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!n)for(n={};t=mt.exec(u);)n[t[1].toLowerCase()]=t[2];t=n[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?u:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=r[n]=r[n]||e,o[e]=t),this},overrideMimeType:function(e){return w||(p.mimeType=e),this},statusCode:function(e){if(e)if(w<2)for(var t in e)y[t]=[y[t],e[t]];else b.always(e[b.status]);return this},abort:function(e){e=e||s;return l&&l.abort(e),a(0,e),this}};if(m.promise(b).complete=v.add,b.success=b.done,b.error=b.fail,p.url=((e||p.url||j.href)+"").replace(ft,"").replace(yt,j.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=C.trim(p.dataType||"*").toLowerCase().match(T)||[""],null==p.crossDomain){e=S.createElement("a");try{e.href=p.url,e.href=e.href,p.crossDomain=St.protocol+"//"+St.host!=e.protocol+"//"+e.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=C.param(p.data,p.traditional)),Tt(wt,p,t,b),2!==w){for(i in(h=C.event&&p.global)&&0==C.active++&&C.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!vt.test(p.type),c=p.url,p.hasContent||(p.data&&(c=p.url+=(pt.test(c)?"&":"?")+p.data,delete p.data),!1===p.cache&&(p.url=gt.test(c)?c.replace(gt,"$1_="+ht++):c+(pt.test(c)?"&":"?")+"_="+ht++)),p.ifModified&&(C.lastModified[c]&&b.setRequestHeader("If-Modified-Since",C.lastModified[c]),C.etag[c])&&b.setRequestHeader("If-None-Match",C.etag[c]),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&b.setRequestHeader("Content-Type",p.contentType),b.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+xt+"; q=0.01":""):p.accepts["*"]),p.headers)b.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(!1===p.beforeSend.call(f,b,p)||2===w))return b.abort();for(i in s="abort",{success:1,error:1,complete:1})b[i](p[i]);if(l=Tt(bt,p,t,b)){if(b.readyState=1,h&&g.trigger("ajaxSend",[b,p]),2===w)return b;p.async&&0<p.timeout&&(d=x.setTimeout(function(){b.abort("timeout")},p.timeout));try{w=1,l.send(o,a)}catch(e){if(!(w<2))throw e;a(-1,e)}}else a(-1,"No Transport")}return b;function a(e,t,n,i){var o,r,s,a=t;2!==w&&(w=2,d&&x.clearTimeout(d),l=void 0,u=i||"",b.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=((e,t,n)=>{for(var i,o,r,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in a)if(a[o]&&a[o].test(i)){l.unshift(o);break}if(l[0]in n)r=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){r=o;break}s=s||o}r=r||s}return r?(r!==l[0]&&l.unshift(r),n[r]):void 0})(p,b,n)),s=((e,t,n,i)=>{var o,r,s,a,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(r=u.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=c[l+" "+r]||c["* "+r]))for(o in c)if(a=o.split(" "),a[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[o]:!0!==c[o]&&(r=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}})(p,s,b,i),i?(p.ifModified&&((n=b.getResponseHeader("Last-Modified"))&&(C.lastModified[c]=n),n=b.getResponseHeader("etag"))&&(C.etag[c]=n),204===e||"HEAD"===p.type?a="nocontent":304===e?a="notmodified":(a=s.state,o=s.data,i=!(r=s.error))):(r=a,!e&&a||(a="error",e<0&&(e=0))),b.status=e,b.statusText=(t||a)+"",i?m.resolveWith(f,[o,a,b]):m.rejectWith(f,[b,a,r]),b.statusCode(y),y=void 0,h&&g.trigger(i?"ajaxSuccess":"ajaxError",[b,p,i?o:r]),v.fireWith(f,[b,a]),h)&&(g.trigger("ajaxComplete",[b,p]),--C.active||C.event.trigger("ajaxStop"))}},getJSON:function(e,t,n){return C.get(e,t,n,"json")},getScript:function(e,t){return C.get(e,void 0,t,"script")}}),C.each(["get","post"],function(e,o){C[o]=function(e,t,n,i){return C.isFunction(t)&&(i=i||n,n=t,t=void 0),C.ajax(C.extend({url:e,type:o,dataType:i,data:t,success:n},C.isPlainObject(e)&&e))}}),C._evalUrl=function(e){return C.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},C.fn.extend({wrapAll:function(t){var e;return C.isFunction(t)?this.each(function(e){C(this).wrapAll(t.call(this,e))}):(this[0]&&(e=C(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(n){return C.isFunction(n)?this.each(function(e){C(this).wrapInner(n.call(this,e))}):this.each(function(){var e=C(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=C.isFunction(t);return this.each(function(e){C(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){C.nodeName(this,"body")||C(this).replaceWith(this.childNodes)}).end()}}),C.expr.filters.hidden=function(e){return!C.expr.filters.visible(e)},C.expr.filters.visible=function(e){return 0<e.offsetWidth||0<e.offsetHeight||0<e.getClientRects().length};var $t=/%20/g,zt=/\[\]$/,_t=/\r?\n/g,Et=/^(?:submit|button|image|reset|file)$/i,Mt=/^(?:input|select|textarea|keygen)/i;C.param=function(e,t){function n(e,t){t=C.isFunction(t)?t():null==t?"":t,o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)}var i,o=[];if(void 0===t&&(t=C.ajaxSettings&&C.ajaxSettings.traditional),C.isArray(e)||e.jquery&&!C.isPlainObject(e))C.each(e,function(){n(this.name,this.value)});else for(i in e)!function n(i,e,o,r){if(C.isArray(e))C.each(e,function(e,t){o||zt.test(i)?r(i,t):n(i+"["+("object"==typeof t&&null!=t?e:"")+"]",t,o,r)});else if(o||"object"!==C.type(e))r(i,e);else for(var t in e)n(i+"["+t+"]",e[t],o,r)}(i,e[i],t,n);return o.join("&").replace($t,"+")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&Mt.test(this.nodeName)&&!Et.test(e)&&(this.checked||!le.test(e))}).map(function(e,t){var n=C(this).val();return null==n?null:C.isArray(n)?C.map(n,function(e){return{name:t.name,value:e.replace(_t,"\r\n")}}):{name:t.name,value:n.replace(_t,"\r\n")}}).get()}}),C.ajaxSettings.xhr=function(){try{return new x.XMLHttpRequest}catch(e){}};var Dt={0:200,1223:204},L=C.ajaxSettings.xhr(),Nt=(g.cors=!!L&&"withCredentials"in L,g.ajax=L=!!L,C.ajaxTransport(function(o){var r,s;return g.cors||L&&!o.crossDomain?{send:function(e,t){var n,i=o.xhr();if(i.open(o.type,o.url,o.async,o.username,o.password),o.xhrFields)for(n in o.xhrFields)i[n]=o.xhrFields[n];for(n in o.mimeType&&i.overrideMimeType&&i.overrideMimeType(o.mimeType),o.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)i.setRequestHeader(n,e[n]);r=function(e){return function(){r&&(r=s=i.onload=i.onerror=i.onabort=i.onreadystatechange=null,"abort"===e?i.abort():"error"===e?"number"!=typeof i.status?t(0,"error"):t(i.status,i.statusText):t(Dt[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=r(),s=i.onerror=r("error"),void 0!==i.onabort?i.onabort=s:i.onreadystatechange=function(){4===i.readyState&&x.setTimeout(function(){r&&s()})},r=r("abort");try{i.send(o.hasContent&&o.data||null)}catch(e){if(r)throw e}},abort:function(){r&&r()}}:void 0}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),C.ajaxTransport("script",function(n){var i,o;if(n.crossDomain)return{send:function(e,t){i=C("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",o=function(e){i.remove(),o=null,e&&t("error"===e.type?404:200,e.type)}),S.head.appendChild(i[0])},abort:function(){o&&o()}}}),[]),At=/(=)\?(?=&|$)|\?\?/,jt=(C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Nt.pop()||C.expando+"_"+ht++;return this[e]=!0,e}}),C.ajaxPrefilter("json jsonp",function(e,t,n){var i,o,r,s=!1!==e.jsonp&&(At.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&At.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=C.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(At,"$1"+i):!1!==e.jsonp&&(e.url+=(pt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return r||C.error(i+" was not called"),r[0]},e.dataTypes[0]="json",o=x[i],x[i]=function(){r=arguments},n.always(function(){void 0===o?C(x).removeProp(i):x[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,Nt.push(i)),r&&C.isFunction(o)&&o(r[0]),r=o=void 0}),"script"):void 0}),C.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||S;var i=X.exec(e),n=!n&&[];return i?[t.createElement(i[1])]:(i=pe([e],t,n),n&&n.length&&C(n).remove(),C.merge([],i.childNodes))},C.fn.load);function Lt(e){return C.isWindow(e)?e:9===e.nodeType&&e.defaultView}C.fn.load=function(e,t,n){var i,o,r,s,a;return"string"!=typeof e&&jt?jt.apply(this,arguments):(s=this,-1<(a=e.indexOf(" "))&&(i=C.trim(e.slice(a)),e=e.slice(0,a)),C.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),0<s.length&&C.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){r=arguments,s.html(i?C("<div>").append(C.parseHTML(e)).find(i):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,r||[e.responseText,t,e])})}),this)},C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){C.fn[t]=function(e){return this.on(t,e)}}),C.expr.filters.animated=function(t){return C.grep(C.timers,function(e){return t===e.elem}).length},C.offset={setOffset:function(e,t,n){var i,o,r,s,a=C.css(e,"position"),l=C(e),c={};"static"===a&&(e.style.position="relative"),r=l.offset(),i=C.css(e,"top"),s=C.css(e,"left"),a=("absolute"===a||"fixed"===a)&&-1<(i+s).indexOf("auto")?(o=(a=l.position()).top,a.left):(o=parseFloat(i)||0,parseFloat(s)||0),null!=(t=C.isFunction(t)?t.call(e,n,C.extend({},r)):t).top&&(c.top=t.top-r.top+o),null!=t.left&&(c.left=t.left-r.left+a),"using"in t?t.using.call(e,c):l.css(c)}},C.fn.extend({offset:function(t){var e,n,i,o;return arguments.length?void 0===t?this:this.each(function(e){C.offset.setOffset(this,t,e)}):(i={top:0,left:0},(o=(n=this[0])&&n.ownerDocument)?(e=o.documentElement,C.contains(e,n)?(i=n.getBoundingClientRect(),n=Lt(o),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i):void 0)},position:function(){var e,t,n,i;if(this[0])return n=this[0],i={top:0,left:0},"fixed"===C.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),(i=C.nodeName(e[0],"html")?i:e.offset()).top+=C.css(e[0],"borderTopWidth",!0),i.left+=C.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-C.css(n,"marginTop",!0),left:t.left-i.left-C.css(n,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===C.css(e,"position");)e=e.offsetParent;return e||p})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,o){var r="pageYOffset"===o;C.fn[t]=function(e){return d(this,function(e,t,n){var i=Lt(e);return void 0===n?i?i[o]:e[t]:void(i?i.scrollTo(r?i.pageXOffset:n,r?n:i.pageYOffset):e[t]=n)},t,e,arguments.length)}}),C.each(["top","left"],function(e,n){C.cssHooks[n]=We(g.pixelPosition,function(e,t){return t?(t=$(e,n),qe.test(t)?C(e).position()[n]+"px":t):void 0})}),C.each({Height:"height",Width:"width"},function(r,s){C.each({padding:"inner"+r,content:s,"":"outer"+r},function(i,e){C.fn[e]=function(e,t){var n=arguments.length&&(i||"boolean"!=typeof e),o=i||(!0===e||!0===t?"margin":"border");return d(this,function(e,t,n){var i;return C.isWindow(e)?e.document.documentElement["client"+r]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+r],i["scroll"+r],e.body["offset"+r],i["offset"+r],i["client"+r])):void 0===n?C.css(e,t,o):C.style(e,t,n,o)},s,n?e:void 0,n,null)}})}),C.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),C.fn.andSelf=C.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return C});var It=x.jQuery,Pt=x.$;return C.noConflict=function(e){return x.$===C&&(x.$=Pt),e&&x.jQuery===C&&(x.jQuery=It),C},I||(x.jQuery=x.$=C),C}),(n=>{"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),n(t),t}:n(jQuery)})(function(u){function i(e,t){var n;if(!(this instanceof i))return(n=new i(e,t)).open(),n;this.id=i.id++,this.setup(e,t),this.chainCallbacks(i._callbackChain)}var o,r,s,n,a,l;void 0===u||u.fn.jquery.match(/-ajax/)?0 in window:(o=[],r=function(t){return o=u.grep(o,function(e){return e!==t&&0<e.$instance.closest("body").length})},s={allow:1,allowfullscreen:1,frameborder:1,height:1,longdesc:1,marginheight:1,marginwidth:1,mozallowfullscreen:1,name:1,referrerpolicy:1,sandbox:1,scrolling:1,src:1,srcdoc:1,style:1,webkitallowfullscreen:1,width:1},n={keyup:"onKeyUp",resize:"onResize"},i.prototype={constructor:i,namespace:"featherlight",targetAttr:"data-featherlight",variant:null,resetCss:!(l=function(e){var t;e!==i._globalHandlerInstalled&&(i._globalHandlerInstalled=e,t=u.map(n,function(e,t){return t+"."+i.prototype.namespace}).join(" "),u(window)[e?"on":"off"](t,a))}),background:null,openTrigger:"click",closeTrigger:"click",filter:null,root:"body",openSpeed:250,closeSpeed:250,closeOnClick:"background",closeOnEsc:!0,closeIcon:"&#10005;",loading:"",persist:!(a=function(e){u.each(i.opened().reverse(),function(){return e.isDefaultPrevented()||!1!==this[n[e.type]](e)?void 0:(e.preventDefault(),e.stopPropagation(),!1)})}),otherClose:null,beforeOpen:u.noop,beforeContent:u.noop,beforeClose:u.noop,afterOpen:u.noop,afterContent:u.noop,afterClose:u.noop,onKeyUp:u.noop,onResize:u.noop,type:null,contentFilters:["jquery","image","html","ajax","iframe","text"],setup:function(e,t){"object"!=typeof e||e instanceof u!=0||t||(t=e,e=void 0);var n=u.extend(this,t,{target:e}),t=n.resetCss?n.namespace+"-reset":n.namespace,e=u(n.background||['<div class="'+t+"-loading "+t+'">','<div class="'+t+'-content">','<button class="'+t+"-close-icon "+n.namespace+'-close" aria-label="Close">',n.closeIcon,"</button>",'<div class="'+n.namespace+'-inner">'+n.loading+"</div>","</div>","</div>"].join("")),i="."+n.namespace+"-close"+(n.otherClose?","+n.otherClose:"");return n.$instance=e.clone().addClass(n.variant),n.$instance.on(n.closeTrigger+"."+n.namespace,function(e){var t;!e.isDefaultPrevented()&&(t=u(e.target),"background"===n.closeOnClick&&t.is("."+n.namespace)||"anywhere"===n.closeOnClick||t.closest(i).length)&&(n.close(e),e.preventDefault())}),this},getContent:function(){if(!1!==this.persist&&this.$content)return this.$content;function e(e){return t.$currentTarget&&t.$currentTarget.attr(e)}var t=this,n=this.constructor.contentFilters,i=e(t.targetAttr),o=t.target||i||"",r=n[t.type];if(!r&&o in n&&(r=n[o],o=t.target&&i),o=o||e("href")||"",!r)for(var s in n)t[s]&&(r=n[s],o=t[s]);if(!r){var a=o,o=null;if(u.each(t.contentFilters,function(){return r=n[this],!(o=!(o=r.test?r.test(a):o)&&r.regex&&a.match&&a.match(r.regex)?a:o)}),!o)return 0 in window,!1}return r.process.call(t,o)},setContent:function(e){return this.$instance.removeClass(this.namespace+"-loading"),this.$instance.toggleClass(this.namespace+"-iframe",e.is("iframe")),this.$instance.find("."+this.namespace+"-inner").not(e).slice(1).remove().end().replaceWith(u.contains(this.$instance[0],e[0])?"":e),this.$content=e.addClass(this.namespace+"-inner"),this},open:function(t){var n=this;if(n.$instance.hide().appendTo(n.root),!(t&&t.isDefaultPrevented()||!1===n.beforeOpen(t))){t&&t.preventDefault();var e=n.getContent();if(e)return o.push(n),l(!0),n.$instance.fadeIn(n.openSpeed),n.beforeContent(t),u.when(e).always(function(e){e&&(n.setContent(e),n.afterContent(t))}).then(n.$instance.promise()).done(function(){n.afterOpen(t)})}return n.$instance.detach(),u.Deferred().reject().promise()},close:function(e){var t=this,n=u.Deferred();return!1===t.beforeClose(e)?n.reject():(0===r(t).length&&l(!1),t.$instance.fadeOut(t.closeSpeed,function(){t.$instance.detach(),t.afterClose(e),n.resolve()})),n.promise()},resize:function(e,t){var n;e&&t&&(this.$content.css("width","").css("height",""),1<(n=Math.max(e/(this.$content.parent().width()-1),t/(this.$content.parent().height()-1))))&&(n=t/Math.floor(t/n),this.$content.css("width",e/n+"px").css("height",t/n+"px"))},chainCallbacks:function(e){for(var t in e)this[t]=u.proxy(e[t],this,u.proxy(this[t],this))}},u.extend(i,{id:0,autoBind:"[data-featherlight]",defaults:i.prototype,contentFilters:{jquery:{regex:/^[#.]\w/,test:function(e){return e instanceof u&&e},process:function(e){return!1!==this.persist?u(e):u(e).clone(!0)}},image:{regex:/\.(png|jpg|jpeg|gif|tiff?|bmp|svg)(\?\S*)?$/i,process:function(e){var t=u.Deferred(),n=new Image,i=u('<img src="'+e+'" alt="" class="'+this.namespace+'-image" />');return n.onload=function(){i.naturalWidth=n.width,i.naturalHeight=n.height,t.resolve(i)},n.onerror=function(){t.reject(i)},n.src=e,t.promise()}},html:{regex:/^\s*<[\w!][^<]*>/,process:function(e){return u(e)}},ajax:{regex:/./,process:function(e){var n=u.Deferred(),i=u("<div></div>").load(e,function(e,t){"error"!==t&&n.resolve(i.contents()),n.reject()});return n.promise()}},iframe:{process:function(e){var t=new u.Deferred,n=u("<iframe/>"),i=((e,t)=>{var n,i={},o=new RegExp("^"+t+"([A-Z])(.*)");for(n in e){var r=n.match(o);r&&(i[(r[1]+r[2].replace(/([A-Z])/g,"-$1")).toLowerCase()]=e[n])}return i})(this,"iframe"),o=((e,t)=>{var n,i={};for(n in e)n in t&&(i[n]=e[n],delete e[n]);return i})(i,s);return n.hide().attr("src",e).attr(o).css(i).on("load",function(){t.resolve(n.show())}).appendTo(this.$instance.find("."+this.namespace+"-content")),t.promise()}},text:{process:function(e){return u("<div>",{text:e})}}},functionAttributes:["beforeOpen","afterOpen","beforeContent","afterContent","beforeClose","afterClose"],readElementConfig:function(e,t){var n=this,i=new RegExp("^data-"+t+"-(.*)"),o={};return e&&e.attributes&&u.each(e.attributes,function(){var e=this.name.match(i);if(e){var t=this.value,e=u.camelCase(e[1]);if(0<=u.inArray(e,n.functionAttributes))t=new Function(t);else try{t=JSON.parse(t)}catch(e){}o[e]=t}}),o},extend:function(e,t){function n(){this.constructor=e}return n.prototype=this.prototype,e.prototype=new n,e.__super__=this.prototype,u.extend(e,this,t),e.defaults=e.prototype,e},attach:function(o,r,s){var a=this;"object"!=typeof r||r instanceof u!=0||s||(s=r,r=void 0);function e(e){var t=u(e.currentTarget),n=u.extend({$source:o,$currentTarget:t},a.readElementConfig(o[0],c.namespace),a.readElementConfig(e.currentTarget,c.namespace),s),i=l||t.data("featherlight-persisted")||new a(r,n);"shared"===i.persist?l=i:!1!==i.persist&&t.data("featherlight-persisted",i),n.$currentTarget.blur&&n.$currentTarget.blur(),i.open(e)}var l,t=(s=u.extend({},s)).namespace||a.defaults.namespace,c=u.extend({},a.defaults,a.readElementConfig(o[0],t),s);return o.on(c.openTrigger+"."+c.namespace,c.filter,e),{filter:c.filter,handler:e}},current:function(){var e=this.opened();return e[e.length-1]||null},opened:function(){var t=this;return r(),u.grep(o,function(e){return e instanceof t})},close:function(e){var t=this.current();return t?t.close(e):void 0},_onReady:function(){var i,o=this;o.autoBind&&((i=u(o.autoBind)).each(function(){o.attach(u(this))}),u(document).on("click",o.autoBind,function(e){var t,n;e.isDefaultPrevented()||(t=u(e.currentTarget),i.length!==(i=i.add(t)).length&&(!(n=o.attach(t)).filter||0<u(e.target).parentsUntil(t,n.filter).length)&&n.handler(e))}))},_callbackChain:{onKeyUp:function(e,t){return 27===t.keyCode?(this.closeOnEsc&&u.featherlight.close(t),!1):e(t)},beforeOpen:function(e,t){return u(document.documentElement).addClass("with-featherlight"),this._previouslyActive=document.activeElement,this._$previouslyTabbable=u("a, input, select, textarea, iframe, button, iframe, [contentEditable=true]").not("[tabindex]").not(this.$instance.find("button")),this._$previouslyWithTabIndex=u("[tabindex]").not('[tabindex="-1"]'),this._previousWithTabIndices=this._$previouslyWithTabIndex.map(function(e,t){return u(t).attr("tabindex")}),this._$previouslyWithTabIndex.add(this._$previouslyTabbable).attr("tabindex",-1),document.activeElement.blur&&document.activeElement.blur(),e(t)},afterClose:function(e,t){var e=e(t),n=this;return this._$previouslyTabbable.removeAttr("tabindex"),this._$previouslyWithTabIndex.each(function(e,t){u(t).attr("tabindex",n._previousWithTabIndices[e])}),this._previouslyActive.focus(),0===i.opened().length&&u(document.documentElement).removeClass("with-featherlight"),e},onResize:function(e,t){return this.resize(this.$content.naturalWidth,this.$content.naturalHeight),e(t)},afterContent:function(e,t){e=e(t);return this.$instance.find("[autofocus]:not([disabled])").focus(),this.onResize(t),e}}}),u.featherlight=i,u.fn.featherlight=function(e,t){return i.attach(this,e,t),this},u(document).ready(function(){i._onReady()}))});var Config={paddingTop:44,paddingBottom:44,headerHeight:44,footerHeight:44,scenePaddingBottom:60,bannerHeight:50,sidebarWidth:50,sidebarWidth:210,crosshairWidth:100,panTimeThreshold:300,panPixelThreshold:2,loopLineWidth:4,nonogramsCellSize:15,shikakuSeparatorWidth:1,shikakuRectBorderWidth:2,shikakuClassicSeparatorWidth:3,shikakuClassicRectBorderWidth:3,bridgesSquare:18,bridgesSeparator:0,bridgesSize:2,mainContainerWidth:750,sideBannerWidth:170,wideSideBannerWidth:304,topMenuHeight:44};function numberWithCommas(e){return void 0===e?0:e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function sumSolved(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&(n+=e[t].nsolved);return numberWithCommas(n)}function sumStars(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&(n+=e[t].solvecons_5+e[t].solvecons_10+e[t].solvecons_20+e[t].solvecons_50+e[t].solvecons_100);return numberWithCommas(n)}function getPermalink4(e){$.post("/permalink.php",{size:Game.plSize,state:JSON.stringify(Game.getSaveState()),img:e}).done(function(e){var t="https://"+window.location.hostname+window.location.pathname+"?pl="+e,e="https://"+window.location.hostname+"/screenshots/"+e+".png",n=$("#shareLinkText").val(),i="https://"+window.location.hostname+window.location.pathname+"?e="+btoa(Game.plSize+":"+Game.getSetting("puzzleID")),o='<iframe width="'+(Game.getBoardWidth()+130)+'" height="'+(Game.getBoardHeight()+300)+'" src="'+i+'" frameborder="0" />';$("#shareLinkInput").val(t),$("#shareImgInput").val(e),$("#shareEmbedURLInput").val(i),$("#shareEmbedInput").val(o),$("#shareLinkFB").attr("href","https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(t)+"&quote="+encodeURIComponent(n)),$("#shareLinkTW").attr("href","https://twitter.com/intent/tweet?via=PuzzleTeamClub&text="+encodeURIComponent(n)+" "+encodeURIComponent(t)),$("#shareContainer").show(),$("#shareContainerElements").show(),$("#shareContainerLoader").hide()})}function getPermalink3(){html2canvas($("#puzzleContainer")[0]).then(function(e){getPermalink4(e.toDataURL("png"))})}function getPermalink2(){"undefined"==typeof html2canvas?$.cachedScript("/js/html2canvas-v1.0.0.min.js").done(function(e,t){getPermalink3()}):getPermalink3()}function getPermalink1(){"undefined"==typeof Promise?$.cachedScript("/js/es6-promise-4.1.1.auto.min.js").done(function(e,t){getPermalink2()}):getPermalink2()}jQuery.cachedScript=function(e,t){return t=$.extend(t||{},{dataType:"script",cache:!0,url:e}),jQuery.ajax(t)},$(document).ready(function(){$("#btnShare").click(function(e){e.preventDefault(),window.scrollBy(0,50),$("#shareContainer").show(),$("#shareContainerElements").hide(),$("#shareContainerLoader").show(),getPermalink1()})});var lgCounter=0;function lg(e){var t=document.getElementById("lg");t.innerHTML=++lgCounter+e+"<br>"+t.innerHTML}function hideGlobalNotifications(){$(".global-alert-info").removeClass("show").find(".message").html(""),$(".global-alert-success").removeClass("show").find(".message").html(""),$(".global-alert-error").removeClass("show").find(".message").html("")}function showError(e,t){hideGlobalNotifications();var n=$(".global-alert-error").addClass("show");n.find(".message").html(e),n.find(".js-box-close-global").toggle(!t)}function showSuccess(e,t){hideGlobalNotifications();var n=$(".global-alert-success").addClass("show");n.find(".message").html(e),n.find(".js-box-close-global").toggle(!t)}function showInfo(e,t){hideGlobalNotifications();var n=$(".global-alert-info").addClass("show");n.find(".message").html(e),n.find(".js-box-close-global").toggle(!t)}function createCookie(e,t,n,i){var o,r="",s="";n&&((o=new Date).setTime(o.getTime()+24*n*60*60*1e3),r="; expires="+o.toUTCString()),i&&(s="; domain=."+i),document.cookie=e+"="+t+r+s+"; path=/"}function readCookie(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null}function eraseCookie(e,t){createCookie(e,"",-1),createCookie(e,"",-1,t)}function init(){timer()}$(window).on("orientationchange resize",function(e){Layout.setOrientation()}),$(function(){$(document).on("click",".js-box-close",function(){$(this).parent().hide()}),$(".js-box-close-global").on("click",function(){hideGlobalNotifications()}),$.featherlight._callbackChain.beforeOpen=function(e){},$.featherlight._callbackChain.afterClose=function(e){}}),$.ajaxSetup({xhrFields:{withCredentials:!0},beforeSend:function(e){localStorage.getItem("api_token")?e.setRequestHeader("authorization",localStorage.getItem("api_token")):Get_Cookie("api_token")&&e.setRequestHeader("authorization",Get_Cookie("api_token"))}}),$(document).ajaxComplete(function(e,t,n){t.responseJSON&&(t.responseJSON.user&&User.load(t.responseJSON.user),MVVM)&&MVVM.apply()}),$.fn.panzoom=function(e){};var browserPrefixes=["moz","ms","o","webkit"],isVisible=!0;function getHiddenPropertyName(e){return e?e+"Hidden":"hidden"}function getVisibilityEvent(e){return(e||"")+"visibilitychange"}function getBrowserPrefix(){for(var e=0;e<browserPrefixes.length;e++)if(getHiddenPropertyName(browserPrefixes[e])in document)return browserPrefixes[e];return null}var browserPrefix=getBrowserPrefix(),hiddenPropertyName=getHiddenPropertyName(browserPrefix),visibilityEventName=getVisibilityEvent(browserPrefix);function onVisible(){isVisible||(isVisible=!0,"undefined"==typeof Game)||Settings.get("global.hide-timer")||Game.resumeTimer()}function onHidden(){isVisible&&(isVisible=!1,"undefined"==typeof Game||Settings.get("global.hide-timer")||Game.pauseTimer())}function handleVisibilityChange(e){return("boolean"==typeof e?e?onVisible:onHidden:document[hiddenPropertyName]?onHidden:onVisible)()}document.addEventListener(visibilityEventName,handleVisibilityChange,!1),document.addEventListener("focus",function(){handleVisibilityChange(!0)},!1),document.addEventListener("blur",function(){handleVisibilityChange(!1)},!1),window.addEventListener("focus",function(){handleVisibilityChange(!0)},!1),window.addEventListener("blur",function(){handleVisibilityChange(!1)},!1);var Layout={portrait:!0,setOrientation:function(){this.portrait=window.innerHeight>window.innerWidth,$("body").toggleClass("landscape",!this.portrait).toggleClass("portrait",this.portrait).toggleClass("lefthanded",Settings.get("global.left-handed")),setZoom(getZoom())},init:function(){this.setOrientation();var e=Get_Cookie("nightMode"),t=Settings.get("puzzleSettings.global.night-mode");!e&&t&&(switchNightMode(1),Settings.set("puzzleSettings.global.night-mode",1))},scrollTop:function(){return window.scrollY||(document.documentElement?document.documentElement.scrollTop:0)},scrollLeft:function(){return window.scrollX||(document.documentElement?document.documentElement.scrollLeft:0)},clientWidth:function(){return document.body.clientWidth},clientHeight:function(){return window.innerHeight},isSubscriber:function(){return $("body").hasClass("subscriber")},toggleHeader:function(){$("body").toggleClass("header-hidden"),window.gtag&&gtag("event","layout",{name:"Header",value:this.hiddenHeader()?"hide":"show"})},hiddenHeader:function(){return!0},getBottomBannerHeight:function(){return $("body").hasClass("subscriber")?0:50},getTopOffset:function(){return 0},getBottomOffset:function(){return 0},getLeftOffset:function(){return 0},getRightOffset:function(){return 0},isZenMode:function(){return!1},isNightMode:function(){return+Util.getCookie("nightMode")}};function filterPuzzles(e){var t=e.toLowerCase();$("#moreGamesLinks .banner").each(function(){var e=$(this);-1===e.text().toLowerCase().indexOf(t)?e.hide():e.show()})}window.onbeforeunload=function(){window.scrollTo(0,0)},$(window).on("resize",function(){decideAdSize()}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".banner").forEach(function(e){e.addEventListener("click",function(e){var t;User&&User.logged&&(e.preventDefault(),(e=document.createElement("form")).method="POST",e.action=this.href,(t=document.createElement("input")).type="hidden",t.name="api_token",t.value=User.api_token,e.appendChild(t),document.body.appendChild(e),e.submit())})})});var MVVM={apply:function(){$("[mvvm-text]").each(function(){var t=$(this);try{var val=eval(t.attr("mvvm-text"));t.text(void 0===val?"":val)}catch(e){t.text("")}}),$("[mvvm-show]").each(function(){var t=$(this),val=eval(t.attr("mvvm-show"));t.toggle(void 0!==val&&!!val)}),$("[mvvm-value]").each(function(){var t=$(this),val=eval(t.attr("mvvm-value"));t.val(void 0===val?"":val)}),$("[mvvm-checked]").each(function(){var t=$(this),val=eval(t.attr("mvvm-checked"));t.attr("checked",void 0!==val&&!!val)}),$("[mvvm-selected]").each(function(){try{var t=$(this),val=eval(t.attr("mvvm-selected"));t.val(val)}catch(e){}}),$("[mvvm-class]").each(function(){for(var t=$(this),attr=t.attr("mvvm-class").split("|"),i=0;i<attr.length;i++){var cls=attr[i].split(":");try{var val=eval(cls[1]);t.toggleClass(cls[0],void 0!==val&&!!val)}catch(e){t.toggleClass(cls[0],!1)}}}),$("[mvvm-css]").each(function(){for(var t=$(this),attr=t.attr("mvvm-css").split("|"),i=0;i<attr.length;i++){var css=attr[i].split(":");try{2<css.length&&(css[1]=css.splice(1).join(":"));var val=eval(css[1]);t.css(css[0],void 0===val?"auto":val)}catch(e){}}})}};function removeCheckpoint(e){Game.removeCheckpoint(e),updateCheckpoints(!0)}function updateCheckpoints(e,t){if($("#checkpointsHolder .checkpoints").html("&nbsp;"),Game.checkpoints&&Game.checkpoints.length)for(var n=0;n<Game.checkpoints.length;n++){var i=$('<div class="checkpoint '+(t==n+1||!t&&!e&&n==Game.checkpoints.length-1?"last":"")+'" onmousedown="if(event.which == 3) {removeCheckpoint('+n+");} else {Game.loadCheckpoint("+n+");updateCheckpoints(false, "+(n+1)+');}">'+(n+1)+'<div class="close icon-cancel" onmousedown="if ((event.which == 3) || confirm(labelAreYouSure)) {removeCheckpoint('+n+');}event.stopPropagation()"></div></div>');$("#checkpointsHolder .checkpoints").append(i)}}String.prototype.repeat||(String.prototype.repeat=function(e){if(null==this)throw new TypeError("can't convert "+this+" to object");var t=""+this;if((e=(e=+e)!=e?0:e)<0)throw new RangeError("repeat count must be non-negative");if(e==1/0)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0==t.length||0==e)return"";if(1<<28<=t.length*e)throw new RangeError("repeat count must not overflow maximum string size");for(var n="",i=0;i<e;i++)n+=t;return n}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(t=t||0,e.length)===e});var toggleColorSetting=0,User=($(function(){var i=!1,o={left:0,top:0,mouseX:0,mouseY:0};function t(){i=!1}$("#game").on("mousedown",function(e){if(1==e.button)return e=e,t=$("#puzzleContainerOverflowDiv"),i=!0,o.left=t.scrollLeft(),o.top=$(window).scrollTop(),o.mouseX=e.clientX,o.mouseY=e.clientY,!1;var t}),$("#game").on("mouseup",function(e){1==e.button&&t()}),$("#game").on("mouseleave",function(e){t()}),$("#game").on("mousemove",function(e){if(i)return e=e,t=$("#puzzleContainerOverflowDiv"),n=e.clientX-o.mouseX,e=e.clientY-o.mouseY,t.scrollLeft(o.left-n),$(window).scrollTop(o.top-e),!0;var t,n})}),$(document).ready(function(){"undefined"!=typeof Game&&($(document).on("keydown",function(e){if(13==e.which&&(e.preventDefault(),jQuery("#btnReady").focus().click()),187!=e.which&&61!=e.which||e.ctrlKey||e.shiftKey||(e.preventDefault(),jQuery("#btnNew").focus().click()),83==e.which&&e.ctrlKey&&(e.shiftKey?Game.addCheckpoint():Game.saveCheckpoint(),updateCheckpoints(),e.preventDefault(),Game.inputMode="mouse",Game.toggleClass("kbd",!1),Game.cancelMove()),$(e.target).is("input"))return!0;90==e.which&&(e.shiftKey?Game.redo():Game.undo(),e.preventDefault()),(89==e.which&&e.ctrlKey||88==e.which)&&(Game.redo(),e.preventDefault())}),$("#game").on("keydown",function(e){0}),$(document).on("keyup",function(e){0}),$("#game").on("keydown",function(e){var t;48<=e.which&&e.which<=57&&$(".footer-buttons-holder:visible").length&&(t=e.which-48,t=$("a[accesskey='"+t+"']"))&&t.click(),221==e.which&&$("#color-switch").length&&$(".footer-buttons-holder:visible").length&&("color"==Settings.get(Game.slug+".draw-style")?toggleColorSetting&&Settings.set(Game.slug+".draw-style",toggleColorSetting):(toggleColorSetting=Settings.get(Game.slug+".draw-style"),Settings.set(Game.slug+".draw-style","color")))}),$("#puzzleContainerOverflowDiv").on("scroll",function(){"keyboard"!=Game.inputMode&&(Game.cancelMove(),Game.comboHelperTimeout)&&window.clearTimeout(Game.comboHelperTimeout)}),$(document).on("scroll",function(){"keyboard"!=Game.inputMode&&(Game.cancelMove(),Game.comboHelperTimeout)&&window.clearTimeout(Game.comboHelperTimeout)}))}),$("#btnUndo, #btnRedo").bind("touchend",function(e){e.preventDefault(),$(this).click()}),window.history.replaceState&&window.history.replaceState(null,null,window.location.href),window.puzzle=function(c){this.maxColumnNumbers=0,this.maxRowNumbers=0,this.task=[],this.currentState={cellStatus:[],taskStatus:[],lastMove:{},index:0,solved:0},this.currentMove={cellStatus:0,startPoint:{row:0,col:0},endPoint:{row:0,col:0},cells:[]},this.states=[],this.dom={},this.panTimeThreshold=c.panTimeThreshold||Config.panTimeThreshold,this.zoomingPanning=!1,this.solved=!1,this.drawing=!1,this.mouseDown=!1,this.dragMonitor={decision:"unknown",timeStart:0,touchstartX:0,touchstartY:0},this.boardWidth=0,this.boardHeight=0,this.lastAppliedScale=1,this.accumulated=0,this.paused=0,this.forcePaused=0,this.lastTrackedTime=(new Date).getTime(),this.inputMode="mouse",this.checkpoints=[],this.chessCoordinates=!1,this.statesMap=["n","y","x"],this.serializers=["serializeBoardState"],this.unserializers=["loadState"],this.shiftPressed=0,this.getBoardWidth=function(){},this.getBoardHeight=function(){},this.getTransform=function(e){e=e.css("transform").match(/matrix\((.*)\)/);return e?e[1].split(","):[0,0,0,0,0,0]},this.getScale=function(){try{var e=this.css("transform").match(/matrix\((.*)\)/)[1].split(","),t=parseFloat(e[0]);parseFloat(this.css("zoom"));return t=t||1}catch(e){return 1}},this.decodeChar=function(e){return e.charCodeAt(0)-96},this.toChar=function(e){return parseInt(e).toString(20).toUpperCase()},this.colName=function(e){for(var t="a".charCodeAt(0),n="z".charCodeAt(0)-t+1,i="";0<=e;)i=String.fromCharCode(e%n+t)+i,e=Math.floor(e/n)-1;return i},this.decodeTaskFormat=function(e,t){for(var n=[],i=0,o=0;o<e.length;o++)if($.isNumeric(e[o])){for(var r="";$.isNumeric(e[o]);)r+=""+e[o],o++;o--,n[i]=t?this.toChar(r):parseInt(r),i++}else"_"!=e[o]&&(i+=this.decodeChar(e[o]));return n},this.inside=function(e,t){return 0<=e&&0<=t&&t<this.puzzleWidth&&e<this.puzzleHeight},this.rowFromIndex=function(e){return Math.floor(e/c.puzzleWidth)},this.colFromIndex=function(e){return e%c.puzzleWidth},this.rowColFromIndex=function(e){return{row:this.rowFromIndex(e),col:this.colFromIndex(e)}},this.cellIndex=function(e){return e.row*c.puzzleWidth+e.col},this.parseTask=function(){},this.setCellState=function(e,t){this.currentState.cellStatus[e.row][e.col]=t},this.applyCurrentMoveToState=function(){for(var e=this.currentMove.cells.length,t=0;t<e;t++){var n=this.currentMove.cells[t];this.setCellState(n,this.currentMove.cellStatus)}this.currentState.lastMove=Util.clone(this.currentMove),this.storeCurrentState()},this.resetCurrentMoveDraw=function(){for(var e=this.currentMove.cells.length,t=0;t<e;t++){var n=this.currentMove.cells[t];this.drawCellStatus(n,this.getCurrentStatus(n))}},this.drawMoveHelpers=function(){},this.hideMoveHelpers=function(){this.dom.helperNumberOfDrawnCells.hide()},this.drawCurrentMove=function(){for(var e=this.currentMove.cells.length,t=0;t<e;t++){var n=this.currentMove.cells[t];this.drawCellStatus(n,this.currentMove.cellStatus)}this.drawMoveHelpers()},this.initCurrentMove=function(){this.currentMove={cellStatus:0,startPoint:{row:0,col:0},endPoint:{row:0,col:0},cells:[]}},this.cancelMove=function(){this.resetCurrentMoveDraw(),this.initCurrentMove(),this.hideMoveHelpers()},this.getCurrentStatus=function(e){return this.currentState.cellStatus[e.row][e.col]},this.getNextStatus=function(e,t){e=this.getCurrentStatus(e);return"rotate"==Settings.get(this.slug+".draw-style")?(t?e--:e++,(e+3)%3):"white"==Settings.get(this.slug+".draw-style")?0:"black"==Settings.get(this.slug+".draw-style")?t?2==e?0:2:1==e?0:1:"cross"==Settings.get(this.slug+".draw-style")?t?1==e?0:1:2==e?0:2:e},this.helpers=function(){},this.startMove=function(e,t,n){this.initCurrentMove(),this.drawing=!0,this.currentMove.invert=void 0!==t&&t,this.currentMove.cellStatus=this.getNextStatus(e,t),this.currentMove.startPoint={row:e.row,col:e.col},this.currentMove.endPoint={row:e.row,col:e.col},this.currentMove.cells.push({row:e.row,col:e.col}),n&&this.drawCurrentMove()},this.performMove=function(e){},this.onEndMove=function(){},this.endMove=function(){this.zoomingPanning||(this.applyCurrentMoveToState(),this.drawCurrentMove(),this.onEndMove(),this.drawHelperHighlightMove(this.currentMove),this.helpers(),this.hideMoveHelpers(),this.checkFinished()),this.drawing=!1},this.getNumberOfDrawnCells=function(){return"implement me"},this.showHelperNumberOfDrawnCells=function(e,t,n,i,o){i=i||this.dom.helperNumberOfDrawnCells.width(),o=o||this.dom.helperNumberOfDrawnCells.height();var r,s,a=document.documentElement.clientWidth/window.innerWidth,t=(a<1&&(a=1),c.relativeTo&&(r=$(c.relativeTo).offset(),e+=Layout.scrollLeft()-r.left,t-=r.top),t-100/a-o/a+(Layout.hiddenHeader()?Config.headerHeight/a:0)),o=0,l=0;s<50&&(o=17),c.relativeTo&&(o=-r.top,l=-r.left),Settings.get("global.left-handed")?(s=e+i/a,r=Layout.clientWidth(),Layout.portrait||(r-=Config.sidebarWidth),c.relativeTo||r<s+i+5&&(s=r-i-5)):(s=e-i/a-15/a)<l&&(s=l),c.relativeTo?(t+=Layout.scrollTop())<Layout.scrollTop()+o&&(t=Layout.scrollTop()+o):t<Layout.getTopOffset()&&(t=Layout.getTopOffset()),this.dom.helperNumberOfDrawnCells.show().css({top:t+"px",left:s+"px"}).html(n),a!=this.lastAppliedScale&&(1!=a?this.dom.helperNumberOfDrawnCells.css({transform:"scale("+1/a+")"}):this.dom.helperNumberOfDrawnCells.css({transform:"none"}),this.lastAppliedScale=a)},this.drawHelperNumberOfDrawnCells=function(e,t){var n;this.currentMove.cellStatus&&(n=this.getNumberOfDrawnCells())&&this.showHelperNumberOfDrawnCells(e,t,n)},this.initNumberOfDrawnCellsHelper=function(){0==$(".helper-nodc").length&&(this.dom.helperNumberOfDrawnCells=$('<div class="helper-nodc">').css({position:"absolute",top:"100px",left:"100px","z-index":"1000"}),c.relativeTo?$(c.relativeTo).after(this.dom.helperNumberOfDrawnCells):$("#scene").append(this.dom.helperNumberOfDrawnCells))},this.highlightCell=function(e,t){this.dom.cells[e.row][e.col].addClass(t)},this.drawHelperHighlightMove=function(e){if(Settings.get(this.slug+".highlight-change")&&($(".cell-active").removeClass("cell-active"),e.cells))for(var t=0;t<e.cells.length;t++)this.highlightCell(e.cells[t],"cell-active")},this.initCrosshairHelper=function(){0==$(".helper-crosshair").length&&(this.dom.helperCrosshair=$('<div class="helper-crosshair"><i class="icon icon-cursor"></i><i class="icon icon-move"></i><div class="crosshair-btn"></div></div>'),$("#scene").append(this.dom.helperCrosshair)),Settings.get(this.slug+".show-crosshair")?(this.dom.helperCrosshair.show(),this.fitCrosshair()):this.dom.helperCrosshair.hide()},this.drawCellStatus=function(e,t){},this.drawCurrentState=function(){},this.draw=function(){},this.getFitMatrix=function(e){var t=1,n=(Settings.get(this.slug+".saved-scale")&&(t=Settings.get(this.slug+".saved-scale")),this.parent()[0].getBoundingClientRect()),i=n.height-Config.headerHeight-Config.scenePaddingBottom-Layout.getBottomBannerHeight()-30,o=n.width,r=(Layout.portrait?i-=Config.footerHeight:o-=Config.sidebarWidth,this.boardWidth),s=this.boardHeight,e=(e||(t=o<r*t||i<s*t?Math.min(o/r,i/s):t)<c.minScale&&(t=c.minScale),(o-this.boardWidth)/2),r=(t-1)*this.boardHeight/2+(Config.headerHeight-Config.paddingTop);return r+=Layout.portrait?100:75,"matrix("+t+", 0, 0, "+t+", "+e+", "+Math.max((n.height-(Layout.portrait?Config.footerHeight:0))/2-s/2+Config.headerHeight/2-20,r)+")"},this.fitCrosshair=function(){var e="matrix(1, 0, 0, 1, "+(Layout.clientWidth()-Config.crosshairWidth)/2+", 200 )";this.dom.helperCrosshair.panzoom("option",{startTransform:e})},this.fit=function(e){e=this.getFitMatrix(e);this.panzoom("option",{startTransform:e}),this.panzoom("reset"),this.panzoomAction(),this.fitCrosshair()},this.repositionHelpers=function(){},this.getCrosshairTarget=function(){var e=this.getTransform(this.dom.helperCrosshair),t=+e[4]-1,e=(Settings.get("global.left-handed")&&(t=+e[4]+ +Config.crosshairWidth+1),e[5]-1),n=$(document.elementFromPoint(t,e));return(n=n.length&&n.hasClass("selectable")?n:this.findNearestCell(t,e,"selectable")).chLeft=t,n.chTop=e,n},this.highlightCrosshairCell=function(e){$(".cell-crosshair").removeClass("cell-crosshair"),e.length&&e.addClass("cell-crosshair")},this.eventsCrosshairMove=function(e){},this.crosshairPan=function(){var e=this.getCrosshairTarget();this.highlightCrosshairCell(e),e.length&&this.eventsCrosshairMove(e)},this.stateChangedBoard=function(){},this.stateChangedTask=function(){},this.stateChanged=function(){return-1==this.currentState.index||!!this.stateChangedBoard()||!!this.stateChangedTask()},this.initState=function(){},this.resetState=function(){this.initState(),this.redraw()},this.loadState=function(e){},this.setState=function(e){this.loadState({board:e}),this.drawCurrentState(),this.check()},this.restoreCurrentState=function(){this.currentState=Util.clone(this.states[this.currentState.index]),this.drawCurrentState()},this.storeCurrentState=function(e){this.stateChanged()&&(e||this.currentState.index++,this.states[this.currentState.index]=Util.clone(this.currentState),this.states.splice(this.currentState.index+1),this.saveState())},this.undo=function(){var e,t;this.currentState.index&&(e=Util.clone(this.states[this.currentState.index].currentCell),t=Util.clone(this.states[this.currentState.index].currentSelection),this.drawing=!1,this.currentState=Util.clone(this.states[this.currentState.index-1]),this.currentState.currentCell=e,void 0!==t&&(this.currentState.currentSelection=t),this.cancelMove(),this.drawCurrentState(),this.saveState(!0))},this.redo=function(){this.states.length>this.currentState.index+1&&(this.drawing=!1,this.currentState=Util.clone(this.states[this.currentState.index+1]),this.cancelMove(),this.drawCurrentState(),this.saveState(!0))},this.addCheckpoint=function(){if(this.checkpoints||(this.checkpoints=[]),9<this.checkpoints.length)return!1;this.checkpoints.push({ss:this.serializeStateCompressed(),index:this.currentState.index}),this.saveState(!0)},this.saveCheckpoint=function(){this.checkpoints||(this.checkpoints=[]),this.removeCheckpoint(this.checkpoints.length-1),this.addCheckpoint()},this.removeCheckpoint=function(e){this.checkpoints.splice(e,1),this.saveState(!0)},this.loadCheckpoint=function(e){var t,n=this.checkpoints[e];void 0!==this.states[n.index]&&n.ss==this.serializeStateCompressed(this.states[n.index])?(this.unserializeStateCompressed(n.ss),this.currentState.index=n.index):(t=this.states.length,this.unserializeStateCompressed(n.ss),this.currentState.index=t,this.checkpoints[e].index=t,this.states[this.currentState.index]=Util.clone(this.currentState)),this.cancelMove(),this.drawCurrentState(),this.saveState(!0)},this.panzoomAction=function(){this.zoomingPanning=!0,Settings.set(this.slug+".saved-scale",this.getScale()),this.cancelMove(),this.repositionHelpers()},this.redraw=function(){this.draw()},this.isCorner=function(e,t,n){return t=t||c.squareSize,n=n||33,void 0!==e.offsetX&&(e.offsetX+e.offsetY<=(n=t*n/100)||e.offsetX+t-e.offsetY<=n||t-e.offsetX+e.offsetY<=n||t-e.offsetX+t-e.offsetY<=n)},this.findNearestCell=function(e,t,n){for(var i=this.getScale()*c.separatorWidth,o=(n=n||"cell",!1),r=-i;r<=i;r+=i)for(var s=-i;s<=i;s+=i){var a=$(document.elementFromPoint(e+r,t+s));if(a.hasClass(n)){if(!r||!s||o)return a;o=a}}return o},this.getChangedTouch=function(e){return"touchstart"==e.type||"touchmove"==e.type?e.originalEvent.changedTouches[0]:e.originalEvent},this.getOffset=function(e){var t,n,i=this.getChangedTouch(e);return e="touchstart"==e.type||"touchmove"==e.type?(e=e.target.getBoundingClientRect(),t=this.getScale(),n=(i.pageX-e.left-Layout.scrollLeft())/t,(i.pageY-e.top-Layout.scrollTop())/t):(n=i.offsetX,i.offsetY),{offsetX:n,offsetY:e}},this.handleTouchStart=function(e){},this.eventsTouchStart=function(e){if("touchstart"==e.type){$this.panzoom("option",{which:2});var t=e.originalEvent.changedTouches[0];if(1<(e.touches||e.originalEvent.touches).length||Settings.get($this.slug+".show-crosshair"))$this.dragMonitor.decision="panzoom",$this.cancelMove();else{if("draw"==Settings.get($this.slug+".touch-mode"))$this.dragMonitor.decision="draw";else{if("move"==Settings.get($this.slug+".touch-mode"))return!($this.dragMonitor.decision="panzoom");$this.dragMonitor.timeStart=(new Date).getTime(),$this.dragMonitor.touchstartX=t.clientX,$this.dragMonitor.touchstartY=t.clientY}$this.handleTouchStart(e)}}else{if("move"==Settings.get($this.slug+".touch-mode"))return!($this.dragMonitor.decision="panzoom");$this.handleTouchStart(e)}},this.eventsTouchMove=function(e){},this.eventsTouchEnd=function(e){},this.eventsClick=function(e){},this.eventsMove=function(e){},this.onMouseWheel=function(e){e.originalEvent||(e.originalEvent=e),$("body").hasClass("has-dialog-active")||c.relativeTo||(e.preventDefault(),0<parseInt(e.originalEvent.wheelDelta||-e.originalEvent.detail)/120?$this.panzoom("zoom",1.1*$this.getScale()):$this.panzoom("zoom",$this.getScale()/1.1))},this.setPixelRatioZoom=function(){},this.initEventHandlers=function(){var e;$this.setPixelRatioZoom(),$this.lastResizeEvent="",$this.lastResizeEvent1="",$(window).on("orientationchange.puzzle resize.puzzle",function(e){"orientationchange"!=e.type&&Util.isTouchDevice()||window.setTimeout(function(){$this.fit(!0),$this.panzoomAction(),$this.setPixelRatioZoom()},200),$this.lastResizeEvent1=$this.lastResizeEvent,$this.lastResizeEvent=e.type}).on("scroll.puzzle",function(){$this.panzoomAction()}).on("DOMMouseScroll.puzzle MozMousePixelScroll.puzzle",this.onMouseWheel),document.addEventListener("mousewheel",this.onMouseWheel,{passive:!1}),$this.fit(),$this.panzoomAction(),$this.on("mousedown.puzzle touchstart.puzzle",function(e){c.readonly||($this.mouseDown=!0,$this.zoomingPanning=!1,$this.eventsTouchStart(e))}),$this.on("dragstart.puzzle",function(e){e.preventDefault()}),$this.attr("unselectable","on").on("selectstart.puzzle",!1),$(document).on("mouseup.puzzle touchend.puzzle",function(e){$this.eventsClick(e)}),$(document).on("mouseup.puzzle touchend.puzzle",function(e){$this.mouseDown&&(e.preventDefault(),"panzoom"!=$this.dragMonitor.decision&&"markTask"!=$this.dragMonitor.decision&&$this.endMove(),$this.mouseDown=!1,$this.dragMonitor={decision:"unknown",timeStart:0,touchstartX:0,touchstartY:0}),$this.eventsTouchEnd(e)}),$this.on("touchmove.puzzle mousemove.puzzle pointerrawupdate.puzzle",function(e){var t,n;Util.isTouchDevice()&&"pointerrawupdate"==e.type||($this.mouseDown?(n=$this.getChangedTouch(e),t="touchmove"==e.type?e.touches||e.originalEvent.touches:[n],"unknown"==$this.dragMonitor.decision&&1==t.length&&(t=(new Date).getTime()-$this.dragMonitor.timeStart,n=Math.sqrt(($this.dragMonitor.touchstartX-n.clientX)*($this.dragMonitor.touchstartX-n.clientX)+($this.dragMonitor.touchstartY-n.clientY)*($this.dragMonitor.touchstartY-n.clientY)),t<$this.panTimeThreshold&&n>Config.panPixelThreshold?$this.dragMonitor.decision="panzoom":t>$this.panTimeThreshold&&n<Config.panPixelThreshold&&($this.dragMonitor.decision="draw")),"panzoom"!=$this.dragMonitor.decision&&e.stopPropagation(),"draw"==$this.dragMonitor.decision&&(e.preventDefault(),$this.eventsTouchMove(e))):$this.eventsMove(e))}),$this.on("keydown.puzzle",function(e){"Shift"===e.key&&($this.shiftPressed=1)}),$this.on("keyup.puzzle",function(e){"Shift"===e.key&&($this.shiftPressed=0)}),$this.dom.helperCrosshair.on("mousedown.puzzle touchstart.puzzle",function(e){e.preventDefault()}).contextmenu(function(){return!1}),$(".crosshair-btn").on("mousedown.puzzle touchstart.puzzle",function(e){var t;c.readonly||(e.preventDefault(),(t=$this.getCrosshairTarget()).length&&($this.mouseDown=!0,$this.zoomingPanning=!1,$this.eventsCrosshairMouseDown(e,t)))}).on("mouseup.puzzle touchend.puzzle",function(e){e.preventDefault(),$this.endMove(),$this.mouseDown=!1,$this.dragMonitor={decision:"unknown",timeStart:0,touchstartX:0,touchstartY:0}}),c.readonly||($this.timerInterval=window.setInterval((e=$this,function(){e.loaded&&e.tickTimer()}),500),$this.tickTimer())},this.removeEventHandlers=function(){$this.off(".puzzle"),$(document).off(".puzzle"),$(window).off(".puzzle"),$this.dom.helperCrosshair.off(".puzzle"),$(".crosshair-btn").off(".puzzle"),document.removeEventListener("mousewheel",$this.onMouseWheel),$this.timerInterval&&(clearInterval($this.timerInterval),$this.timerInterval=null)},this.destroy=function(){$(".helper-nodc").remove(),$(".helper-crosshair").remove(),this.removeEventHandlers()},this.storeTimer=function(){if(!c.readonly)try{localStorage.setItem("timer-"+this.getSaveIdent(),this.accumulated)}catch(e){}},this.getTimer=function(){try{return+localStorage.getItem("timer-"+this.getSaveIdent())}catch(e){return 0}},this.tickTimer=function(){var e;c.readonly||this.paused||(e=(new Date).getTime(),this.accumulated=this.getTimer(),this.accumulated+=e-this.lastTrackedTime,this.lastTrackedTime=e,this.storeTimer())},this.pauseTimer=function(e){c.readonly||this.paused||(this.tickTimer(),this.paused=1,e&&(this.forcePaused=1),Settings.get("global.non-competitive-timer")&&$("body").addClass("paused"))},this.resumeTimer=function(e){c.readonly||!this.paused||this.forcePaused&&!e||(this.lastTrackedTime=(new Date).getTime(),this.forcePaused=0,this.paused=0,$("body").removeClass("paused"))},this.resetTimer=function(){c.readonly||(this.accumulated=0,this.lastTrackedTime=(new Date).getTime(),this.storeTimer())},this.loadGame=function(e){(c=$.extend(c,e)).hashedSolution=e.hashedSolution,c.tutorial&&(c.puzzleHeight&&(this.puzzleHeight=c.puzzleHeight),c.puzzleWidth)&&(this.puzzleWidth=c.puzzleWidth),this.parseTask(),this.initState(),this.initCurrentMove(),c.state&&this.loadState(c.state),this.currentState.solved=!!c.solved,this.solved=this.currentState.solved,this.currentState.solvedTime=this.currentState.solved?c.solvedTime:0,c.serializedState?(this.unserializeStateCompressed(c.serializedState),this.currentState.index=-1,this.checkpoints=c.checkpoints,this.storeCurrentState()):c.savedState&&(this.currentState=c.savedState,this.currentState.index=-1,this.checkpoints=c.checkpoints,this.storeCurrentState()),this.saveState(),this.redraw(),c.onLoaded&&c.onLoaded(this,e)},this.cleanForNew=function(){this.currentState.solved=!1,this.solved=!1,c.solved=!1,c.savedState=!1,c.serializedState="",c.checkpoints=[]},this.loadNew=function(e){var t;return!(c.onBeforeLoadNew&&!c.onBeforeLoadNew()||(t="",this.currentState.solved&&(t="?fromSolved"),e&&(t="?resume"),$.ajax(c.baseUrl+"/get"+t).done(function(e){$this.cleanForNew(),$this.loadGame(e),$this.fit(),c.onLoadNew&&c.onLoadNew()}),0))},this.loadColorState=function(e){for(var t=0,n=0;t<this.puzzleHeight;t++)for(var i=0;i<this.puzzleWidth;i++,n++)this.currentState.cellColor[t][i]=parseInt(e&&e[n]?e[n]:0)},this.loadTaskState=function(e){e=e?e.split(","):[];this.currentState.taskStatus=[],e.forEach(function(e){this.currentState.taskStatus[e]=!0},this)},this.loadPencilState=function(e){e&&e.split(";").forEach(function(e){e=e.split("#");this.currentState.cellStatus[e[0]][e[1]].pencil=!0,this.currentState.cellStatus[e[0]][e[1]].pencilNumbers=e[2].split(",").map(function(e){return parseInt(e)})},this)},this.serializeStateCompressed=function(e){e=e||this.currentState;e=this.serializeState(e);return LZString.compressToBase64(e)},this.serializeState=function(t){t=t||this.currentState;var n=[];return this.serializers.forEach(function(e){n.push(this[e](t))},this),n.join("|")},this.serializeCellState=function(e){return this.statesMap[e]},this.serializeBoardState=function(e){e=e||this.currentState;for(var t="",n=0;n<this.puzzleHeight;n++)for(var i=0;i<this.puzzleWidth;i++)t+=this.serializeCellState(e.cellStatus[n][i]);return t},this.serializeColorState=function(e){e=e||this.currentState;for(var t=!1,n="",i=0;i<this.puzzleHeight;i++)for(var o=0;o<this.puzzleWidth;o++)n+=e.cellColor[i][o],e.cellColor[i][o]&&(t=!0);return t?n:""},this.serializeTaskState=function(e){e=e||this.currentState;var n=[];return e.taskStatus.forEach(function(e,t){e&&n.push(t)}),n.length?n.join(","):""},this.serializePencilState=function(e){e=e||this.currentState;for(var t=0,n=[];t<this.puzzleWH;t++)for(var i=0;i<this.puzzleWH;i++)e.cellStatus[t][i].pencil&&e.cellStatus[t][i].pencilNumbers.length&&n.push(t+"#"+i+"#"+e.cellStatus[t][i].pencilNumbers.join(","));return n.join(";")},this.unserializeStateCompressed=function(e){e=LZString.decompressFromBase64(e);this.unserializeState(e)},this.unserializeState=function(e){e&&e.split("|").forEach(function(e,t){"loadState"==this.unserializers[t]?this[this.unserializers[t]]({board:e}):this[this.unserializers[t]](e)},this)},this.serializeSolution=function(){},this.getBaseSaveIdent=function(){return this.slug+".save."+c.ident},this.getSaveIdent=function(){var e="";return c.special&&(e="."+c.specialDate),this.getBaseSaveIdent()+e},this.getZoomSettingName=function(){return this.getSaveIdent().replace(".race","").replace(/\.\d{4}-\d{2}-\d{2}/g,"")+".saved-zoom"},this.getSaved=function(){return Settings.get(this.getSaveIdent())},this.setSetting=function(e,t){c[e]=t},this.getSetting=function(e){return c[e]},this.getSaveState=function(){return{task:c.task,check:c.check,token:c.token,puzzleID:c.puzzleID,localTimer:c.localTimer,serializedState:this.serializeStateCompressed(),solved:this.currentState.solved,solvedTime:this.currentState.solvedTime,checkpoints:this.checkpoints,hashedSolution:c.hashedSolution}},this.stateModified=function(){return this.currentState.index},this.saveState=function(e){!this.stateModified()&&c.relativeTo&&void 0===e||(e=this.getSaveState(),Settings.set(this.getSaveIdent(),e,!0))},this.getErrors=function(e){return!0},this.check=async function(t){c.noCheck?c.hashedSolution&&this.getHashedSolution()==c.hashedSolution&&c.onSolutionSuccess&&c.onSolutionSuccess({}):this.solved||(""!=c.solution?(!c.checkState&&c.solution==this.serializeSolution()||c.solution==this.serializeBoardState())&&c.onSolutionSuccess&&c.onSolutionSuccess({}):c.checkOffline?this.getErrors(!0)||c.onSolutionSuccess&&c.onSolutionSuccess({}):await $.post(c.baseUrl,{token:c.token,solution:this.serializeSolution()}).done(function(e){e.status?(!$this.currentState.solved&&c.onSolutionSuccess&&c.onSolutionSuccess(e),$this.solved=!0,$this.currentState.solved=!0,$this.saveState()):t&&void 0!==t||c.onSolutionError&&c.onSolutionError(e)}))},this.giveUp=function(){$.post(c.baseUrl+"/giveUp",{token:c.token}).done(function(e){e.status?($this.solved=!0,$this.currentState.solved=!0,$this.readonly=!0,$this.saveState(),Settings.remove($this.getSaveIdent()),$this.setState(e.solution),c.onSolutionSuccess&&c.onSolutionSuccess(e)):c.onSolutionError&&c.onSolutionError(e)})},this.getMarkedCount=function(){},this.getHashedSolution=function(){return md5(c.task+this.serializeSolution())},this.checkFinished=function(){this.solved||this.currentState.solved||!this.loaded||(!this.blacks&&c.checkOffline||!c.noCheck&&(0<this.blacks||c.checkState)&&this.getMarkedCount()==this.blacks||c.hashedSolution&&this.getHashedSolution()==c.hashedSolution)&&(this.check(!0),c.hashedSolution)&&this.getHashedSolution()==c.hashedSolution&&(this.solved=!0)},this.escapeRegExp=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},this.getFitZoom=function(){return 1},this.initGame=function(){(window.$this=this).parseTask(),this.initState(),this.draw();var e=this.getFitMatrix();try{if(c.special&&!this.specialsHandled){var t=new RegExp(this.escapeRegExp(this.getBaseSaveIdent())+"\\.(\\d{4}-\\d{2}-\\d{2})$");for(k in localStorage)(found=k.match(t))&&new Date(found[1])<new Date(c.lastValidSpecial)&&localStorage.removeItem(k);this.specialsHandled=1}}catch(e){}return this.panzoom({onPan:function(){$this.panzoomAction()},onZoom:function(){$this.panzoomAction()},duration:0,cursor:"default",which:!Util.isTouchDevice()&&"move"==Settings.get(this.slug+".touch-mode")||Settings.get(this.slug+".show-crosshair")?1:2,minScale:c.minScale||.25,maxScale:8,contain:"dontLeaveMiddle",animate:!1,startTransform:e}),this.dom.helperCrosshair.panzoom({onPan:function(){$this.crosshairPan()},disableZoom:!0,propagate:!0,which:1}),this}},{logged:0,patron:0,email:"",nick:"",xp:0,init:function(){this.logged=0,this.patron=0,this.email="",this.nick="",this.xp=0,MVVM.apply()},loadFromStorage:function(){var e;(null!=readCookie("api_token")||localStorage.getItem("api_token"))&&(e=JSON.parse(localStorage.getItem("User")))&&this.load(e)},store:function(){try{localStorage.setItem("User",JSON.stringify(this))}catch(e){}},load:function(e){for(k in this.logged=1,this.achievements||(this.achievements=[]),e)this[k]=e[k];if(this.store(),$("#user-logged-badge .progress").animate({width:e.levelXP/e.totalLevelXP*100+"%"},1e3),"undefined"!=typeof puzzleSlug&&($(".quest-"+puzzleSlug).each(function(){$(this).find(".quest-tier").text("1"),$(this).find(".progress").css({width:"0%"})}),e.achievements)&&e.achievements[puzzleSlug]){var t=e.achievements[puzzleSlug];for(size in t)$(".quest-"+puzzleSlug+"-"+size).each(function(){var e=100;puzzleSlug+"-"+size=="skyscrapers-4x4-easy"&&(e=3),t[size].level>e?($(this).find(".quest-tier").html("&check;"),$(this).find(".quest-tier-badge").css({color:"#66ff66"}),$(this).find(".progress").animate({width:"100%"})):($(this).find(".quest-tier").text(t[size].level),$(this).find(".progress").animate({width:t[size].progress+"%"}))})}MVVM.apply()},loadFromAjax:function(n){var i=this;mobile_host="undefined"==typeof mobile_host?"www.puzzles-mobile.com":mobile_host,$.ajax({url:"https://"+mobile_host+"/api/profile",xhrFields:{withCredentials:!0},crossDomain:!0,success:function(e){createCookie("api_token",e.api_token,365,base_domain),localStorage.setItem("api_token",e.api_token);var t=i.patron?1:0;i.load(e);try{window.top.location.href;t!=e.patron&&window.location.reload()}catch(e){}n||$.featherlight.close()},error:function(e){i.reset(),n&&$.featherlight.close()}})},showLogin:function(){return this.init(),$.featherlight.close(),$.featherlight("/partials/form.login.php",{}),!1},reset:function(){localStorage.removeItem("api_token"),eraseCookie("api_token",base_domain),this.logged=0,this.patron=0,this.email="",this.achievements={},this.nick="",this.xp=0,this.api_token="",this.store(),MVVM.apply()},logout:function(){var t=this;mobile_host="undefined"==typeof mobile_host?"www.puzzles-mobile.com":mobile_host,$.ajax({url:"https://"+mobile_host+"/api/logout",xhrFields:{withCredentials:!0}}).done(function(e){$.featherlight.close(),t.reset(),localStorage.removeItem("api_token"),eraseCookie("api_token",base_domain)})},update:function(e){mobile_host="undefined"==typeof mobile_host?"www.puzzles-mobile.com":mobile_host,$.post("https://"+mobile_host+"/api/profile",e).done(function(e){$(".js-registration-success").show()}).fail(function(e){e=e.responseJSON?$.map(e.responseJSON,function(e){return e}).join("<br>"):e.responseText,$(".js-login-error").show().html(e)}).always(function(){$("button .animate-spin").hide(),$("puzzle-button .animate-spin").hide()})},getSubscriptions:function(t){mobile_host="undefined"==typeof mobile_host?"www.puzzles-mobile.com":mobile_host,$.ajax("https://"+mobile_host+"/api/subscriptions").done(function(e){t(e)})},cancelSubscription:function(e,t){mobile_host="undefined"==typeof mobile_host?"www.puzzles-mobile.com":mobile_host,$.post("https://"+mobile_host+"/api/cancelSubscription",{subscriptionId:e}).done(function(e){t(e)}).fail(function(e){})}});function loadUser(){User.loadFromAjax()}function showXPTeaser(e){$("#effect-xp").text("+"+e),$("#effect-xp").removeClass("animate"),setTimeout(function(){$("#effect-xp").addClass("animate")},10)}function checkLogin(){return!!User.logged||($.featherlight("/partials/form.login.php",{}),!1)}function tryLogged(){readCookie("api_token")}window.addEventListener("message",function(e){(e.origin.startsWith("https://www.puzzles-mobile.com")||e.origin.startsWith("https://dev.puzzles-mobile.com"))&&"loadUser"==e.data&&loadUser()}),$(".favorite").on("click",function(){var n,i=this.dataset.slug;-1!=User.arrFavorites.indexOf(i)?(n=$(this),$.post("/api/favorite",{removeFavorite:i}).done(function(e){n.closest("li").insertBefore($("#firstTextLi")).find(".favorite").removeClass("on");var t=User.arrFavorites.indexOf(i);-1!==t&&User.arrFavorites.splice(t,1)})):(n=$(this),$.post("/api/favorite",{addFavorite:i}).done(function(e){n.closest("li").prependTo(n.closest("ul")).find(".favorite").addClass("on"),User.arrFavorites.push(i)}))}),$(document).ajaxStart(function(){$("#user-cert").addClass("animate-spin")}),$(document).ajaxStop(function(){$("#user-cert").removeClass("animate-spin")}),$(document).ready(function(){var e=localStorage.getItem("api_token"),t=Get_Cookie("api_token");e&&!t&&createCookie("api_token",e,365,base_domain),!e&&t&&localStorage.setItem("api_token",t),!e&&!t||(e=JSON.parse(localStorage.getItem("User")))&&e.logged||User.loadFromAjax()});var Util={clone:function(e){return $.extend(!0,{},e)},isTouchDevice:function(){return"ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints}},CMPInited=!1;try{(()=>{if(("undefined"==typeof noAds||!noAds)&&"sovrn"!=ad_manager&&"snigel"!=ad_manager&&"playwire"!=ad_manager){window.top.location.hostname.replace(/^.{1,4}\./,"").replace(/\.test$/,"");var e=document.createElement("script"),t=document.getElementsByTagName("script")[0],n="https://cmp.inmobi.com".concat("/choice/","vptV-UyUkzTeZ","/","www.puzzle-combined.com","/choice.js?tag_version=V3"),i=0;e.async=!0,e.type="text/javascript",e.src=n,t.parentNode.insertBefore(e,t);for(var o,r="__tcfapiLocator",s=[],a=window;a;){try{if(a.frames[r]){o=a;break}}catch(e){}if(a===window.top)break;a=a.parent}o||(!function e(){var t,n=a.document,i=!!a.frames[r];return i||(n.body?((t=n.createElement("iframe")).style.cssText="display:none",t.name=r,n.body.appendChild(t)):setTimeout(e,5)),!i}(),a.__tcfapi=function(){var e,t=arguments;if(!t.length)return s;"setGdprApplies"===t[0]?3<t.length&&2===t[2]&&"boolean"==typeof t[3]&&(e=t[3],"function"==typeof t[2])&&t[2]("set",!0):"ping"===t[0]?"function"==typeof t[2]&&t[2]({gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"}):("init"===t[0]&&"object"==typeof t[3]&&(t[3]=Object.assign(t[3],{tag_version:"V3"})),s.push(t))},a.addEventListener("message",function(n){var i="string"==typeof n.data,e={};try{e=i?JSON.parse(n.data):n.data}catch(e){}var o=e.__tcfapiCall;o&&window.__tcfapi(o.command,o.version,function(e,t){e={__tcfapiReturn:{returnValue:e,success:t,callId:o.callId}};i&&(e=JSON.stringify(e)),n&&n.source&&n.source.postMessage&&n.source.postMessage(e,"*")},o.parameter)},!1));{let a=["2:tcfeuv2","6:uspv1","7:usnatv1","8:usca","9:usvav1","10:uscov1","11:usutv1","12:usctv1"];window.__gpp_addFrame=function(e){var t;window.frames[e]||(document.body?((t=document.createElement("iframe")).style.cssText="display:none",t.name=e,document.body.appendChild(t)):window.setTimeout(window.__gpp_addFrame,10,e))},window.__gpp_stub=function(){var e=arguments;if(__gpp.queue=__gpp.queue||[],__gpp.events=__gpp.events||[],!e.length||1==e.length&&"queue"==e[0])return __gpp.queue;if(1==e.length&&"events"==e[0])return __gpp.events;var t=e[0],n=1<e.length?e[1]:null,i=2<e.length?e[2]:null;if("ping"===t)n({gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",signalStatus:"not ready",supportedAPIs:a,cmpId:10,sectionList:[],applicableSections:[-1],gppString:"",parsedSections:{}},!0);else if("addEventListener"===t){"lastId"in __gpp||(__gpp.lastId=0),__gpp.lastId++;var o=__gpp.lastId;__gpp.events.push({id:o,callback:n,parameter:i}),n({eventName:"listenerRegistered",listenerId:o,data:!0,pingData:{gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",signalStatus:"not ready",supportedAPIs:a,cmpId:10,sectionList:[],applicableSections:[-1],gppString:"",parsedSections:{}}},!0)}else if("removeEventListener"===t){for(var r=!1,s=0;s<__gpp.events.length;s++)if(__gpp.events[s].id==i){__gpp.events.splice(s,1),r=!0;break}n({eventName:"listenerRemoved",listenerId:i,data:r,pingData:{gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",signalStatus:"not ready",supportedAPIs:a,cmpId:10,sectionList:[],applicableSections:[-1],gppString:"",parsedSections:{}}},!0)}else"hasSection"===t?n(!1,!0):"getSection"===t||"getField"===t?n(null,!0):__gpp.queue.push([].slice.apply(e))},window.__gpp_msghandler=function(n){var i,o="string"==typeof n.data;try{var t=o?JSON.parse(n.data):n.data}catch(e){t=null}"object"==typeof t&&null!==t&&"__gppCall"in t&&(i=t.__gppCall,window.__gpp(i.command,function(e,t){e={__gppReturn:{returnValue:e,success:t,callId:i.callId}};n.source.postMessage(o?JSON.stringify(e):e,"*")},"parameter"in i?i.parameter:null,"version"in i?i.version:"1.1"))},"__gpp"in window&&"function"==typeof window.__gpp||(window.__gpp=window.__gpp_stub,window.addEventListener("message",window.__gpp_msghandler,!1),window.__gpp_addFrame("__gppLocator"))}var l,c=function(){var e=arguments;typeof window.__uspapi!==c&&setTimeout(function(){void 0!==window.__uspapi&&window.__uspapi.apply(window.__uspapi,e)},500)};void 0===window.__uspapi&&(window.__uspapi=c,l=setInterval(function(){i++,window.__uspapi===c&&i<3||clearInterval(l)},6e3))}})()}catch(e){}(e=>{function d(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function a(e,t,n,i,o,r){return d((t=d(d(t,e),d(i,r)))<<o|t>>>32-o,n)}function h(e,t,n,i,o,r,s){return a(t&n|~t&i,e,t,o,r,s)}function p(e,t,n,i,o,r,s){return a(t&i|n&~i,e,t,o,r,s)}function f(e,t,n,i,o,r,s){return a(t^n^i,e,t,o,r,s)}function g(e,t,n,i,o,r,s){return a(n^(t|~i),e,t,o,r,s)}function s(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n,i,o,r,s=1732584193,a=-271733879,l=-1732584194,c=271733878,u=0;u<e.length;u+=16)a=g(a=g(a=g(a=g(a=f(a=f(a=f(a=f(a=p(a=p(a=p(a=p(a=h(a=h(a=h(a=h(i=a,l=h(o=l,c=h(r=c,s=h(n=s,a,l,c,e[u],7,-680876936),a,l,e[u+1],12,-389564586),s,a,e[u+2],17,606105819),c,s,e[u+3],22,-1044525330),l=h(l,c=h(c,s=h(s,a,l,c,e[u+4],7,-176418897),a,l,e[u+5],12,1200080426),s,a,e[u+6],17,-1473231341),c,s,e[u+7],22,-45705983),l=h(l,c=h(c,s=h(s,a,l,c,e[u+8],7,1770035416),a,l,e[u+9],12,-1958414417),s,a,e[u+10],17,-42063),c,s,e[u+11],22,-1990404162),l=h(l,c=h(c,s=h(s,a,l,c,e[u+12],7,1804603682),a,l,e[u+13],12,-40341101),s,a,e[u+14],17,-1502002290),c,s,e[u+15],22,1236535329),l=p(l,c=p(c,s=p(s,a,l,c,e[u+1],5,-165796510),a,l,e[u+6],9,-1069501632),s,a,e[u+11],14,643717713),c,s,e[u],20,-373897302),l=p(l,c=p(c,s=p(s,a,l,c,e[u+5],5,-701558691),a,l,e[u+10],9,38016083),s,a,e[u+15],14,-660478335),c,s,e[u+4],20,-405537848),l=p(l,c=p(c,s=p(s,a,l,c,e[u+9],5,568446438),a,l,e[u+14],9,-1019803690),s,a,e[u+3],14,-187363961),c,s,e[u+8],20,1163531501),l=p(l,c=p(c,s=p(s,a,l,c,e[u+13],5,-1444681467),a,l,e[u+2],9,-51403784),s,a,e[u+7],14,1735328473),c,s,e[u+12],20,-1926607734),l=f(l,c=f(c,s=f(s,a,l,c,e[u+5],4,-378558),a,l,e[u+8],11,-2022574463),s,a,e[u+11],16,1839030562),c,s,e[u+14],23,-35309556),l=f(l,c=f(c,s=f(s,a,l,c,e[u+1],4,-1530992060),a,l,e[u+4],11,1272893353),s,a,e[u+7],16,-155497632),c,s,e[u+10],23,-1094730640),l=f(l,c=f(c,s=f(s,a,l,c,e[u+13],4,681279174),a,l,e[u],11,-358537222),s,a,e[u+3],16,-722521979),c,s,e[u+6],23,76029189),l=f(l,c=f(c,s=f(s,a,l,c,e[u+9],4,-640364487),a,l,e[u+12],11,-421815835),s,a,e[u+15],16,530742520),c,s,e[u+2],23,-995338651),l=g(l,c=g(c,s=g(s,a,l,c,e[u],6,-198630844),a,l,e[u+7],10,1126891415),s,a,e[u+14],15,-1416354905),c,s,e[u+5],21,-57434055),l=g(l,c=g(c,s=g(s,a,l,c,e[u+12],6,1700485571),a,l,e[u+3],10,-1894986606),s,a,e[u+10],15,-1051523),c,s,e[u+1],21,-2054922799),l=g(l,c=g(c,s=g(s,a,l,c,e[u+8],6,1873313359),a,l,e[u+15],10,-30611744),s,a,e[u+6],15,-1560198380),c,s,e[u+13],21,1309151649),l=g(l,c=g(c,s=g(s,a,l,c,e[u+4],6,-145523070),a,l,e[u+11],10,-1120210379),s,a,e[u+2],15,718787259),c,s,e[u+9],21,-343485551),s=d(s,n),a=d(a,i),l=d(l,o),c=d(c,r);return[s,a,l,c]}function l(e){for(var t="",n=32*e.length,i=0;i<n;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t}function c(e){var t=[];for(t[(e.length>>2)-1]=void 0,i=0;i<t.length;i+=1)t[i]=0;for(var n=8*e.length,i=0;i<n;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<i%32;return t}function i(e){for(var t,n="",i=0;i<e.length;i+=1)t=e.charCodeAt(i),n+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return n}function u(e){return unescape(encodeURIComponent(e))}function o(e){return l(s(c(e=u(e)),8*e.length))}function r(e,t){var n,e=u(e),t=u(t),i=c(e),o=[],r=[];for(o[15]=r[15]=void 0,16<i.length&&(i=s(i,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],r[n]=1549556828^i[n];return e=s(o.concat(c(t)),512+8*t.length),l(s(r.concat(e),640))}function t(e,t,n){return t?n?r(t,e):i(r(t,e)):n?o(e):i(o(e))}"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:e.md5=t})(this);var LZString=(()=>{function n(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var v=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={},s={compressToBase64:function(e){if(null==e)return"";var t=s._compress(e,6,function(e){return i.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:s._decompress(t.length,32,function(e){return n(i,t.charAt(e))})},compressToUTF16:function(e){return null==e?"":s._compress(e,15,function(e){return v(e+32)})+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:s._decompress(t.length,16384,function(e){return t.charCodeAt(e)-32})},compressToUint8Array:function(e){for(var t=s.compress(e),n=new Uint8Array(2*t.length),i=0,o=t.length;i<o;i++){var r=t.charCodeAt(i);n[2*i]=r>>>8,n[2*i+1]=r%256}return n},decompressFromUint8Array:function(e){if(null==e)return s.decompress(e);for(var t=new Array(e.length/2),n=0,i=t.length;n<i;n++)t[n]=256*e[2*n]+e[2*n+1];var o=[];return t.forEach(function(e){o.push(v(e))}),s.decompress(o.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":s._compress(e,6,function(e){return o.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),s._decompress(t.length,32,function(e){return n(o,t.charAt(e))}))},compress:function(e){return s._compress(e,16,function(e){return v(e)})},_compress:function(e,t,n){if(null==e)return"";for(var i,o,r,s,a={},l={},c="",u=2,d=3,h=2,p=[],f=0,g=0,m=0;m<e.length;m+=1)if(r=e.charAt(m),Object.prototype.hasOwnProperty.call(a,r)||(a[r]=d++,l[r]=!0),s=c+r,Object.prototype.hasOwnProperty.call(a,s))c=s;else{if(Object.prototype.hasOwnProperty.call(l,c)){if(c.charCodeAt(0)<256){for(i=0;i<h;i++)f<<=1,g==t-1?(g=0,p.push(n(f)),f=0):g++;for(o=c.charCodeAt(0),i=0;i<8;i++)f=f<<1|1&o,g==t-1?(g=0,p.push(n(f)),f=0):g++,o>>=1}else{for(o=1,i=0;i<h;i++)f=f<<1|o,g==t-1?(g=0,p.push(n(f)),f=0):g++,o=0;for(o=c.charCodeAt(0),i=0;i<16;i++)f=f<<1|1&o,g==t-1?(g=0,p.push(n(f)),f=0):g++,o>>=1}0==--u&&(u=Math.pow(2,h),h++),delete l[c]}else for(o=a[c],i=0;i<h;i++)f=f<<1|1&o,g==t-1?(g=0,p.push(n(f)),f=0):g++,o>>=1;0==--u&&(u=Math.pow(2,h),h++),a[s]=d++,c=String(r)}if(""!==c){if(Object.prototype.hasOwnProperty.call(l,c)){if(c.charCodeAt(0)<256){for(i=0;i<h;i++)f<<=1,g==t-1?(g=0,p.push(n(f)),f=0):g++;for(o=c.charCodeAt(0),i=0;i<8;i++)f=f<<1|1&o,g==t-1?(g=0,p.push(n(f)),f=0):g++,o>>=1}else{for(o=1,i=0;i<h;i++)f=f<<1|o,g==t-1?(g=0,p.push(n(f)),f=0):g++,o=0;for(o=c.charCodeAt(0),i=0;i<16;i++)f=f<<1|1&o,g==t-1?(g=0,p.push(n(f)),f=0):g++,o>>=1}0==--u&&(u=Math.pow(2,h),h++),delete l[c]}else for(o=a[c],i=0;i<h;i++)f=f<<1|1&o,g==t-1?(g=0,p.push(n(f)),f=0):g++,o>>=1;0==--u&&(u=Math.pow(2,h),h++)}for(o=2,i=0;i<h;i++)f=f<<1|1&o,g==t-1?(g=0,p.push(n(f)),f=0):g++,o>>=1;for(;;){if(f<<=1,g==t-1){p.push(n(f));break}g++}return p.join("")},decompress:function(t){return null==t?"":""==t?null:s._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(e,t,n){for(var i,o,r,s,a,l,c=[],u=4,d=4,h=3,p="",f=[],g={val:n(0),position:t,index:1},m=0;m<3;m+=1)c[m]=m;for(o=0,s=Math.pow(2,2),a=1;a!=s;)r=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=n(g.index++)),o|=(0<r?1:0)*a,a<<=1;switch(o){case 0:for(o=0,s=Math.pow(2,8),a=1;a!=s;)r=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=n(g.index++)),o|=(0<r?1:0)*a,a<<=1;l=v(o);break;case 1:for(o=0,s=Math.pow(2,16),a=1;a!=s;)r=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=n(g.index++)),o|=(0<r?1:0)*a,a<<=1;l=v(o);break;case 2:return""}for(i=c[3]=l,f.push(l);;){if(e<g.index)return"";for(o=0,s=Math.pow(2,h),a=1;a!=s;)r=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=n(g.index++)),o|=(0<r?1:0)*a,a<<=1;switch(l=o){case 0:for(o=0,s=Math.pow(2,8),a=1;a!=s;)r=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=n(g.index++)),o|=(0<r?1:0)*a,a<<=1;c[d++]=v(o),l=d-1,u--;break;case 1:for(o=0,s=Math.pow(2,16),a=1;a!=s;)r=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=n(g.index++)),o|=(0<r?1:0)*a,a<<=1;c[d++]=v(o),l=d-1,u--;break;case 2:return f.join("")}if(0==u&&(u=Math.pow(2,h),h++),c[l])p=c[l];else{if(l!==d)return null;p=i+i.charAt(0)}f.push(p),c[d++]=i+p.charAt(0),i=p,0==--u&&(u=Math.pow(2,h),h++)}}};return s})();"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module&&(module.exports=LZString);
function is_touch_device(){if(navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i))return!0;try{var t,e=" -webkit- -moz- -o- -ms- ".split(" ");return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?!0:(t=["(",e.join("touch-enabled),("),"heartz",")"].join(""),window.matchMedia(t).matches)}catch(t){}return!1}var defaultSettings={"global.background":null,"global.left-handed":!1,"global.color-blind":!1,"global.pin-toolbar":!1,"global.hide-timer":!1,"global.non-competitive-timer":!1,"global.auto-submit":!0,"global.animate-transitions":!1},puzzleSettings={"bridges.show-crosshair":!1,"bridges.touch-mode":"both","bridges.highlight-change":!1,"bridges.mark-error-numbers":!1,"bridges.sticky-islands":!1,"bridges.click-between":!0,"bridges.gray-out-completed":!1,"bridges.mark-completed-style-gray":!1,"bridges.mark-completed-style-strike":!0,"bridges.highlight-group":!1,"bridges.lc-1-rc-2":!1},defaultSettings=$.extend(!0,defaultSettings,puzzleSettings),Settings={prefix:"puzzleSettings",bag:{},defaultBag:getDefaultSettingsBag(),onChange:{},saving:!1,store:function(t){MVVM&&!t&&MVVM.apply();try{return!0}catch(t){return!1}},get:function(e){var t;if(!(e in this.bag))if(null===(t=localStorage.getItem(this.prefix+"."+e))||t.jsonObject)e in this.defaultBag&&this.set(e,this.defaultBag[e],!0);else{var s;try{s=JSON.parse(t),this.set(e,s,!0)}catch(t){this.set(e,null,!0)}}return this.bag[e]},set:function(t,e,s){if(null===(this.bag[t]=e))delete this.bag[t],localStorage.removeItem(this.prefix+"."+t);else{for(var i=JSON.stringify(e);this.saving;);this.saving=!0,localStorage.setItem(this.prefix+"."+t,i),this.saving=!1}return t in this.onChange&&this.onchange[t](e),MVVM&&!s&&MVVM.apply(),!0},remove:function(t){this.set(t,null)},resetDefault:function(){for(var t=Object.keys(localStorage),e=t.length;e--;)t[e].includes(this.prefix)&&t[e].includes(".save.")&&!t[e].includes("saved-zoom")&&localStorage.removeItem(t[e]);this.bag={}},stringify:function(){for(var t=Object.keys(localStorage),e=t.length,s=[];e--;)t[e].includes(this.prefix)&&s.push('"'+t[e]+'":'+localStorage.getItem(t[e]));return"{"+s.join(",")+"}"}};function getDefaultSettingsBag(){try{var t=localStorage.getItem("puzzleSettings"),e=null;if(t){localStorage.removeItem("puzzleSettings");for(var e=getCurrentLocalStoragePuzzleSettings(),s=JSON.parse(t),i=Object.keys(s),r=i.length;r--;)null===localStorage.getItem("puzzleSettings."+i[r])&&localStorage.setItem("puzzleSettings."+i[r],JSON.stringify(s[i[r]]))}else e=$.extend(!0,{},defaultSettings);if(t||.95<Math.random()){var a,o=new Date,h=(o.setMonth(o.getMonth()-6),o.toISOString().split("T")[0]);for(a in localStorage){var n=a.match(/\d{4}-\d{2}-\d{2}/);(n&&n[0]<h||-1<a.indexOf("puzzleSettings.puzzleSettings"))&&localStorage.removeItem(a)}window.setTimeout(function(){var t,e=0;for(t in localStorage){var s=2*localStorage[t].length/1024/1024;!isNaN(s)&&localStorage.hasOwnProperty(t)&&(e+=s)}9.9<e&&confirm("Local Storage Full! It is recommended that you clear your cache. Do you want to proceed?")&&Settings.resetDefault()},100)}return e}catch(t){return void 0!==Settings?Settings.bag:$.extend(!0,{},defaultSettings)}}function getCurrentLocalStoragePuzzleSettings(){try{return $.extend($.extend(!0,{},defaultSettings),JSON.parse(localStorage.getItem("puzzleSettings")))}catch(t){return $.extend(!0,{},defaultSettings)}}function settingsApply(){Game.redraw(),MVVM.apply(),setZoom(getZoom())}(y=>{y.fn.hashi=function(t){this.slug="bridges";var M=y.extend({gutter:5,puzzleWidth:15,puzzleHeight:20,squareSize:Config.bridgesSquare,separatorWidth:Config.bridgesSeparator,task:"",solution:"",state:{},stateStack:[],checkState:0,maxBridges:2,panTimeThreshold:1},t);return this.task=[],this.currentState={cellStatus:[],taskStatus:[],lastMove:{},index:0},this.dom={task:[],rightBridges:[],bottomBridges:[],cells:[]},this.currentCell=0,this.currentDomCell=null,this.puzzleWidth=M.puzzleWidth,this.puzzleHeight=M.puzzleHeight,this.serializers=["serializeBoardState","serializeTaskState"],this.unserializers=["loadState","loadTaskState"],M.minScale||7!=M.puzzleWidth||(M.minScale=1),M.minScale||10!=M.puzzleWidth||(M.minScale=.8),M.minScale||15!=M.puzzleWidth||(M.minScale=.7),M.minScale||25!=M.puzzleWidth||(M.minScale=.4),this.getCellsSize=function(t){return t*M.squareSize+M.separatorWidth*(t+1)},this.getBoardWidth=function(){return 2*M.gutter+this.getCellsSize(M.puzzleWidth)},this.getBoardHeight=function(){return 2*M.gutter+this.getCellsSize(M.puzzleHeight)},this.parseTask=function(){if(M.task){this.loaded=!0,this.task=[];for(var t=0,e=0;e<M.task.length;e++)y.isNumeric(M.task[e])||"B"==M.task[e]?(this.task.push({index:this.task.length,number:M.task[e],row:this.rowFromIndex(t),col:this.colFromIndex(t)}),t++):t+=this.decodeChar(M.task[e])}else M.task="",this.loaded=!1;(M.check||M.checkState)&&(this.blacks=M.check)},this.initState=function(){if(this.currentState={cellStatus:[],taskStatus:[],lastMove:{},index:0},this.task.length)for(var t=0;t<this.task.length;t++)this.currentState.cellStatus[t]={row:this.task[t].row,col:this.task[t].col,right:{index:0,col:0,bridges:0},bottom:{index:0,row:0,bridges:0},bl:!1===this.getClosestIsland(t,"left")?-1:0,bt:!1===this.getClosestIsland(t,"up")?-1:0,bb:!1===this.getClosestIsland(t,"down")?-1:0,br:!1===this.getClosestIsland(t,"right")?-1:0,total:0},this.currentState.taskStatus[t]=0;this.currentState.solved=!1,this.solved=!1,this.states=[Util.clone(this.currentState)]},this.updateTotals=function(){for(var t=0;t<this.task.length;t++)this.currentState.cellStatus[t].total=this.currentState.cellStatus[t].right.bridges+this.currentState.cellStatus[t].bottom.bridges,-1!=this.currentState.cellStatus[t].bl&&(this.currentState.cellStatus[t].bl=0),-1!=this.currentState.cellStatus[t].bt&&(this.currentState.cellStatus[t].bt=0),-1!=this.currentState.cellStatus[t].bb&&(this.currentState.cellStatus[t].bb=0),-1!=this.currentState.cellStatus[t].br&&(this.currentState.cellStatus[t].br=0);for(t=0;t<this.task.length;t++)this.currentState.cellStatus[t].right.bridges&&(this.currentState.cellStatus[this.currentState.cellStatus[t].right.index].total+=this.currentState.cellStatus[t].right.bridges,this.currentState.cellStatus[this.currentState.cellStatus[t].right.index].bl=this.currentState.cellStatus[t].right.bridges,this.currentState.cellStatus[t].br=this.currentState.cellStatus[t].right.bridges),this.currentState.cellStatus[t].bottom.bridges&&(this.currentState.cellStatus[this.currentState.cellStatus[t].bottom.index].total+=this.currentState.cellStatus[t].bottom.bridges,this.currentState.cellStatus[this.currentState.cellStatus[t].bottom.index].bt=this.currentState.cellStatus[t].bottom.bridges,this.currentState.cellStatus[t].bb=this.currentState.cellStatus[t].bottom.bridges)},this.applyCurrentMoveToState=function(){var t,e;2==this.currentMove.cells.length&&(e=this.currentMove.startPoint.index<this.currentMove.endPoint.index?(t=this.currentMove.startPoint,this.currentMove.endPoint):(t=this.currentMove.endPoint,this.currentMove.startPoint),"left"==this.currentMove.direction||"right"==this.currentMove.direction?(this.currentState.cellStatus[t.index].right.bridges=this.getNextStatus(this.currentState.cellStatus[t.index].right.bridges),this.currentState.cellStatus[t.index].right.col=e.col,this.currentState.cellStatus[t.index].right.index=e.index):(this.currentState.cellStatus[t.index].bottom.bridges=this.getNextStatus(this.currentState.cellStatus[t.index].bottom.bridges),this.currentState.cellStatus[t.index].bottom.row=e.row,this.currentState.cellStatus[t.index].bottom.index=e.index),this.updateTotals(),this.currentState.lastMove=Util.clone(this.currentMove),this.storeCurrentState())},this.drawMoveHelpers=function(){this.drawing&&(y(".task-current").removeClass("task-current"),this.dom.task[this.currentMove.startPoint.index].addClass("task-current"),this.dom.task[this.currentMove.endPoint.index].addClass("task-current"))},this.hideMoveHelpers=function(){y(".task-current").removeClass("task-current")},this.drawCurrentMove=function(){this.drawMoveHelpers()},this.draw=function(){this.boardWidth=this.getBoardWidth(),this.boardHeight=this.getBoardHeight(),this.loaded?this.css("visibility","visible"):this.css("visibility","hidden"),this.empty();var t=document.createDocumentFragment(),e=0,s=0,i=(Settings.get("global.show-coordinates")&&(e=s=M.squareSize,this.boardWidth+=2*s,this.boardHeight+=2*e),e+=M.gutter,s+=M.gutter,this.css({width:this.boardWidth,height:this.boardHeight}),y('<div class="board-back">').css({position:"absolute",top:e+"px",left:s+"px",width:this.getCellsSize(M.puzzleWidth)+"px",height:this.getCellsSize(M.puzzleHeight)+"px","z-index":"100"})),r=(t.appendChild(i[0]),y('<div class="board-grid">').css({position:"absolute",top:e+"px",left:s+"px",width:this.getCellsSize(M.puzzleWidth)+"px",height:this.getCellsSize(M.puzzleHeight)+"px","z-index":"200"})),a=(t.appendChild(r[0]),y('<div class="board-bridges">').css({position:"absolute",top:e+"px",left:s+"px",width:this.getCellsSize(M.puzzleWidth)+"px",height:this.getCellsSize(M.puzzleHeight)+"px","z-index":"300"}));if(t.appendChild(a[0]),this.task.length)for(var o=Config.bridgesSize||3,h=0;h<this.task.length;h++){var n,l,c,d,u,g=this.getClosestIsland(h,"right");!1!==g&&(S=this.task[h].row,p=this.task[h].col,v=M.squareSize*S+M.separatorWidth*(S+1)+Math.ceil(M.squareSize/2),m=M.squareSize*p+M.separatorWidth*(p+1)+Math.ceil(M.squareSize/2),n=this.task[g].row,l=this.task[g].col,c=M.squareSize*n+M.separatorWidth*(n+1)+Math.ceil(M.squareSize/2),d=M.squareSize*l+M.separatorWidth*(l+1)+Math.ceil(M.squareSize/2),u=y('<div class="bridges-bridge bridges-bridge-right">').css({position:"absolute",top:v-o-Math.floor(o/2)+"px",left:m+"px",width:d-m+"px",height:o+"px","border-width":o+"px 0"}),this.dom.rightBridges[h]=u,a[0].appendChild(u[0])),!1!==(g=this.getClosestIsland(h,"down"))&&(S=this.task[h].row,p=this.task[h].col,v=M.squareSize*S+M.separatorWidth*(S+1)+M.squareSize/2,m=M.squareSize*p+M.separatorWidth*(p+1)+M.squareSize/2,n=this.task[g].row,l=this.task[g].col,c=M.squareSize*n+M.separatorWidth*(n+1)+M.squareSize/2,d=M.squareSize*l+M.separatorWidth*(l+1)+M.squareSize/2,u=y('<div class="bridges-bridge bridges-bridge-down">').css({position:"absolute",top:v+"px",left:m-o-Math.floor(o/2)+"px",width:o+"px",height:c-v+"px","border-width":"0 "+o+"px"}),this.dom.bottomBridges[h]=u,a[0].appendChild(u[0]))}i=y('<div class="board-tasks selectable">').css({position:"absolute",top:e+"px",left:s+"px",width:this.getCellsSize(M.puzzleWidth)+"px",height:this.getCellsSize(M.puzzleHeight)+"px","z-index":"400"});if(this.task.length){for(h=0;h<this.task.length;h++){var S=this.task[h].row,p=this.task[h].col,f=this.task[h].number,v=M.squareSize*S+M.separatorWidth*(S+1),m=M.squareSize*p+M.separatorWidth*(p+1),b=y('<div class="bridges-task-cell selectable" tabindex="-1">').css({position:"absolute",top:v+"px",left:m+"px",width:M.squareSize-2+"px",height:M.squareSize-2+"px"}),f=(b[0].row=S,b[0].col=p,b[0].top=v,b[0].left=m,b[0].index=h,"B"!=f&&b.text(f),b.focus(function(){$this.setCurrentCell({index:this.index},!0)}),y('<div class="dots dots-top dots-na"><i class="d1"></i><i class="d2"></i><i class="d3"></i></div>').css({position:"absolute",top:"-2px",left:"7px",width:"9px",height:"3px"})),k=y('<div class="dots dots-left dots-na"><i class="d1"></i><i class="d2"></i><i class="d3"></i></div>').css({position:"absolute",top:"7px",left:"-1px",width:"3px",height:"9px"}),C=y('<div class="dots dots-bottom dots-na"><i class="d1"></i><i class="d2"></i><i class="d3"></i></div>').css({position:"absolute",top:M.squareSize-3+"px",left:"7px",width:"9px",height:"3px"}),w=y('<div class="dots dots-right dots-na"><i class="d1"></i><i class="d2"></i><i class="d3"></i></div>').css({position:"absolute",top:"7px",left:M.squareSize-3+"px",width:"3px",height:"9px"});b[0].appendChild(f[0]),b[0].appendChild(k[0]),b[0].appendChild(C[0]),b[0].appendChild(w[0]),this.dom.task[h]=b,i[0].appendChild(b[0])}if(Settings.get("global.show-coordinates")){for(h=0;h<M.puzzleWidth;h++){var m=s+M.squareSize*h+M.separatorWidth*(h+1),x=-13;M.relativeTo||(x=0),b=y('<div class="coordinate-sign t">').css({top:x+"px",left:m+"px",width:M.squareSize+"px",height:M.squareSize+"px"}).text(this.colName(h)),t.appendChild(b[0]),b=y('<div class="coordinate-sign bt">').css({bottom:"2px",left:m+"px",width:M.squareSize+"px",height:M.squareSize+"px"}).text(this.colName(h)),t.appendChild(b[0])}for(h=0;h<M.puzzleHeight;h++){var v=e+M.squareSize*h+M.separatorWidth*(h+1)-8,z=-5;M.relativeTo||(z=0,v+=M.gutter),b=y('<div class="coordinate-sign l">').css({top:v+"px",left:z+"px",width:M.squareSize+"px",height:M.squareSize+"px"}).text(this.chessCoordinates?M.puzzleHeight-h:h+1),t.appendChild(b[0]),b=y('<div class="coordinate-sign r">').css({top:v+"px",right:z+"px",width:M.squareSize+"px",height:M.squareSize+"px"}).text(this.chessCoordinates?M.puzzleHeight-h:h+1),t.appendChild(b[0])}}}t.appendChild(i[0]),this.initCrosshairHelper(),this[0].appendChild(t),this.task.length&&this.drawCurrentState()},this.getClosestIsland=function(t,e){if("right"==e)for(var s=t+1;s<this.task.length;s++)if(this.task[t].row==this.task[s].row)return s;if("down"==e)for(s=t+1;s<this.task.length;s++)if(this.task[t].col==this.task[s].col)return s;if("left"==e)for(s=t-1;0<=s;s--)if(this.task[t].row==this.task[s].row)return s;if("up"==e)for(s=t-1;0<=s;s--)if(this.task[t].col==this.task[s].col)return s;return!1},this.getClosestIslandByCoords=function(t,e,s){if("right"==s)for(var i=0;i<this.task.length;i++)if(e<this.task[i].col&&t==this.task[i].row)return i;if("down"==s)for(i=0;i<this.task.length;i++)if(t<this.task[i].row&&e==this.task[i].col)return i;if("left"==s)for(i=this.task.length-1;0<=i;i--)if(e>this.task[i].col&&t==this.task[i].row)return i;if("up"==s)for(i=this.task.length-1;0<=i;i--)if(t>this.task[i].row&&e==this.task[i].col)return i;return!1},this.drawIslandBridgesRight=function(t,e){void 0!==this.dom.rightBridges[t]&&(this.dom.rightBridges[t].removeClass("bridges0 bridges1 bridges2 completed").addClass("bridges"+e),Settings.get(this.slug+".gray-out-bridges"))&&(this.currentState.taskStatus[t]&&this.dom.rightBridges[t].addClass("completed"),!1!==(e=this.getClosestIsland(t,"right")))&&this.currentState.taskStatus[e]&&this.dom.rightBridges[t].addClass("completed")},this.drawIslandBridgesBottom=function(t,e){void 0!==this.dom.bottomBridges[t]&&(this.dom.bottomBridges[t].removeClass("bridges0 bridges1 bridges2 completed").addClass("bridges"+e),Settings.get(this.slug+".gray-out-bridges"))&&(this.currentState.taskStatus[t]&&this.dom.bottomBridges[t].addClass("completed"),!1!==(e=this.getClosestIsland(t,"down")))&&this.currentState.taskStatus[e]&&this.dom.bottomBridges[t].addClass("completed")},this.drawIslandBridges=function(t){void 0!==this.currentState.cellStatus[t]&&(this.drawIslandBridgesRight(t,this.currentState.cellStatus[t].right.bridges),this.drawIslandBridgesBottom(t,this.currentState.cellStatus[t].bottom.bridges),void 0!==this.currentState.taskStatus[t])&&this.dom.task[t].toggleClass("completed",!!this.currentState.taskStatus[t])},this.updateDotHelpers=function(){y(".bridges-task-cell .dots").removeClass("dots-na dots0 dots1 dots2");for(var t=0;t<this.task.length;t++){var e=this.currentState.cellStatus[t];this.dom.task[t].find(".dots-top").addClass(-1==e.bt?"dots-na":"dots"+e.bt),this.dom.task[t].find(".dots-left").addClass(-1==e.bl?"dots-na":"dots"+e.bl),this.dom.task[t].find(".dots-bottom").addClass(-1==e.bb?"dots-na":"dots"+e.bb),this.dom.task[t].find(".dots-right").addClass(-1==e.br?"dots-na":"dots"+e.br)}},this.drawCurrentState=function(){this.updateDotHelpers(),this.drawHelperHighlightMove(this.currentState.lastMove);for(var t=0;t<this.task.length;t++)this.drawIslandBridges(t)},this.onEndMove=function(){if(this.currentMove.startPoint.row==this.currentMove.endPoint.row&&this.currentMove.startPoint.col==this.currentMove.endPoint.col){if((new Date).getTime()-this.dragMonitor.timeStart>Config.panTimeThreshold)return;if(Settings.get(this.slug+".gray-out-completed"))return;this.currentState.taskStatus[this.currentMove.startPoint.index]=!this.currentState.taskStatus[this.currentMove.startPoint.index],this.storeCurrentState()}else this.setCurrentCell(this.currentMove.startPoint,!0);this.drawHelperHighlightMove(this.currentMove),this.drawCurrentState(),this.updateDotHelpers()},this.setCurrentCell=function(t,e){this.currentCell=t.index,this.currentDomCell=this.dom.task[t.index],e||this.currentDomCell.focus()},this.getNumberOfDrawnCells=function(){return this.supper.getNumberOfDrawnCells()},this.checkCompletedTask=function(){for(var t=0;t<this.task.length;t++)Settings.get(this.slug+".gray-out-completed")&&(this.currentState.taskStatus[t]=this.currentState.cellStatus[t].total==this.task[t].number)},this.getErrors=function(t){for(var e={errors:[]},s=0;s<this.task.length;s++)if("B"!=this.task[s].number&&(t&&this.currentState.cellStatus[s].total!=this.task[s].number||this.currentState.cellStatus[s].total>this.task[s].number)&&(e.errors.push(s),t))return e.code="taskViolation",e;if(t)for(var s in this.recursion=[],this.getGroupRecursion({index:0}),this.task)if(void 0===this.recursion[s])return e.code="isolatedIslands",e;return 0<e.errors.length&&e},this.highlightErrors=function(){if(y(".task-err").removeClass("task-err"),(err=this.getErrors())&&Settings.get(this.slug+".mark-error-numbers"))for(var t=0;t<err.errors.length;t++)this.dom.task[err.errors[t]].addClass("task-err")},this.getGroupRecursion=function(t){var e,t=t.index;void 0===this.recursion[t]&&(this.recursion[t]=this.task[t],this.currentState.cellStatus[t].right.bridges&&!1!==(e=this.getClosestIsland(t,"right"))&&this.getGroupRecursion(this.task[e]),this.currentState.cellStatus[t].bottom.bridges&&!1!==(e=this.getClosestIsland(t,"down"))&&this.getGroupRecursion(this.task[e]),!1!==(e=this.getClosestIsland(t,"up"))&&this.currentState.cellStatus[e].bottom.bridges&&this.getGroupRecursion(this.task[e]),!1!==(e=this.getClosestIsland(t,"left")))&&this.currentState.cellStatus[e].right.bridges&&this.getGroupRecursion(this.task[e])},this.highlightGroup=function(t){if(void 0!==t)for(c in y(".active").removeClass("active"),this.recursion=[],this.getGroupRecursion(t[0]),this.recursion)this.dom.task[c].addClass("active"),this.currentState.cellStatus[c].right.bridges&&this.dom.rightBridges[c].addClass("active"),this.currentState.cellStatus[c].bottom.bridges&&this.dom.bottomBridges[c].addClass("active")},this.drawHelperHighlightMove=function(t){if(y(".active").removeClass("active"),Settings.get(this.slug+".highlight-group")&&t.cells&&t.cells.length&&(this.dom.task[t.startPoint.index].hasClass("active")?this.dom.task[t.endPoint.index].hasClass("active")||this.highlightGroup(this.dom.task[t.endPoint.index]):this.highlightGroup(this.dom.task[t.startPoint.index])),Settings.get(this.slug+".highlight-change")&&(y(".cell-active").removeClass("cell-active"),t.cells))for(var e=0;e<t.cells.length;e++)this.highlightCell(t.cells[e],"cell-active");Settings.get(this.slug+".gray-out-completed")&&this.checkCompletedTask(),this.highlightErrors()},this.repositionHelpers=function(){var t=this.boardWidth,e=this.boardHeight,s=(s=this.css("transform").match(/matrix\((.*)\)/))?s[1].split(","):[0,0,0,0,0,0],i=parseFloat(s[0]),r=parseFloat(s[4]),s=parseFloat(s[5]),i=i||1;if(Settings.get(this.slug+".sticky-islands")){for(var a=(Config.headerHeight-(s+e/2*(1-i)+Config.paddingTop+1)+Layout.scrollTop())/i,o=-(r+t/2*(1-i))/i,h=(i*t/2-(Layout.clientWidth()-t/2-r)+(Layout.portrait?0:Config.sidebarWidth))/i+M.separatorWidth+M.squareSize,n=(i*e/2-(Layout.clientHeight()-e/2-s)+Config.paddingTop-Layout.scrollTop()+(Layout.portrait?Config.footerHeight:0)+(Layout.isSubscriber()?0:Config.bannerHeight)-(Layout.hiddenHeader()?Config.headerHeight:0))/i+M.separatorWidth+M.squareSize,r=M.gutter,l=(a<M.gutter&&(a=M.gutter),o<r&&(o=r),h=t-(h=h<r?r:h),n=e-(n=n<r?r:n),[]),c=[],d=0;d<this.task.length;d++){var u,g=(v=this.dom.task[d])[0].left+M.separatorWidth+2,S=v[0].top+M.separatorWidth+2,p=0,f=0;g<o?(v.addClass("outside-left"),p=o-g+"px",void 0!==this.dom.bottomBridges[d]&&this.dom.bottomBridges[d].hide(),void 0!==l[v[0].row]&&(l[v[0].row].css("transform","translate(0, 0)"),l[v[0].row][0].translateX=0,l[v[0].row][0].translateY=0),l[v[0].row]=v):(v.removeClass("outside-left"),void(p=0)!==this.dom.bottomBridges[d]&&this.dom.bottomBridges[d].show(),o>g-M.separatorWidth-M.squareSize&&void 0!==l[v[0].row]&&(m=o-(g-M.separatorWidth-M.squareSize),u=o-l[v[0].row][0].left-M.separatorWidth-2-m,l[v[0].row].css("transform","translate("+u+"px, 0)"),l[v[0].row][0].translateX=u,l[v[0].row][0].translateY=0)),S<a?(v.addClass("outside-top"),f=a-S+"px",void 0!==this.dom.rightBridges[d]&&this.dom.rightBridges[d].hide(),void 0!==c[v[0].col]&&(c[v[0].col].css("transform","translate(0, 0)"),c[v[0].col][0].translateX=0,c[v[0].col][0].translateY=0),c[v[0].col]=v):(v.removeClass("outside-top"),void(f=0)!==this.dom.rightBridges[d]&&this.dom.rightBridges[d].show(),a>S-M.separatorWidth-M.squareSize&&void 0!==c[v[0].col]&&(m=a-(S-M.separatorWidth-M.squareSize),u=a-c[v[0].col][0].top-M.separatorWidth-2-m,c[v[0].col].css("transform","translate(0, "+u+"px)"),c[v[0].col][0].translateX=0,c[v[0].col][0].translateY=u)),v[0].translateX=p,v[0].translateY=f,v.css("transform","translate("+p+", "+f+")")}for(l=[],c=[],d=this.task.length-1;0<=d;d--){var v,m,g=(v=this.dom.task[d])[0].left+M.separatorWidth-2,S=v[0].top+M.separatorWidth-2,p=0,f=0;h<g?(v.addClass("outside-right"),p=h-g+"px",void 0!==this.dom.bottomBridges[d]&&this.dom.bottomBridges[d].hide(),void 0!==l[v[0].row]&&l[v[0].row].css("transform","translate(0, 0)"),l[v[0].row]=v):(v.removeClass("outside-right"),p=v[0].translateX,void 0===this.dom.bottomBridges[d]||v.hasClass("outside-left")||this.dom.bottomBridges[d].show(),h<g+M.separatorWidth+M.squareSize&&void 0!==l[v[0].row]&&(m=h-(g+M.separatorWidth+M.squareSize),l[v[0].row].css("transform","translate("+(h-l[v[0].row][0].left-M.separatorWidth+2-m)+"px, 0)"))),n<S?(v.addClass("outside-bottom"),f=n-S+"px",void 0!==this.dom.rightBridges[d]&&this.dom.rightBridges[d].hide(),void 0!==c[v[0].col]&&c[v[0].col].css("transform","translate(0, 0)"),c[v[0].col]=v):(v.removeClass("outside-bottom"),f=v[0].translateY,void 0===this.dom.rightBridges[d]||v.hasClass("outside-top")||this.dom.rightBridges[d].show(),n<S+M.separatorWidth+M.squareSize&&void 0!==c[v[0].col]&&(m=n-(S+M.separatorWidth+M.squareSize),c[v[0].col].css("transform","translate(0, "+(n-c[v[0].col][0].top-M.separatorWidth+2-m)+"px)"))),v.css("transform","translate("+p+", "+f+")")}Settings.get(this.slug+".show-crosshair")&&this.highlightCrosshairCell(this.getCrosshairTarget())}},this.stateChangedBoard=function(){for(var t=0;t<this.task.length;t++)if(this.currentState.cellStatus[t].right.bridges!=this.states[this.currentState.index].cellStatus[t].right.bridges||this.currentState.cellStatus[t].bottom.bridges!=this.states[this.currentState.index].cellStatus[t].bottom.bridges)return!0;return!1},this.stateChangedTask=function(){for(var t=0;t<this.task.length;t++)if(this.currentState.taskStatus[t]!=this.states[this.currentState.index].taskStatus[t])return!0;return!1},this.loadState=function(t){if(t.active&&t.active.length){this.currentState.lastMove.cells=[];for(var e=0;e<t.active.length;e++)this.currentState.lastMove.cells.push({index:t.active[e]})}if(t.board){for(var s=t.board.split(";"),e=0;e<s.length;e++){var i=s[e].split(","),r=(this.currentState.cellStatus[e].row=this.task[e].row,this.currentState.cellStatus[e].col=this.task[e].col,this.getClosestIsland(e,"right")),r=(this.currentState.cellStatus[e].right.bridges=parseInt(i[0]),this.currentState.cellStatus[e].right.col=!1===r?0:this.task[r].col,this.currentState.cellStatus[e].right.index=!1===r?0:r,this.getClosestIsland(e,"down"));this.currentState.cellStatus[e].bottom.bridges=parseInt(i[1]),this.currentState.cellStatus[e].bottom.row=!1===r?0:this.task[r].row,this.currentState.cellStatus[e].bottom.index=!1===r?0:r}this.updateTotals()}},this.serializeBoardState=function(t){t=t||this.currentState;for(var e=[],s=0;s<this.task.length;s++)e.push(t.cellStatus[s].right.bridges+","+t.cellStatus[s].bottom.bridges);return e.join(";")},this.serializeSolution=function(){for(var t=[],e=0;e<this.task.length;e++)this.currentState.cellStatus[e].right.bridges&&t.push(this.currentState.cellStatus[e].col+","+this.currentState.cellStatus[e].row+","+this.currentState.cellStatus[e].right.col+","+this.currentState.cellStatus[e].row+","+this.currentState.cellStatus[e].right.bridges),this.currentState.cellStatus[e].bottom.bridges&&t.push(this.currentState.cellStatus[e].col+","+this.currentState.cellStatus[e].row+","+this.currentState.cellStatus[e].col+","+this.currentState.cellStatus[e].bottom.row+","+this.currentState.cellStatus[e].bottom.bridges);return t.join(";")},this.getMarkedCount=function(){for(var t=0,e=0;e<this.task.length;e++)t=(t+=this.currentState.cellStatus[e].right.bridges)+this.currentState.cellStatus[e].bottom.bridges;return t},this.getHashedSolution=function(){s=[];for(var t=0;t<this.currentState.cellStatus.length;t++)s.push(this.currentState.cellStatus[t].right.bridges+","+this.currentState.cellStatus[t].bottom.bridges);return md5(M.task+s.join(";"))},this.getNextStatus=function(t){return Settings.get(this.slug+".lc-1-rc-2")&&2==M.maxBridges?t=this.currentMove.invert?2==t?0:2:1==t?0:1:this.currentMove.invert?t--:t++,(t+M.maxBridges+1)%(M.maxBridges+1)},this.highlightCell=function(t,e){this.dom.task[t.index].addClass(e)},this.drawHelperNumberOfDrawnCells=function(t,e){},this.canConnect=function(t,e){if(t=this.task[t],e=this.task[e],t.row==e.row){if(t.col==e.col)return!1;for(var s=Math.min(t.col,e.col),i=Math.max(t.col,e.col),r=0;r<this.task.length;r++)if(this.task[r].col>s&&this.task[r].col<i){if(this.task[r].row==t.row)return!1;if(this.task[r].row<t.row&&0<this.currentState.cellStatus[r].bottom.bridges&&this.currentState.cellStatus[r].bottom.row>t.row)return!1}}else{if(t.col!=e.col)return!1;for(s=Math.min(t.row,e.row),i=Math.max(t.row,e.row),r=0;r<this.task.length;r++)if(this.task[r].row>s&&this.task[r].row<i){if(this.task[r].col==t.col)return!1;if(this.task[r].col<t.col&&0<this.currentState.cellStatus[r].right.bridges&&this.currentState.cellStatus[r].right.col>t.col)return!1}}return!0},this.startMove=function(t,e,s){this.initCurrentMove(),this.drawing=!0,this.currentMove.direction="",this.currentMove.invert=e,this.currentMove.cellStatus=e,this.currentMove.startPoint={row:t.row,col:t.col,index:t.index},this.currentMove.endPoint={row:t.row,col:t.col,index:t.index},this.currentMove.cells.push({row:t.row,col:t.col,index:t.index}),s&&this.drawCurrentMove()},this.cancelMove=function(){this.resetCurrentMoveDraw(),this.initCurrentMove(),this.hideMoveHelpers(),y(".task-current").removeClass("task-current")},this.performMove=function(t){var e,s;this.drawing&&(e=this.currentMove.startPoint.index,!1!==(s=this.getClosestIsland(e,t))&&this.canConnect(e,s)&&(this.currentMove.direction=t,this.currentMove.endPoint={row:this.task[s].row,col:this.task[s].col,index:this.task[s].index},this.currentMove.cells=[this.currentMove.startPoint,this.currentMove.endPoint]),this.drawCurrentMove())},this.getClickBetweenIslands=function(t,e){t.offsetX-=M.separatorWidth/2,t.offsetY-=M.separatorWidth/2;var s=Math.floor(t.offsetY/(M.squareSize+M.separatorWidth)),i=Math.floor(t.offsetX/(M.squareSize+M.separatorWidth)),r=Math.abs(t.offsetX%(M.squareSize+M.separatorWidth)-(M.squareSize+M.separatorWidth)/2),t=Math.abs(t.offsetY%(M.squareSize+M.separatorWidth)-(M.squareSize+M.separatorWidth)/2),a=this.getClosestIslandByCoords(s,i,"up"),o=this.getClosestIslandByCoords(s,i,"down"),h=this.getClosestIslandByCoords(s,i,"left"),s=this.getClosestIslandByCoords(s,i,"right"),i=0;return!1!==a&&!1!==o&&this.canConnect(a,o)&&!1!==h&&!1!==s&&this.canConnect(h,s)&&("horizontal"==e?o=a=!1:"vertical"==e?s=h=!1:(this.task[o].row-this.task[a].row<this.task[s].col-this.task[h].col&&(i=M.squareSize/5),this.task[o].row-this.task[a].row>this.task[s].col-this.task[h].col&&(i=-M.squareSize/5))),r-i<t&&!1!==a&&!1!==o&&this.canConnect(a,o)?{from:a,to:o,direction:"down"}:!1!==h&&!1!==s&&this.canConnect(h,s)?{from:h,to:s,direction:"right"}:!(!1===a||!1===o||!this.canConnect(a,o))&&{from:a,to:o,direction:"down"}},this.clickBetween=function(t,e,s,i){this.canMove=!1,(t=this.getClickBetweenIslands(t,i))?(this.startMove(this.dom.task[t.from][0],e,s),this.performMove(t.direction)):this.cancelMove()},this.handleTouchStart=function(t){var e,s=!1,i=!1,r=(this.inputMode="mouse",this.toggleClass("kbd",!1),"touchstart"==t.type?e=t.originalEvent.changedTouches[0]:(e=t.originalEvent,s=3==t.which||1==t.which&&(t.ctrlKey||t.metaKey)&&!Settings.get($this.slug+".ctrl-force-direction"),i=!0),this.canMove=!0,y(document.elementFromPoint(e.clientX,e.clientY)));t.target=r[0],r.hasClass("bridges-task-cell")?(this.panTimeThreshold=1,this.clientX=e.clientX,this.clientY=e.clientY,this.startMove(r[0],s,i),r.addClass("task-current"),this.setCurrentCell({index:r[0].index}),i&&(this.dragMonitor.decision="draw")):Settings.get($this.slug+".click-between")&&r.hasClass("selectable")?(e=!1,this.panTimeThreshold=Config.panTimeThreshold,Settings.get($this.slug+".ctrl-force-direction")&&(e=t.ctrlKey||t.metaKey?"horizontal":"vertical"),this.clickBetween(this.getOffset(t),s,i,e),i&&(this.dragMonitor.decision="draw")):("draw"!=Settings.get($this.slug+".touch-mode")?this.dragMonitor.decision="panzoom":this.dragMonitor.decision="none",this.cancelMove()),this.dragMonitor.timeStart=(new Date).getTime()},this.getDirection=function(t,e){return Math.abs(e.clientX-t.clientX)>Math.abs(e.clientY-t.clientY)?e.clientX>t.clientX?"right":"left":e.clientY>t.clientY?"down":"up"},this.eventsTouchMove=function(t){var t=this.getChangedTouch(t),e=y(document.elementFromPoint(t.clientX,t.clientY));this.drawing&&this.canMove&&(e.hasClass("bridges-task-cell")&&this.currentMove.startPoint.row==e[0].row&&this.currentMove.startPoint.col==e[0].col?(this.currentMove.endPoint={row:this.currentMove.startPoint.row,col:this.currentMove.startPoint.col,index:this.currentMove.startPoint.index},this.currentMove.cells=[this.currentMove.startPoint],this.drawCurrentMove()):this.performMove(this.getDirection(this,t)))},this.eventsMove=function(t){if(t.shiftKey)return!!y(t.target).hasClass("bridges-task-cell")&&void this.highlightGroup(y(t.target))},this.getCrosshairOffset=function(t){var e=this.getScale(),s=this.getTransform(this),i=this.boardWidth,r=this.boardHeight,s=(offsetX=parseFloat(s[4]),offsetY=parseFloat(s[5]),-(Config.headerHeight-(offsetY+r/2*(1-e)+1)-(Layout.hiddenHeader()?0:Config.headerHeight))),r=offsetX+i/2*(1-e);return{offsetX:(t.chLeft-r)/e-M.gutter,offsetY:(t.chTop-s)/e-M.gutter}},this.eventsCrosshairMouseDown=function(t,e){this.canMove=!0,e.hasClass("bridges-task-cell")?(this.clientX=e.chLeft,this.clientY=e.chTop,this.startMove(e[0],3==t.which,!0),this.dragMonitor.decision="draw"):Settings.get($this.slug+".click-between")&&e.hasClass("selectable")?(this.clickBetween(this.getCrosshairOffset(e),3==t.which,!0),this.dragMonitor.decision="draw"):this.cancelMove()},this.eventsCrosshairMove=function(t){this.mouseDown&&this.drawing&&this.canMove&&(t.hasClass("bridges-task-cell")&&this.currentMove.startPoint.row==t[0].row&&this.currentMove.startPoint.col==t[0].col?(this.currentMove.endPoint={row:this.currentMove.startPoint.row,col:this.currentMove.startPoint.col,index:this.currentMove.startPoint.index},this.currentMove.cells=[this.currentMove.startPoint],this.drawCurrentMove()):this.performMove(this.getDirection(this,{clientX:t.chLeft,clientY:t.chTop})))},this.crosshairPan=function(){var t,e=this.getCrosshairTarget();this.highlightCrosshairCell([]),e.length&&(e.hasClass("bridges-task-cell")?this.highlightCrosshairCell(e):Settings.get($this.slug+".click-between")&&e.hasClass("selectable")&&(t=this.getClickBetweenIslands(this.getCrosshairOffset(e)))&&this.highlightCrosshairCell(this.dom.task[t.from].add(this.dom.task[t.to])),this.eventsCrosshairMove(e))},this.focusLeft=function(){var t=this.currentCell,e=t-1;if(0<=e)return this.task[t].row==this.task[e].row&&(this.setCurrentCell({index:e}),!0)},this.focusRight=function(){var t=this.currentCell,e=t+1;if(e<this.task.length)return this.task[t].row==this.task[e].row&&(this.setCurrentCell({index:e}),!0)},this.focusUp=function(){for(var t=this.currentCell,e=this.task[t].row,s=this.task[t].col,i=e-1;0<=i;i--){var r=this.getClosestIslandByCoords(i,s+1,"left"),a=this.getClosestIslandByCoords(i,s-1,"right");if(!1!==r||!1!==a)return!1===r?this.setCurrentCell({index:a}):!1!==a&&this.task[t].col-this.task[r].col>this.task[a].col-this.task[t].col?this.setCurrentCell({index:a}):this.setCurrentCell({index:r}),!0}},this.focusDown=function(){for(var t=this.currentCell,e=this.task[t].row,s=this.task[t].col,i=e+1;i<M.puzzleHeight;i++){var r=this.getClosestIslandByCoords(i,s+1,"left"),a=this.getClosestIslandByCoords(i,s-1,"right");if(!1!==r||!1!==a)return!1===r?this.setCurrentCell({index:a}):!1!==a&&this.task[t].col-this.task[r].col>this.task[a].col-this.task[t].col?this.setCurrentCell({index:a}):this.setCurrentCell({index:r}),!0}},this.initEventHandlers=function(){this.super.initEventHandlers(),this.attr("tabindex",-1),this.on("keydown.puzzle",function(t){if(!$this.mouseDown){if($this.keyMove=!1,-1!=[37,38,39,40,65,68,83,87].indexOf(t.keyCode)){if(t.preventDefault(),void 0===$this.currentCell)$this.setCurrentCell({index:0});else{switch($this.zoomingPanning=!1,t.keyCode){case 65:case 37:t.ctrlKey||t.shiftKey||t.metaKey?($this.startMove($this.task[$this.currentCell],t.shiftKey,!0),$this.performMove("left"),$this.endMove()):$this.focusLeft();break;case 87:case 38:t.ctrlKey||t.shiftKey||t.metaKey?($this.startMove($this.task[$this.currentCell],t.shiftKey,!0),$this.performMove("up"),$this.endMove()):$this.focusUp();break;case 68:case 39:t.ctrlKey||t.shiftKey||t.metaKey?($this.startMove($this.task[$this.currentCell],t.shiftKey,!0),$this.performMove("right"),$this.endMove()):$this.focusRight();break;case 83:case 40:t.ctrlKey||t.shiftKey||t.metaKey?($this.startMove($this.task[$this.currentCell],t.shiftKey,!0),$this.performMove("down"),$this.endMove()):$this.focusDown()}(t.ctrlKey||t.shiftKey||t.metaKey)&&($this.keyMove=!0)}$this.inputMode="keyboard"}else 32==t.keyCode&&"keyboard"==$this.inputMode?(t.preventDefault(),$this.keyMove=!0,$this.startMove($this.task[$this.currentCell],!1,!0),$this.dragMonitor.timeStart=(new Date).getTime(),$this.zoomingPanning=!1,$this.endMove()):27==t.keyCode?($this.inputMode="mouse",$this.focus()):$this.cancelMove();$this.toggleClass("kbd","keyboard"==$this.inputMode)}}),this.focus()},this.super=new puzzle(M),y.extend(Util.clone(this.super),this)}})(jQuery);